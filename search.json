[{"title":"Base IT knowledge l1","url":"/2019/05/14/grow/base/Base-IT-knowledge-l1/","content":"\n## Clean Code\n\ncode authoring basics: coding and naming conventions\nimportant 'code smells'\nrefactoring basics\n\n## Computer science fundamentals\n\nData structures: stack, array, linked list, queue, bag\nBasic algorithms: elementary sort\nAlgorithms complexity basics\nMerge and quick sort\nHash tables; hash functions\nPriority queue/heap\nUnion-find structure and algorithm\n\n## Version control principles\n\nversion control fundamentals, centralized vs distributed\nsvn basic usage: checkout, update, commit, merge, conflict resolution\ngit basic usage: clone, branches, merging, push, pull\ngit comparison to svn\n\n## Automation concepts\n\ncommand-line scripting\npowershell scripting\nusing msbuild for buiding automation\nContinuous integration setup and usage (cruise control, teamcity)\noverview of other scripting platforms (python, node.js, csipts)\n\n## Computer science\n\nDivide-and-conquer algorithms generalization\nGraph data structure, BFS, DFS algorithms\nGreedy algorithms: Minimal spanning tree, shortest path\n\n## Computers and networks\n\nNetwork fundamentals, OSI model\ntransport level protocols: IP, TCP, configuration\npresentatin level protocols: https\napplication level protocols: http, ftp, smtp, dns\nusing utils: ping, nslookup, tracert, telnet, curl\n\n## Xml concepts\n\nXml overview\nXPath concepts\nXSD concepts\n\n## Advanced computer science\n\nstrings algorithms: sort, substring search, regular expressions, compression\ndynamic programming\nnonlinear programming\nmemory-management (garbage collection)\ndata indexing\n\n## Cryptography\n\ncryptography algorithms: symmetrical, asymmetrical\napplications: .net cryptolibrary, crypto++, else?\n\n## Trees\n\nbinary search trees\nbalanced search trees: b-tree, red-black-tree, avl","tags":["base","l1"]},{"title":"client side javascript l1","url":"/2019/05/14/grow/js/client-side-javascript-l1/","content":"\n## Events Handling\n\nEvent Phases\nKnow Event phases\nBe able to explain difference between capturing and bubbling\nEvent Listeners\nBe able to handle events\nBe able to create custom events\nBe able to trigger events (both built-in and custom)\n\n## AJAX\n\nXMLHttpRequest\nKnow HTTP protocol basics\nKnow AJAX concept\nKnow how XMLHttpRequest works\nUnderstand AJAX security policy\nBe able to explain difference between AJAX request and Form submit\nBe able to create AJAX request (set content type, set response type, set custom headers)\nBe able to process AJAX response (parse response data)\nBe able to handle AJAX errors (including error codes)\n[fetch]\n[$.ajax]\n\n## Cross-Domain Communication\n\nJSONP\nKnow JSONP prerequisites\nBe able to create JSONP request\nBe able to process JSON response\nBe able to explain difference between JSONP and AJAX\n\n## DOM Manipulation\n\nSelectors\nKnow various types of selectors\nUnderstand selectors impotency and specifity\nKnow how to find and select the certain elements in DOM\nBe able to discover selectors performance issues, limitations and optimizations\nTraversing\nKnow how to traverse DOM tree vertically (parent, childNodes)\nKnow how to traverse DOM tree horizontally (siblings)\nBe able to discover traversing performance and optimizations\nModification\nBe able to add/remove/update DOM elements\nKnow DOM modification performance issues and bottlenecks\nUnderstand DOM optimizations\nLive Collections\n\n## Events Basics\n\nDOM Events\nKnow Event concept\nKnow basic Event types\nMouse / Keyboard Events\nForm / Input Events\n\n## Events Propagation / Preventing\n\nKnow Event propagation cycle\nKnow how to stop Event propagation\nKnow how to prevent Event default browser behavior\nDelegating\nUnderstand Event delegating concept\nUnderstand Event delegating benefits and drawbacks\nBe able to implement Event delegating\n\n## Global object window\n\nLocation\nKnow browser location structure\nBe able to explain client and server side navigation concept\nHistory API (Global object window)\nKnow browser history concept\nBe able to navigate within browser history\nBe able to use history state\nBe able to replace history state\nNavigator\nKnow how to parse user agent\nKnow how to discover client platform, browser\nDocument\nScreen\nCookies\nKnow cookie concept and limitations\nKnow how to work with cookies\nKnow cookie types and security policy\n\n## Modules\n\nCommonJS\nKnow JavaScript modules concept\nKnow CommonJS module notation\nUnderstand difference between module notation and implementation\nBe able to use CommonJS modules in both browser and NodeJS\nAMD, UMD\nKnow AMD notation\nKnow difference between CommonJS/AMD/UMD module notations\nES2015\nKnow ES2015 module notation\n\n## Nodes Modification\n\nNode Properties\nNode Attributes\nKnow how to modify DOM element properties and attributes\nUnderstand DOM element properties / attributes connection\nData Attributes\nCSS Scripting\nBe able to add/toggle/remove CSS classes for DOM element\nBe able to modify inline styles for DOM element\nBe able to explain inline styles performance issues\n\n## Timers\n\n[setTimeout]\n[setInterval]\n[clearTimeout]\n[requestAnimationFrame]\nUnderstand [requestAnimationFrame] concept\nBe able to explain difference between [setTimeout] and [requestAnimationFrame]\n\n## Web Storage\n\nLocalStorage\nSessionStorage\nKnow web storages limitations and security policy\nIndexedDB\n\n## optional\n\n## Cross-Origin Requests\n\nKnow AJAX security policy\nUnderstand cross domain request prerequisites\nBe able to handle AJAX security issues\nIFrame\n\n## Events Advanced\n\nMobile Events\nCustom Events\n\n## Modules Advanced\n\nRequireJS\nKnow how to define AMD module\nKnow how to define AMD module dependencies\nKnow how to wrap CommonJS module for AMD\nBe able to configure RequireJS\nBe able to use RequireJS plugins\nSystemJS\nKnow how to define SystemJS module\nKnow how to define SystemJS module dependencies\nKnow how to wrap CommonJS/AMD modules for SystemJS\nBe able to configure SystemJS\nBe able to use SystemJS plugins\n\n## Page Lifecycle\n\nParsing\nReflow\nRepaint\nOptimizations\n\n## Web Security\n\nCSRF\nKnow CSRF attack vector\nKnow protection methods against CSRF attack\nXSS\nKnow XSS attack vector\nKnow protection methods against XSS attack\nBe able to compare CSRF and XSS attacks\n\n## WebSockets\n\nWebSocket concept\nWenSocket interface","tags":["js","l1"]},{"title":"vue l1","url":"/2019/05/14/grow/vue/vue-l1/"},{"title":"react l1","url":"/2019/05/14/grow/react/react-l1/","content":"\n## Create basic components\n\n### Using JSX\n### Understanding component specs\n### Understanding basic lifecycle events\n### Using state and props\n### Understanding react event system\n\n## Create reusable components\n\n### Validating props\n### Transferring props between components\n### Creating mixins\n### Using refs\n\n## Create complex components\n\n### Understanding full component lifecycle\n### Understanding React top-level API\n### Using raw HTML in React components\n### Adding animation\n### Using ES2015\n\n## Performance\n\n### Understanding components rendering system\n### Using PureRenderMixin\n### Using immutable data structures (ImmutableJS)\n\n## SPA\n\n### Creating SPA using React Router\n\n## Testing\n\n### Unit testing using Jest and/or other testing frameworks\n### Using React testing utilities\n### Using JSDom for testing\n\n## Tools\n\n### Using React Devtools\n### Building and deploying React apps\n### Using React Hot Loader\n\n## Understand Flux\n\n### Understanding unidirectional data flow\n### Using dispatcher\n### Creating stores\n### Creating actions\n### Experience with any library (Redux, Mobx, Reflux, Alt, etc.)\n\n## Advanced React usage\n\n### Designing app architecture using React\n### Profiling and optimizing react components\n### Understanding virtual DOM\n### Using server side rendering\n### Integrating React into other frameworks (e.g. Backbone)\n### Two-way binding\n### Creating E2E tests","tags":["react l1"]},{"title":"js l1","url":"/2019/05/14/grow/js/js-l1/","content":"\n## Arrays\n\n### Array literals\n### Know several options how to create Array\n### Array length\n### Know how Array length property works\n\n## Closures Basics\n\n### Nested functions\n### Able to create nested functions\n### Understand variables visibility for nested scopes\n\n## ECMAScript Basics\n\n### cost, let declarations\n### Understand differences between [var], [let] and [const]\n### Know block scope and [let] visibility\n### Able to explain dead zone concept for [let]\n### Arrow functions\n### Know difference between arrow and usual functions\n### Able to discover cases for both arrow and usual functions using\n\n## Expressions, Operators, Statements\n\n### Operators\n### Know logic, mathematic operators\n### Know operators priority\n### Be able to use operators\n### Conditions\n### Know and able to use conditional statements\n### Loops\n### Know loop types\n### Understand loops differences and applicability\n### Be able to skip loop iteration or break loop\n\n## Functions\n\n### Function declaration/expression\n### Know both Function expression and Function declaration\n### Be able to explain declaration/expression differences\n\n## Objects\n\n### Object literals\n### Know several ways how to create object\n\n## Variables, Values, Data Types\n\n### Variables - Know how to declare variables\n### Values - Know how to assign values to variables\n### Literals - Know basic String, Number, Object, Array literals\n### Primitive Data Types\n### Discover primitive data types\n\n## Advanced Expressions\n\n### Hoisting\n### Understand hoisting concept\n### Able to use hoisting in development\n### Auto data type conversion\n### Know rules of auto data types conversion\n### Be able to discover cases of implicit data types conversion into boolean, string, number\n### Strict comparison\n### Be able to discover difference between strict and non-strict comparison\n### Be able to provide use cases of both types of comparison\n\n## Advanced Functions\n\n### arguments\n### Understand [arguments] and dynamic amount of parameters\n### Be able to use [arguments], retrieve additional parameters\n### [this] scope\n### Understand difference between function and method\n### Understand how [this] works, realize [this] possible issues\n### Manage [this] scope\n### Be able to replace [this] scope\n### Be able to use [call] and [apply] Function build-in methods\n\n## Arrays Built-in methods\n\n### Know how to copy array\n### Know how to copy array part\n### Know how to modify array\n\n## Arrays Iterating, Sorting, Filtering\n\n### Know how to sort Array\n### Be able to custom sorting for Array\n### Be able to filter Array elements\n### Know several method how to iterate Array elements\n### Be able to compare Hash and Array performance\n\n## Closures Advanced\n\n### Context (lexical environment)\n### Understand function creation context (lexical environment)\n### Be able to explain difference between scope and context\n### Inner/outer lexical environment\n### Understand lexical environment traversing mechanism\n### Understand connection between function and lexical environment\n### Be able to discover cases where lexical environment required\n### Be able to create and use closures\n\n## ECMAScript Advanced\n\n### Promises\n### Know how [Promise] works\n### Know promise chain pattern\n### Be able to compare promise and callback patterns\n### Be able to handle errors in promises\n### Be able to use promisification pattern\n### Iterators\n### Know [Iterator] interface\n### Be able to create custom iterator\n### Generators\n### Know generator syntax\n### Be able to compare generator and iterator\n### Understand how [yield] works\n### Understand plain async code\n### Be able to handle errors in generators\n\n## ECMAScript Classes\n\n### Class declaration\n### Know [class] declaration syntax\n### Know how [class] declaration works under the hood\n### Understand difference between [class] and function constructor\n### Understand difference between method and [class] method\n### Be able to develop in OOP style using [class] declaration\n### [constructor] keyword\n### Inheritance\n### Know [extends] syntax and how it works\n### Getter/setter\n### Be able to create getter / setter [class] methods\n\n## ECMAScript Data Types & Expressions\n\n### Object [keys/values]\n### Object calculated props\n### [Symbol] data type\n### Know [Symbol] data type specific\n### Be able to explain difference between usual object key and symbol\n### [Set/Map] data types\n### [WeakSet/WeakMap] data types\n\n## ECMAScript Intermediate\n\n### Function default parameters\n### Discover default parameters concept and limitations\n### Spread operator for Function\n### Know how to use spread operator for Function arguments\n### Be able to compare [arguments] and spread operator\n### Spread operator for Array\n### Understand and able to use spread operator for Array concatenation\n### Destruction\n### Be able to discover destruction concept\n### Understand variables and Function arguments destruction\n### String templates\n### Know String template syntax and rules\n### [for..of] loop\n### Know how [for..of] loop works\n### Be able to compare [for..of] loop with other types of loops\n\n## Functional Inheritance\n\n### Rent a constructor\n### Know functional inheritance pattern\n### Be able to explain difference between functional and prototypal inheritance\n### Be able to discover benefits and drawback of both prototypal and functional inheritance\n### Mix-ins\n### Know mix-in pattern\n### Know mix-in specific and limitations\n### Able to explain benefits and drawbacks comparing with inheritance\n\n## Functional Patterns\n\n### Immediate function\n### Know immediate function pattern\n### Be able to explain the purposes of immediate function usage\n### Callback (Function as argument)\n### Know callback pattern\n### Understand callback limitations (callback hell)\n### Binding\n### Know how to bind [this] scope to function\n### Be able to provide cases when it's required\n\n## Functional Scope\n\n### Know global scope and functional scope\n### Know variables visibility areas\n### Understand nested scopes and able work with them\n\n## Functions Parameters / Arguments\n\n### Know how to define Function parameters\n### Know difference between parameters passing by value and by reference\n### Know how to handle dynamic amount of Function parameters\n\n## JavaScript Errors\n\n### [try..catch] statement\n### Know how to handle errors\n### Be able to explain [try..catch] performance issues\n### Throw errors\n### Custom errors\n\n## Object as Hash\n\n### Be able to use Object as a Hash\n### Be able to loop though Object keys\n\n## Object Oriented Programming\n\n### [new] keyword\n### Understand how [new] keyword works\n### Understand the difference in calling function with / without [new] keyword\n### Function constructor\n### Know function constructor concept\n### Know function constructor pattern\n### Able to create constructor functions\n### Public, private, static members\n### Know how to create public members\n### Know how to create private members\n### Know how to create static members\n### Understand OOP emulation patterns and conventions\n\n## Objects Built-in methods\n\n### Know how to use built-in methods\n### Know static Object methods\n\n## Prototypal Inheritance Basics\n\n### [__proto__] property\n### Understand [__proto__] object property\n### Understand how interpreter traverses object properties\n### Able to work with object [__proto__]\n### Able to use [Object.create] and define [__proto__] explicitly\n### Able to set / get object prototype\n### [prototype] property\n### Know function [prototype] property\n### Understand dependency between function constructor [prototype] and instance [__proto__]\n### Able to create 'class' methods using function [prototype] property\n\n## Regular Expressions Basics\n\n### String methods\n### Know String methods for regular expressions\n### Understand regular expressions performance issues\n### RegExp methods and flags\n### Metacharacters\n### Quantifiers\n\n## optional\n\n## Advanced Functional Patterns\n\n### Chaining\n### Know chaining pattern and cases where it will be useful\n### Currying\n### Know how to bind arguments to function\n### Memorization\n### Know memorization optimization\n### Understand problem with non-primitive arguments memorization\n\n## ECMAScript Classes Advanced\n\n### [super] keyword\n### Understand [super] reference\n### Able to use [super] reference (in constructor, in class methods)\n### [static] keyword\n### Know static members concept\n### Be able to create [class] static properties and methods\n\n## Functions Recursion\n\n### Know recursion concept and able to use it\n### Able to explain recursion risks, benefits and drawbacks\n\n## Object Property Descriptor\n\n### Know how to use property descriptors\n### Be able to explain enumerable, configurable, writable property attributes\n### Be able to create property getter/setter\n\n## Prototypal Inheritance Advanced\n\n### Temporary constructor\n### Know prototypal inheritance mechanism\n### Know prototypal inheritance temporary constructor pattern\n### Be able to explain prototypal chain from instance to its 'class' and 'class' parent\n### Be able to develop in OOP style using prototypal inheritance pattern\n### [instanceof] operator\n### Be able to use [instanceof] operator\n### Know how [instanceof] operator works\n\n## Regular Expressions Advanced\n\n### Ranges\n### Grouping\n### Greedy and lazy search\n### Replacements\n\n## Strict mode\n\n### Strict mode activation\n### Strict mode limitations","tags":["js l1"]},{"title":"css l1","url":"/2019/05/14/grow/css/css-l1/","content":"\n## Basic knowledge\n\n### Syntax, properties and capabilities etc.\n\n## Pseudo-class and pseudo-elements\n\n### Special states and parts of elements\n\n## Selectors\n\n### Specificity, inheritance, cascade rules, CSS3 extension, selector attributes\n\n## Units\n\n### Relative and Absolute Units (em, %, px, pt etc.)\n\n## Block document model and display\n\n### Standard and box block model\n\n### Display property\n\n## CSS3: Animation and Transformation\n\n### Transition, key frames, transformation, rotation, scaling , blend mode\n\n## CSS3: Media Queries\n\n### Syntax and declaration, types, features/properties, operators, usage\n\n## CSS3: Visual effects\n\n### Shadows, rounded corners, gradients, filters etc.\n\n## CSS3: Web Typography\n\n### Web safe fonts, custom web fonts, font formats, icon fonts, font-face, font generators/services etc.\n\n## Positioning\n\n### Document flow\n\n### Position properties\n\n### Overflow and z-index\n\n## CSS3: Flexbox\n\n### Flex layout, axis, directions, flexibility, order, alignment","tags":["css l1"]},{"title":"html l1","url":"/2019/05/14/grow/html/html-l1/","content":"\n## Document Type Definition\n\n### Doctype element, HTML and XHTML syntax differences\n\n### Browser modes\n\n## Layout and text formatting tags\n\n### Layout tags\n\n### HTML 5 structural and semantic tags\n\n### Formatting tags: bold, italic, upper, lower cases and etc.\n\n## Metadata, Styles, Scripts\n\n### Meta tags and page encoding\n\n### Add inline styles, include internal and external CSS\n\n### Include internal and external Script\n\n### Meta viewport property\n\n## Page structure\n\n### Root HTML tags\n\n### Tree model\n\n### Basic HTML elements: headers, listings, links, rare tags and etc.\n\n### HTML tag attributes\n\n## Table, Form, Input Tags\n\n### Table layout tags\n\n### Table attributes\n\n### Form tags and attributes\n\n### Input types\n\n### HTML 5 input types","tags":["html l1"]},{"title":"class","url":"/2019/05/13/js/class/","content":"\n## Class declaration\n\n```js\nclass Rectangle {\n  constructor(height, width) {\n    this.height = height;\n    this.width = width;\n  }\n}\n```\n\nA `class expression` is another way to define a class. Class expressions can be named or unnamed. \n\n```js\n// unnamed\nlet Rectangle = class {\n  constructor(height, width) {\n    this.height = height;\n    this.width = width;\n  }\n};\nconsole.log(Rectangle.name);\n// output: \"Rectangle\"\n\n// named\nlet Rectangle = class Rectangle2 {\n  constructor(height, width) {\n    this.height = height;\n    this.width = width;\n  }\n};\nconsole.log(Rectangle.name);\n// output: \"Rectangle2\"\n```\n\n## Understand difference between [class] and function constructor\n\nAn important difference between function declarations and class declarations is that function declarations are **hoisted** and class declarations are not. You first need to declare your class and then access it, otherwise code like the following will throw a ReferenceError:\n\n```js\nconst p = new Rectangle(); // ReferenceError\n\nclass Rectangle {}\n```\n\n## Understand difference between [class] and function constructor\n\nThe `constructor` method is a special method for creating and initializing an object created with a class. There can only be one special method with the name \"constructor\" in a class. A `SyntaxError` will be thrown if the class contains more than one occurrence of a `constructor` method.\n\nA constructor can use the `super` keyword to call the constructor of the super class.\n\n## Understand difference between method and [class] method\n\n### Prototype methods\n\n```js\nclass Rectangle {\n  constructor(height, width) {\n    this.height = height;\n    this.width = width;\n  }\n  // Getter\n  get area() {\n    return this.calcArea();\n  }\n  // Method\n  calcArea() {\n    return this.height * this.width;\n  }\n}\n\nconst square = new Rectangle(10, 10);\n\nconsole.log(square.area); // 100\n```\n\n### Static methods\n\n```js\nclass Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  static distance(a, b) {\n    const dx = a.x - b.x;\n    const dy = a.y - b.y;\n\n    return Math.hypot(dx, dy);\n  }\n}\n\nconst p1 = new Point(5, 5);\nconst p2 = new Point(10, 10);\n\nconsole.log(Point.distance(p1, p2)); // 7.0710678118654755\n```\n\n## Inheritance\n\nThe `extends` keyword is used in class declarations or class expressions to create a class as a child of another class.\n\n```js\nclass Animal { \n  constructor(name) {\n    this.name = name;\n  }\n  \n  speak() {\n    console.log(`${this.name} makes a noise.`);\n  }\n}\n\nclass Dog extends Animal {\n  constructor(name) {\n    super(name); // call the super class constructor and pass in the name parameter\n  }\n\n  speak() {\n    console.log(`${this.name} barks.`);\n  }\n}\n\nlet d = new Dog('Mitzie');\nd.speak(); // Mitzie barks.\n```\n\n## Getter/setter\n\nThe `get` syntax binds an object property to a function that will be called when that property is looked up.\n\n```js\nvar obj = {\n  log: ['a', 'b', 'c'],\n  get latest() {\n    if (this.log.length == 0) {\n      return undefined;\n    }\n    return this.log[this.log.length - 1];\n  }\n}\n\nconsole.log(obj.latest);\n// expected output: \"c\"\n```\n\nThe `set` syntax binds an object property to a function to be called when there is an attempt to set that property.\n\n```js\nvar language = {\n  set current(name) {\n    this.log.push(name);\n  },\n  log: []\n}\n\nlanguage.current = 'EN';\nlanguage.current = 'FA';\n\nconsole.log(language.log);\n// expected output: Array [\"EN\", \"FA\"]\n```","tags":["js"]},{"title":"Array built-in methods","url":"/2019/05/13/js/Array-built-in-methods/","content":"\n## how to copy array\n\n### simple way\n\n``` js\nconst sheeps = ['ğŸ‘', 'ğŸ‘', 'ğŸ‘'];\n\n// Old way\nconst cloneSheeps = sheeps.slice();\n\n// ES6 way\nconst cloneSheepsES6 = [...sheeps];\n```\n\n### built-in way\n\nThe `Array.from()` method creates a new, shallow-copied `Array` instance from an array-like or iterable object.\n\n```js\nconsole.log(Array.from('foo'));\n// expected output: Array [\"f\", \"o\", \"o\"]\n\nconsole.log(Array.from([1, 2, 3], x => x + x));\n// expected output: Array [2, 4, 6]\n```\n\n### Why Canâ€™t I Use `=` to Copy an Array?\n\nBecause arrays in JS are reference values, so when you try to copy it using the `=` it will only copy the reference to the original array and not the value of the array.\n\nTo create a real copy of an array, you need to copy over the value of the array under a new value variable. That way this new array does not reference to the old array address in memory.\n\n```js\nconst sheeps = ['ğŸ‘', 'ğŸ‘', 'ğŸ‘'];\n\nconst fakeSheeps = sheeps;\nconst cloneSheeps = [...sheeps];\n\nconsole.log(sheeps === fakeSheeps);\n// true --> it's pointing to the same memory space\n\nconsole.log(sheeps === cloneSheeps);\n// false --> it's pointing to a new memory space\n```\n\n## how to copy array part\n\nThe `slice()` method returns a shallow copy of a portion of an array into a new array object selected from begin to end (end not included). The original array will not be modified.\n\n```js\nvar animals = ['ant', 'bison', 'camel', 'duck', 'elephant'];\n\nconsole.log(animals.slice(2));\n// expected output: Array [\"camel\", \"duck\", \"elephant\"]\n\nconsole.log(animals.slice(2, 4));\n// expected output: Array [\"camel\", \"duck\"]\n\nconsole.log(animals.slice(1, 5));\n// expected output: Array [\"bison\", \"camel\", \"duck\", \"elephant\"]\n```\n\n## how to modify array\n\n## how to sort Array\n\n`Array.sort()`\n\n``` js\nvar months = ['March', 'Jan', 'Feb', 'Dec'];\nmonths.sort();\nconsole.log(months);\n// expected output: Array [\"Dec\", \"Feb\", \"Jan\", \"March\"]\n\nvar array1 = [1, 30, 4, 21, 100000];\narray1.sort();\nconsole.log(array1);\n// expected output: ArrayÂ [1, 100000, 21, 30, 4]\n```\n\n## Be able to custom sorting for Array\n\n```js\nfunction compare(a, b) {\n  if (a is less than b by some ordering criterion) {\n    return -1;\n  }\n  if (a is greater than b by the ordering criterion) {\n    return 1;\n  }\n  // a must be equal to b\n  return 0;\n}\n```\n\nExample: \n\n``` js\nvar numbers = [4, 2, 5, 1, 3];\nnumbers.sort(function(a, b) {\n  return a - b;\n});\nconsole.log(numbers);\n\n// [1, 2, 3, 4, 5]\n```\n\n## Be able to filter Array elements\n\nThe `filter()` method creates a new array with all elements that pass the test implemented by the provided function.\n\n```js\nvar words = ['spray', 'limit', 'elite', 'exuberant', 'destruction', 'present'];\n\nconst result = words.filter(word => word.length > 6);\n\nconsole.log(result);\n// expected output: Array [\"exuberant\", \"destruction\", \"present\"]\n```\n\n## Several method how to iterate Array elements\n\n- Basic For Loop\n\n- Lodash forEach\n\n- The `forEach()` method executes a provided function once for each array element.\n\n- The `map()` method creates a new array with the results of calling a provided function on every element in the calling array.\n\n- The `entries()` method returns a new Array Iterator object that contains the key/value pairs for each index in the array.\n","tags":["js","array"]},{"title":"[this] scope","url":"/2019/05/13/js/this-scope/","content":"\n## Global Scope\n\nIn a browser, the global scope is the `window` object.\n\nif in your code you simply have: `var x = 9;` Youâ€™re actually setting the property `window.x` to 9 (when working in a browser). You could type `window.x = 9`;\n\n## Local Scope\n\nJavaScript scopes at a function level.\n\n```js\nfunction myFunc() {\n\tvar x = 5;\n};\nconsole.log(x); //undefined\n```\n\nIf you declare a variable & forget to use the `var` keyword, that variable is automatically made global. So this code would work:\n\n```js\nfunction myFunc() {\n\tx = 5;\n});\nconsole.log(x); //5\n```\n\n## this\n\n`this` is a variable that is automatically set for you when a function is invoked. \n\nDepending on how a function is invoked, `this` is set differently:\n\n```js\nfunction foo() {\n\tconsole.log(this); //global object\n};\n```\n\n```js\nmyapp = {};\nmyapp.foo = function() {\n\tconsole.log(this); //points to myapp object\n}\n```\n\n```js\nvar link = document.getElementById(\"myId\");\nlink.addEventListener(\"click\", function() {\n\tconsole.log(this); //points to link\n}, false);\n```\n\n### åœ¨å‡½æ•°å†…éƒ¨æ—¶ï¼Œ`this`ç”±å‡½æ•°æ€ä¹ˆè°ƒç”¨æ¥ç¡®å®šã€‚\n\n#### Simple call\n\nç®€å•è°ƒç”¨ï¼Œå³ç‹¬ç«‹å‡½æ•°è°ƒç”¨ã€‚ç”±äº`this`æ²¡æœ‰é€šè¿‡`call`æ¥æŒ‡å®šï¼Œä¸”`this`å¿…é¡»æŒ‡å‘å¯¹è±¡ï¼Œé‚£ä¹ˆé»˜è®¤å°±æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚\n\n```js\nfunction f1(){\n  return this;\n}\n\nf1() === window; // global object\n```\n\nåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ`this`ä¿æŒè¿›å…¥execution contextæ—¶è¢«è®¾ç½®çš„å€¼ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œé‚£ä¹ˆé»˜è®¤æ˜¯`undefined`ã€‚å®ƒå¯ä»¥è¢«è®¾ç½®ä¸ºä»»æ„å€¼(**åŒ…æ‹¬`null/undefined/1`ç­‰ç­‰åŸºç¡€å€¼ï¼Œä¸ä¼šè¢«è½¬æ¢æˆå¯¹è±¡**)ã€‚\n\n```js\nfunction f2(){\n  \"use strict\"; // see strict mode\n  return this;\n}\n\nf2() === undefined;\n```\n\n#### Arrow functions\n\nåœ¨ç®­å¤´å‡½æ•°ä¸­ï¼Œ`this`ç”±è¯æ³•/é™æ€ä½œç”¨åŸŸè®¾ç½®ï¼ˆset lexicallyï¼‰ã€‚å®ƒè¢«è®¾ç½®ä¸ºåŒ…å«å®ƒçš„execution contextçš„`this`ï¼Œå¹¶ä¸”ä¸å†è¢«è°ƒç”¨æ–¹å¼å½±å“ï¼ˆcall/apply/bindï¼‰ã€‚\n\n```js\nvar globalObject = this;\nvar foo = (() => this);\nconsole.log(foo() === globalObject); // true\n\n// Call as a method of a object\nvar obj = {foo: foo};\nconsole.log(obj.foo() === globalObject); // true\n\n// Attempt to set this using call\nconsole.log(foo.call(obj) === globalObject); // true\n\n// Attempt to set this using bind\nfoo = foo.bind(obj);\nconsole.log(foo() === globalObject); // true\n```\n\n#### As an object method\n\nå½“å‡½æ•°ä½œä¸ºå¯¹è±¡æ–¹æ³•è°ƒç”¨æ—¶ï¼Œ`this`æŒ‡å‘è¯¥å¯¹è±¡ã€‚\n\n```js\nvar o = {\n  prop: 37,\n  f: function() {\n    return this.prop;\n  }\n};\n\nconsole.log(o.f()); // logs 37\n```\n\n`this` on the object's prototype chain\n\nåŸå‹é“¾ä¸Šçš„æ–¹æ³•æ ¹å¯¹è±¡æ–¹æ³•ä¸€æ ·ï¼Œä½œä¸ºå¯¹è±¡æ–¹æ³•è°ƒç”¨æ—¶`this`æŒ‡å‘è¯¥å¯¹è±¡ã€‚\n\n#### æ„é€ å‡½æ•°\n\nåœ¨æ„é€ å‡½æ•°ï¼ˆå‡½æ•°ç”¨`new`è°ƒç”¨ï¼‰ä¸­ï¼Œ`this`æŒ‡å‘è¦è¢«constructedçš„æ–°å¯¹è±¡ã€‚\n\n#### callå’Œapply\n\n`Function.prototype`ä¸Šçš„`call`å’Œ`apply`å¯ä»¥æŒ‡å®šå‡½æ•°è¿è¡Œæ—¶çš„`this`ã€‚\n\n```js\nfunction add(c, d){\n  return this.a + this.b + c + d;\n}\n\nvar o = {a:1, b:3};\nadd.call(o, 5, 7); // 1 + 3 + 5 + 7 = 16\nadd.apply(o, [10, 20]); // 1 + 3 + 10 + 20 = 34\n```\n\næ³¨æ„ï¼Œå½“ç”¨`call`å’Œ`apply`è€Œä¼ è¿›å»ä½œä¸º`this`çš„ä¸æ˜¯å¯¹è±¡æ—¶ï¼Œå°†ä¼šè°ƒç”¨å†…ç½®çš„`ToObject`æ“ä½œè½¬æ¢æˆå¯¹è±¡ã€‚æ‰€ä»¥4å°†ä¼šè£…æ¢æˆ`new Number(4)`ï¼Œè€Œ`null/undefined`ç”±äºæ— æ³•è½¬æ¢æˆå¯¹è±¡ï¼Œå…¨å±€å¯¹è±¡å°†ä½œä¸º`this`ã€‚\n\n#### bind\n\nES5å¼•è¿›äº†`Function.prototype.bind`ã€‚`f.bind(someObject)`ä¼šåˆ›å»ºæ–°çš„å‡½æ•°ï¼ˆå‡½æ•°ä½“å’Œä½œç”¨åŸŸä¸åŸå‡½æ•°ä¸€è‡´ï¼‰ï¼Œä½†`this`è¢«æ°¸ä¹…ç»‘å®šåˆ°`someObject`ï¼Œä¸è®ºä½ æ€ä¹ˆè°ƒç”¨ã€‚\n\n#### As a DOM event handler\n\n`this`è‡ªåŠ¨è®¾ç½®ä¸ºè§¦å‘äº‹ä»¶çš„domå…ƒç´ ã€‚\n\n## å‚è€ƒé“¾æ¥\n\n[ä»è¿™ä¸¤å¥—é¢˜ï¼Œé‡æ–°è®¤è¯†JSçš„thisã€ä½œç”¨åŸŸã€é—­åŒ…ã€å¯¹è±¡](https://juejin.im/post/59aa71d56fb9a0248d24fae3)\n[æ·±å…¥ç†è§£JSä¸­å£°æ˜æå‡ã€ä½œç”¨åŸŸï¼ˆé“¾ï¼‰å’Œ`this`å…³é”®å­—](https://github.com/creeperyang/blog/issues/16)","tags":["js","this"]},{"title":"Parameters & Arguments in JavaScript","url":"/2019/05/13/js/Parameters-Arguments-in-JavaScript/","content":"\n[link](https://codeburst.io/parameters-arguments-in-javascript-eb1d8bd0ef04)\n\n- Parameters are variables listed as a part of the function definition.\n- Arguments are values passed to the function when it is invoked.\n\n``` js\n// Basic function with three parameters that logs the sum of all the parameters\nfunction argCheck(parameter1, parameter2, parameter3){\n  console.log(parameter1 + parameter2 + parameter3);\n}\n\n// Function with extra arguments\nargCheck(1,2,3,4);\n// Logs 6 (1 + 2 + 3, ignores 4)\n\n// Function with missing arguments\nargCheck(1,2);\n// Logs NaN because by default if a corresponding argument is missing, it is set to undefined. \n// parameter3 is assigned undefined and so 1+2+undefined = NaN\n\n// Note that, no error is thrown\n```\n\n```js\nfunction argumentVar(parameter1, parameter2, parameter3){\n  console.log(arguments.length); // Logs the number of arguments passed.\n  console.log(arguments[3]); // Logs the 4th argument. Follows array indexing notations. \n}\n\nargumentVar(1,2,3,4,5);\n// Log would be as follows\n// 5\n// 4\n\n// 5 is the number of arguments\n// 4 is the 4th argument\n```\n\n```js\nfunction restParam(parameter1, ...restArgs){\n  console.log(restArgs.length); // Logs the number of arguments that do not have a corresponding parameter\n  console.log(restArgs[2]); // Logs the 3rd argument after the number of arguments that do not have a corresponding parameter\n}\n\nrestParam(1,2,3,4,5);\n// Log would be as follows\n// 4\n// 4\n\n// 4 is the number of arguments that do not have a corresponding parameter\n// 4 is the 4th 3rd argument after the number of arguments that do not have a corresponding parameter\n```\n\n","tags":["js"]},{"title":"Auto data type conversion","url":"/2019/05/10/js/Auto-data-type-conversion/","content":"\n## è‡ªåŠ¨è½¬æ¢ä¸ºå¸ƒå°”å€¼\n\nJavaScript é‡åˆ°é¢„æœŸä¸ºå¸ƒå°”å€¼çš„åœ°æ–¹ï¼ˆæ¯”å¦‚`if`è¯­å¥çš„æ¡ä»¶éƒ¨åˆ†ï¼‰ï¼Œå°±ä¼šå°†éå¸ƒå°”å€¼çš„å‚æ•°è‡ªåŠ¨è½¬æ¢ä¸ºå¸ƒå°”å€¼ã€‚ç³»ç»Ÿå†…éƒ¨ä¼šè‡ªåŠ¨è°ƒç”¨`Boolean`å‡½æ•°ã€‚\n\nå› æ­¤é™¤äº†ä»¥ä¸‹äº”ä¸ªå€¼ï¼Œå…¶ä»–éƒ½æ˜¯è‡ªåŠ¨è½¬ä¸º`true`ã€‚\n\n``` js\nundefined\nnull\n+0æˆ–-0\nNaN\n''ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰\n```\n\nä¸‹é¢ä¸¤ç§å†™æ³•ï¼Œæœ‰æ—¶ä¹Ÿç”¨äºå°†ä¸€ä¸ªè¡¨è¾¾å¼è½¬ä¸ºå¸ƒå°”å€¼ã€‚å®ƒä»¬å†…éƒ¨è°ƒç”¨çš„ä¹Ÿæ˜¯`Boolean`å‡½æ•°ã€‚\n\n```js\n// å†™æ³•ä¸€\nexpression ? true : false\n\n// å†™æ³•äºŒ\n!! expression\n```\n\n## è‡ªåŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²\n\nJavaScript é‡åˆ°é¢„æœŸä¸ºå­—ç¬¦ä¸²çš„åœ°æ–¹ï¼Œå°±ä¼šå°†éå­—ç¬¦ä¸²çš„å€¼è‡ªåŠ¨è½¬ä¸ºå­—ç¬¦ä¸²ã€‚å…·ä½“è§„åˆ™æ˜¯ï¼Œå…ˆå°†å¤åˆç±»å‹çš„å€¼è½¬ä¸ºåŸå§‹ç±»å‹çš„å€¼ï¼Œå†å°†åŸå§‹ç±»å‹çš„å€¼è½¬ä¸ºå­—ç¬¦ä¸²ã€‚\n\nå­—ç¬¦ä¸²çš„è‡ªåŠ¨è½¬æ¢ï¼Œä¸»è¦å‘ç”Ÿåœ¨å­—ç¬¦ä¸²çš„åŠ æ³•è¿ç®—æ—¶ã€‚å½“ä¸€ä¸ªå€¼ä¸ºå­—ç¬¦ä¸²ï¼Œå¦ä¸€ä¸ªå€¼ä¸ºéå­—ç¬¦ä¸²ï¼Œåˆ™åè€…è½¬ä¸ºå­—ç¬¦ä¸²ã€‚\n\n```js\n'5' + 1 // '51'\n'5' + true // \"5true\"\n'5' + false // \"5false\"\n'5' + {} // \"5[object Object]\"\n'5' + [] // \"5\"\n'5' + function (){} // \"5function (){}\"\n'5' + undefined // \"5undefined\"\n'5' + null // \"5null\"\n```\n\n## è‡ªåŠ¨è½¬æ¢ä¸ºæ•°å€¼\n\nJavaScript é‡åˆ°é¢„æœŸä¸ºæ•°å€¼çš„åœ°æ–¹ï¼Œå°±ä¼šå°†å‚æ•°å€¼è‡ªåŠ¨è½¬æ¢ä¸ºæ•°å€¼ã€‚ç³»ç»Ÿå†…éƒ¨ä¼šè‡ªåŠ¨è°ƒç”¨`Number`å‡½æ•°ã€‚\n\né™¤äº†åŠ æ³•è¿ç®—ç¬¦ï¼ˆ+ï¼‰æœ‰å¯èƒ½æŠŠè¿ç®—å­è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œå…¶ä»–è¿ç®—ç¬¦éƒ½ä¼šæŠŠè¿ç®—å­è‡ªåŠ¨è½¬æˆæ•°å€¼ã€‚\n\n```js\n'5' - '2' // 3\n'5' * '2' // 10\ntrue - 1  // 0\nfalse - 1 // -1\n'1' - 1   // 0\n'5' * []    // 0\nfalse / '5' // 0\n'abc' - 1   // NaN\nnull + 1 // 1\nundefined + 1 // NaN\n```\n\n**æ³¨æ„**ï¼š`null`è½¬ä¸ºæ•°å€¼æ—¶ä¸º0ï¼Œè€Œ`undefined`è½¬ä¸ºæ•°å€¼æ—¶ä¸º`NaN`ã€‚\n\nä¸€å…ƒè¿ç®—ç¬¦ä¹Ÿä¼šæŠŠè¿ç®—å­è½¬æˆæ•°å€¼ã€‚\n\n```js\n+'abc' // NaN\n-'abc' // NaN\n+true // 1\n-false // 0\n```","tags":["js"]},{"title":"ææƒHoisting","url":"/2019/05/10/js/ææƒHoisting/","content":"\nHoisting is JavaScript's default behavior of moving all declarations to the top of the current scope (to the top of the current script or the current function).\n\n## Declarations are Hoisted\n\n### var\n\nHoisted\n\n### The let and const Keywords\n\nVariables and constants declared with let or const are <font color=red>not hoisted!</font>\n\n## Initializations are Not Hoisted\n\nJavaScript only hoists declarations, not initializations.\n\n``` js\nvar y;\nconsole.log(y); // undefined\ny = 7;\n```\n\nThis is because only the declaration (`var y`), not the initialization (`=7`) is hoisted to the top.\n\nBecause of hoisting, `y` has been declared before it is used, but because initializations are not hoisted, the value of `y` is undefined.\n\n[ES6 ç³»åˆ—ä¹‹ let å’Œ const](https://juejin.im/post/5b0238f66fb9a07aca7a74ba)","tags":["js"]},{"title":"js Primitive Data Types","url":"/2019/05/10/js/js-Primitive-Data-Types/","content":"\nThese six types are considered to be primitives. A primitive is not an object and has no methods of its own. All primitives are immutable.\n\n- Booleanâ€Šâ€”â€Štrue or false\n- Nullâ€Šâ€”â€Šno value\n- Undefinedâ€Šâ€”â€Ša declared variable but hasnâ€™t been given a value\n- Numberâ€Šâ€”â€Šintegers, floats, etc\n- Stringâ€Šâ€”â€Šan array of characters i.e words\n- Symbolâ€Šâ€”â€Ša unique value that's not equal to any other value\n\nEverything else is an Object type.","tags":["js"]},{"title":"js Objects","url":"/2019/05/10/js/js-Objects/","content":"\n## Object Literal\n\nA JavaScript object literal is a comma-separated list of name-value pairs wrapped in curly braces. Object literals encapsulate data, enclosing it in a tidy package.\n\nan example object literal:\n\n```js\nvar myObject = {\n    sProp: 'some string value',\n    numProp: 2,\n    bProp: false\n};\n```\n\nObject literal property values can be of any data type, including array literals, functions, and nested object literals.\n\n### Object Literal Syntax\n\nObject literals are defined using the following syntax rules:\n\n- A colon separates property name from value.\n- A comma separates each name-value pair from the next.\n- There should be no comma after the last name-value pair.\n\n## several ways how to create object\n\nObjects can be initialized using `new Object()`, `Object.create()`, or using the literal notation (initializer notation). \n\n```js\n// Using the Object() constructor:\nvar d = new Object();\n```\n\n```js\n// Using Object.create() method:\nvar a = Object.create(null);\n```\n\n```js\n// Using the bracket's syntactig sugar:\nvar b = {};\n```\n\n```js\n// Using a function constructor\nvar Obj = function(name) {\n  this.name = name\n}\nvar c = new Obj(\"hello\"); \n```\n\n```js\n// Using the function constructor + prototype:\nfunction myObj(){};\nmyObj.prototype.name = \"hello\";\nvar k = new myObj();\n```\n\n```js\n// Using ES6 class syntax:\nclass myObject  {\n  constructor(name) {\n    this.name = name;\n  }\n}\nvar e = new myObject(\"hello\");\n```\n\n```js\n// Singleton pattern:\nvar l = new function(){\n  this.name = \"hello\";\n}\n```","tags":["js","object"]},{"title":"function declaration/expression differences","url":"/2019/05/10/js/function-declaration-expression-differences/","content":"\n- Function **declarations** load before any code is executed.\n\n- Function **expressions** load only when the interpreter reaches that line of code.\n\nSo if you try to call a function expression before it's loaded, you'll get an error! If you call a function declaration instead, it'll always work, because no code can be called until all declarations are loaded.\n\nExample: Function Expression\n\n``` js\nalert(foo()); // ERROR! foo wasn't loaded yet\nvar foo = function() { return 5; } \n```\n\nExample: Function Declaration\n\n``` js\nalert(foo()); // Alerts 5. Declarations are loaded before any code can run.\nfunction foo() { return 5; } \n```\n\n## Function Declaration\n\n```js\nfunction foo() { ... }\n```\n\nBecause of function hoisting, the function declared this way can be called both after and before the definition.\n\n## Function Expression\n\n1. Named Function Expression\n\n```js\nvar foo = function bar() { ... }\n```\n\n2. Anonymous Function Expression\n\n```js\nvar foo = function() { ... }\n```\n\n`foo()` can be called only after creation.\n","tags":["js"]},{"title":"operators and loops","url":"/2019/05/10/js/operators-and-loops/","content":"\n## operators\n\n`i++` ä¼˜å…ˆçº§é«˜äº `++i`\n\n## loops\n\n### differences\n\n- A `for` loop is used when you know the number of iterations the loop needs to make. \n- A `while` loop can be used when you need your loop to run an unknown number of times until a specific condition is met. \n- `for/in` - loops through the properties of an object. `while` - loops through a block of code while a specified condition is true. `do/while` - loops through a block of code once, and then repeats the loop while a specified condition is true.\n\n## skip loops\n\n- The `break` statement \"jumps out\" of a loop.\n\n- The `continue` statement \"jumps over\" one iteration in the loop.\n\n\n","tags":["js"]},{"title":"difference between arrow and usual functions","url":"/2019/05/10/js/difference-between-arrow-and-usual-functions/","content":"\nå¼•å…¥ç®­å¤´å‡½æ•°æœ‰ä¸¤ä¸ªæ–¹é¢çš„ä½œç”¨ï¼šæ›´ç®€çŸ­çš„å‡½æ•°å¹¶ä¸”ä¸ç»‘å®š`this`ã€‚\n\n## ä¸ç»‘å®š`this`\n\nåœ¨ç®­å¤´å‡½æ•°å‡ºç°ä¹‹å‰ï¼Œæ¯ä¸ªæ–°å®šä¹‰çš„å‡½æ•°éƒ½æœ‰å®ƒè‡ªå·±çš„ `this`å€¼ï¼ˆåœ¨æ„é€ å‡½æ•°çš„æƒ…å†µä¸‹æ˜¯ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼çš„å‡½æ•°è°ƒç”¨ä¸­ä¸º `undefined`ï¼Œå¦‚æœè¯¥å‡½æ•°è¢«ä½œä¸ºâ€œå¯¹è±¡æ–¹æ³•â€è°ƒç”¨åˆ™ä¸ºåŸºç¡€å¯¹è±¡ç­‰ï¼‰ã€‚\n\nç®­å¤´å‡½æ•°ä¸ä¼šåˆ›å»ºè‡ªå·±çš„`this`,å®ƒåªä¼šä»è‡ªå·±çš„ä½œç”¨åŸŸé“¾çš„ä¸Šä¸€å±‚ç»§æ‰¿`this`ã€‚\n\n- ç®­å¤´å‡½æ•°ä¸ç»‘å®š`Arguments` å¯¹è±¡\n- ç®­å¤´å‡½æ•°æ²¡æœ‰å®šä¹‰`this`ç»‘å®š\n- ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œæ„é€ å™¨ï¼Œå’Œ `new`ä¸€èµ·ç”¨ä¼šæŠ›å‡ºé”™è¯¯ã€‚\n- ç®­å¤´å‡½æ•°æ²¡æœ‰`prototype`å±æ€§ã€‚\n-  `yield` å…³é”®å­—é€šå¸¸ä¸èƒ½åœ¨ç®­å¤´å‡½æ•°ä¸­ä½¿ç”¨ï¼ˆé™¤éæ˜¯åµŒå¥—åœ¨å…è®¸ä½¿ç”¨çš„å‡½æ•°å†…ï¼‰ã€‚å› æ­¤ï¼Œç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œç”Ÿæˆå™¨ã€‚","tags":["js"]},{"title":"var let const","url":"/2019/05/10/js/var-let-const/","content":"\n[Scoping with var, let & const](https://blog.usejournal.com/scoping-with-var-let-const-c0060135e09d)\n[var vs let vs const in JavaScript](https://tylermcginnis.com/var-let-const/)\n\n## var\n\n- `var` has **functional** scope not block scope\n\n```js\nfunction foo() {\n  var bar = 'hello';\n  console.log(bar);\n}\nconsole.log(bar); // ReferenceError: bar is not defined\n```\n\nvariables defined with var keyword are not block scoped\n\n``` js\nfunction foo() {\n  if (true) {\n    var bar = 'hello';\n  }\n  console.log(bar);\n}\nfoo(); // prints hello\n```\n\n- Variables declared with var keyword are hoisted.\n\n```js\nfunction foo() {\n  if (false) {\n    var bar = 'hello';\n  }\n  console.log(bar);\n}\nfoo(); // prints undefined\n```\n\nThe variable bar defined inside if block is visible to the outside block but within the function fooâ€™s scope. This is because the JavaScript engine read the above code as following:\n\n```js\nfunction foo() {\n  var bar; // hoisted the declaration but not assignment\n  if (false) {\n    bar = 'hello';\n  }\n  console.log(bar); // undefined but no reference error\n}\nfoo(); // prints undefined\n```\n\n- Variables defined with var keywords can be redeclared in the same scope\n\n``` js\nfunction foo() {\n var bar = 'hello';\n if (true) {\n   var bar = 'hi'; // no error !! replaced easily\n }\n console.log(bar);\n}\nfoo(); // prints hi\n```\n\n## let & const \n\n- Variables declared with `let` & `const` keyword are visible only inside the **block** in which itâ€™s defined.\n\n```js\nfunction foo () {\n  if(true) {\n    const baz = 'hi';\n    let bar = 'hello';\n    console.log(baz, bar); // prints hello hi\n  }\n  console.log(baz, bar); // ReferenceError: baz is not defined\n}\nfoo();\n```\n\n- Variables declared with `let` & `const` keyword are **not** subjected to hoisting.\n\n```js\nfunction foo () {\n  console.log(bar); // ReferenceError: bar is not defined\n  let bar = 'hello';\n}\nfoo();\n```\n\n- Variables defined with `let` & `const` keywords **cannot** be redeclared in the same block scope.\n\n``` js\nfunction foo () {\n  let bar = 'hello';\n  const bar = 'hi';\n}\nfoo(); // SyntaxError: Identifier 'bar' has already been declared\n```\n\nBut a variable can be redeclared in function scope, given its declared within a **different** block scope.\n\n``` js\nfunction foo () {\n  let bar = 'hello';\n  if(true) {\n    let bar = 'hi';\n    console.log(bar); // prints hi\n  }\n  console.log(bar); // prints hello \n}\n```\n\n## Able to explain dead zone concept for [let]\n\n[stackoverflow](https://stackoverflow.com/questions/33198849/what-is-the-temporal-dead-zone)\n\naccessing let and const values before they are initialized can cause a ReferenceError because of something called the temporal dead zone.\n\n```js\nconsole.log(aVar); // undefined\nconsole.log(aLet); // causes ReferenceError: aLet is not defined\nvar aVar = 1;\nlet aLet = 2;\n```\n\n> It appears from these examples that `let` declarations (and `const`, which works the same way) may not be hoisted, since `aLet` does not appear to exist before it is assigned a value.\n\n> That is not the case, howeverâ€”`let` and `const` are **hoisted** (like `var`, `class` and `function`), but there is a period between entering scope and being declared where they cannot be accessed. This period is the **temporal dead zone** (TDZ).\n\n> The TDZ ends when `aLet` is declared, rather than assigned:\n\n``` js\nlet and const have two broad differences from var:\n\nThey are block scoped.\nAccessing a var before it is declared has the result undefined; accessing a let or const before it is declared throws ReferenceError:\nconsole.log(aVar); // undefined\nconsole.log(aLet); // causes ReferenceError: aLet is not defined\nvar aVar = 1;\nlet aLet = 2;\n Run code snippetExpand snippet\nIt appears from these examples that let declarations (and const, which works the same way) may not be hoisted, since aLet does not appear to exist before it is assigned a value.\n\nThat is not the case, howeverâ€”let and const are hoisted (like var, class and function), but there is a period between entering scope and being declared where they cannot be accessed. This period is the temporal dead zone (TDZ).\n\nThe TDZ ends when aLet is declared, rather than assigned:\n\n//console.log(aLet)  // would throw ReferenceError\n\nlet aLet;\nconsole.log(aLet); // undefined\naLet = 10;\nconsole.log(aLet); // 10\n```\n\nThis example shows that `let` is hoisted:\n\n``` js\nlet x = 'outer value';\n(function() {\n  // start TDZ for x\n  console.log(x);\n  let x = 'inner value'; // declaration ends TDZ for x\n}());\n```\n\nAccessing `x` in the inner scope still causes a `ReferenceError`. If `let` were not hoisted, it would log `outer value`.\n\nThe TDZ is a good thing because it helps to highlight bugsâ€”accessing a value before it has been declared is rarely intentional.\n\n[ES6 ç³»åˆ—ä¹‹ let å’Œ const](https://juejin.im/post/5b0238f66fb9a07aca7a74ba)","tags":["js"]},{"title":"js Arrays","url":"/2019/05/10/js/js-Arrays/","content":"\n## Array literals\n\narray literal notation is where you define a new array using just empty brackets.`var myArray = [];`\n\nIt is the \"new\" way of defining arrays, and I suppose it is shorter/cleaner.\n\nThe examples below explain the difference between them:\n\n``` js\nvar a = [],            // these are the same\nb = new Array(),   // a and b are arrays with length 0\n\nc = ['foo', 'bar'],           // these are the same\nd = new Array('foo', 'bar'),  // c and d are arrays with 2 strings\n\n// these are different:\ne = [3],             // e.length == 1, e[0] == 3\nf = new Array(3);   // f.length == 3, f[0] == undefined\n```\n\n## Methods\n\n- forEach\n- map\n- push // add to the end\n- unshift // add to the front\n- pop // remove from the end\n- shift // remove from the front\n- splice // remove\n- slice // sub array\n\n## [Array.length](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/length)\n\n### how Array length property works\n\n- Reading the length\n\n1) For a dense array, this means that the length corresponds strictly to the number of elements:\n\n``` js\nvar fruits = ['orange', 'apple', 'banana']; //fruits is a dense array  \nfruits.length // prints 3, the real count of elements\n\nfruits.push('mango');  \nfruits.length // prints 4, one element was added\n\nvar empty = [];  \nempty.length // prints 0, empty array  \n```\n\nThe dense array does not have empties and the number of items corresponds to highestIndex + 1. In [3, 5, 7, 8] the highest index is 3 of element 8, thus the array size is 3 + 1 = 4.\n\n2) In a sparse array (which has empties), the number of elements does not correspond to length value, but still is determined by the highest index:\n\n``` js\nvar animals = ['cat', 'dog', , 'monkey']; // animals is sparse  \nanimals.length // prints 4, but real number of elements is 3\n\nvar words = ['hello'];  \nwords[6] = 'welcome'; //the highest index is 6. words is sparse  \nwords.length //prints 7, based on highest index \n```\n\n- Modifying the length\n\n1) Modifying the property leads to cut the elements (if the new value is smaller than the highest index):\n\n``` js\nvar numbers = [1, 3, 5, 7, 8];\n\nnumbers.length = 3; // modify the array length  \nnumbers // prints [1, 3, 5], elements 7 and 8 are removed\n```\n\n2) or creating a sparse array (if the new value is bigger than the highest index):\n\n``` js\nvar osTypes = ['OS X', 'Linux', 'Windows'];\n\nosTypes.length = 5; // creating a sparse array. Elements at indexes 3 and 4  \n                    // do not exist\n\nosTypes // prints ['OS X', 'Linux', 'Windows', , , ] \n```","tags":["js","array"]},{"title":"flexbox","url":"/2019/05/09/css/flexbox/","content":"\n### Parent Element (Container)\n\nThe flex container becomes flexible by setting the display property to flex:\n\n``` css\n.flex-container {\n  display: flex;\n}\n```\n\nThe flex container properties are:\n\n- flex-direction\n  - row\n  - row-reverse\n  - column\n  - column-reverse\n- flex-wrap\n  - nowrap\n  - wrap\n  - wrap-reverse\n\n![](https://raw.githubusercontent.com/alex6liu/blog-images/master/html%26css/flex-wrap.png)\n\n- flex-flow\n\nThe flex-flow property is a shorthand property for: flex-direction, flex-wrap\n\n- order\n\nThe order CSS property sets the order to lay out an item in a flex or grid container. Items in a container are sorted by ascending order value and then by their source code order.\n\n- justify-content\n- align-items\n- align-content\n\n\n","tags":["CSS"]},{"title":"positioning","url":"/2019/05/09/css/positioning/","content":"\n## [Document flow](https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Normal_Flow)\n\nBy default, a block level element's content is 100% of the width of its parent element, and as tall as its content. Inline elements are as tall as their content, and as wide as their content. You can't set width or height on inline elements â€” they just sit inside the content of block level elements. If you want to control the size of an inline element in this manner, you need to set it to behave like a block level element with display: block; (or even,display: inline-block; which mixes characteristics from both.)\n\n## [Position properties](https://www.w3schools.com/css/css_positioning.asp)\n\n- static\n- relative\n- fixed\n- absolute\n- sticky\n\n## Overflow\n\n- visible - Default. The overflow is not clipped. The content renders outside the element's box\n- hidden - The overflow is clipped, and the rest of the content will be invisible\n- scroll - The overflow is clipped, and a scrollbar is added to see the rest of the content\n- auto - Similar to scroll, but it adds scrollbars only when necessary\n\n## z-index\n\nThe z-index property specifies the stack order of an element.\n\nAn element with greater stack order is always in front of an element with a lower stack order.\n\n**Note**: z-index only works on positioned elements (position: absolute, position: relative, position: fixed, or position: sticky).","tags":["CSS"]},{"title":"web typography","url":"/2019/05/09/css/web-typography/","content":"\n## [web safe fonts](https://www.w3schools.com/cssref/css_websafe_fonts.asp)\n\nThe font-family property should hold several font names as a \"fallback\" system, to ensure maximum compatibility between browsers/operating systems. If the browser does not support the first font, it tries the next font.\n\nStart with the font you want, and end with a generic family, to let the browser pick a similar font in the generic family, if no other fonts are available:\n\n``` css\np {\n  font-family: \"Times New Roman\", Times, serif;\n}\n```\n\n## [custom web fonts](https://stackoverflow.com/questions/12144000/using-custom-fonts-using-css)\n\nGenerically, you can use a custom font using @font-face in your CSS. Here's a very basic example:\n\n``` css\n@font-face {\n    font-family: 'YourFontName'; /*a name to be used later*/\n    src: url('http://domain.com/fonts/font.ttf'); /*URL to font*/\n}\n```\n\nThen, trivially, to use the font on a specific element:\n\n``` css\n.classname {\n    font-family: 'YourFontName';\n}\n```\n\n## font formats\n\n- TrueType Fonts (TTF)\n\nTrueType is a font standard developed in the late 1980s, by Apple and Microsoft. TrueType is the most common font format for both the Mac OS and Microsoft Windows operating systems.\n\n- OpenType Fonts (OTF)\n\nOpenType is a format for scalable computer fonts. It was built on TrueType, and is a registered trademark of Microsoft. OpenType fonts are used commonly today on the major computer platforms.\n\n- The Web Open Font Format (WOFF)\n\nWOFF is a font format for use in web pages. It was developed in 2009, and is now a W3C Recommendation. WOFF is essentially OpenType or TrueType with compression and additional metadata. The goal is to support font distribution from a server to a client over a network with bandwidth constraints.\n\n- The Web Open Font Format (WOFF 2.0)\n\nTrueType/OpenType font that provides better compression than WOFF 1.0.\n\n- SVG Fonts/Shapes\n\nSVG fonts allow SVG to be used as glyphs when displaying text. The SVG 1.1 specification define a font module that allows the creation of fonts within an SVG document. You can also apply CSS to SVG documents, and the @font-face rule can be applied to text in SVG documents.\n\n- Embedded OpenType Fonts (EOT)\n\nEOT fonts are a compact form of OpenType fonts designed by Microsoft for use as embedded fonts on web pages.\n\n## icon fonts\n\nIcon fonts are fonts that contain symbols and glyphs instead of letters or numbers. \n\n## [font-face](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face)\n\n","tags":["CSS"]},{"title":"visual effects","url":"/2019/05/09/css/visual-effects/","content":"\n## shadow\n\n### box-shadow\n\n### text-shadow\n\n## rounded corners\n\n- border-radius\n\n## [gradients](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Images/Using_CSS_gradients)\n\n- linear-gradients\n- radial-gradient\n\n## [filters](https://developer.mozilla.org/en-US/docs/Web/CSS/filter)","tags":["CSS"]},{"title":"Media queries","url":"/2019/05/09/css/Media-queries/","content":"\n[mdn](https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries)\n\n**Media queries** let you adapt your site or app depending on the presence or value of various device characteristics and parameters.\n\nThey are a key component of responsive design. For example, a media query can shrink the font size on small devices, increase the padding between paragraphs when a page is viewed in portrait mode, or bump up the size of buttons on touchscreens.\n\nIn CSS, use the `@media` at-rule to conditionally apply part of a style sheet based on the result of a media query. Use `@import` to conditionally apply an entire style sheet.\n\n## [Using media queries](https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries)\n\n``` css\n/* Set the background color of body to tan */\nbody {\n  background-color: tan;\n}\n\n/* On screens that are 992px or less, set the background color to blue */\n@media screen and (max-width: 992px) {\n  body {\n    background-color: blue;\n  }\n}\n\n/* On screens that are 600px or less, set the background color to olive */\n@media screen and (max-width: 600px) {\n  body {\n    background-color: olive;\n  }\n}\n```\n\n### Media types\n\n- all\nSuitable for all devices.\n- print\nIntended for paged material and documents viewed on a screen in print preview mode. (Please see paged media for information about formatting issues that are specific to these formats.)\n- screen\nIntended primarily for screens.\n- speech\nIntended for speech synthesizers.\n\n### Media features\n\nwidth, height and etc.\n\n### Logical operators\n\n- and\n- not\n- only\n- ,","tags":["CSS"]},{"title":"blend mode","url":"/2019/05/09/css/blend-mode/","content":"\n[mdn](https://developer.mozilla.org/en-US/docs/Web/CSS/blend-mode)\n\nThe `<blend-mode>` CSS data type describes how colors should appear when elements overlap. It is used in the background-blend-mode and mix-blend-mode properties.\n\nFor each pixel among the layers to which it is applied, a blend mode takes the colors of the foreground and the background, perfoms a calculation on them, and returns a new color value.\n\n","tags":["CSS"]},{"title":"animation and transition","url":"/2019/05/09/css/animation-and-transition/","content":"\n## animation\n\n[mdn](https://developer.mozilla.org/en-US/docs/Web/CSS/animation)\n\nThe animation shorthand CSS property applies an animation between styles. It is a shorthand for `animation-name`, `animation-duration`, `animation-timing-function`, `animation-delay`, `animation-iteration-count`, `animation-direction`, `animation-fill-mode`, and `animation-play-state`.\n\n## transition\n\n[mdn](https://developer.mozilla.org/en-US/docs/Web/CSS/transition)\n\nThe transition CSS property is a shorthand property for `transition-property`, `transition-duration`, `transition-timing-function`, and `transition-delay`.\n\n## @keyframes\n\nThe **@keyframes** CSS at-rule controls the intermediate steps in a CSS animation sequence by defining styles for keyframes (or waypoints) along the animation sequence. This gives more control over the intermediate steps of the animation sequence than transitions.\n\n``` css\n@keyframes slidein {\n  from {\n    margin-left: 100%;\n    width: 300%;\n  }\n\n  to {\n    margin-left: 0%;\n    width: 100%;\n  }\n}\n```\n\n## transformation\n\nThe **transform** CSS property lets you `rotate`, `scale`, `skew`, or `translate` an element. It modifies the coordinate space of the CSS visual formatting model.\n\n``` css\n/* Keyword values */\ntransform: none;\n\n/* Function values */\ntransform: matrix(1.0, 2.0, 3.0, 4.0, 5.0, 6.0);\ntransform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\ntransform: translate(12px, 50%);\ntransform: translate3d(12px, 50%, 3em);\ntransform: translateX(2em);\ntransform: translateY(3in);\ntransform: translateZ(2px);\ntransform: scale(2, 0.5);\ntransform: scale3d(2.5, 1.2, 0.3);\ntransform: scaleX(2);\ntransform: scaleY(0.5);\ntransform: scaleZ(0.3);\ntransform: rotate(0.5turn);\ntransform: rotate3d(1, 2.0, 3.0, 10deg);\ntransform: rotateX(10deg);\ntransform: rotateY(10deg);\ntransform: rotateZ(10deg);\ntransform: skew(30deg, 20deg);\ntransform: skewX(30deg);\ntransform: skewY(1.07rad);\ntransform: perspective(17px);\n\n/* Multiple function values */\ntransform: translateX(10px) rotate(10deg) translateY(5px);\n\n/* Global values */\ntransform: inherit;\ntransform: initial;\ntransform: unset;\n```\n\n","tags":["CSS"]},{"title":"The box model","url":"/2019/05/09/css/The-box-model/","content":"[mdn](https://developer.mozilla.org/en-US/docs/Learn/CSS/Introduction_to_CSS/Box_model)\n\n## box model\n\n![](https://raw.githubusercontent.com/alex6liu/blog-images/master/html%26css/box-model.png)\n\n## Types of CSS boxes\n\nThe type of box applied to an element is specified by the `display` property. There are many different values available for display, but in this article we will focus on the three most common ones; `block`, `inline`, and `inline-block`.","tags":["CSS"]},{"title":"CSS values and units","url":"/2019/05/09/css/CSS-values-and-units/","content":"\n[MDN](https://developer.mozilla.org/en-US/docs/Learn/CSS/Introduction_to_CSS/Values_and_units)\n\n- Numeric values: Length values for specifying e.g. element width, border thickness, or font size, and unitless integers for specifying e.g. relative line width or number of times to run an animation.\n- Percentages: Can also be used to specify size or length â€” relative to a parent container's width or height for example, or the default font-size. These are often to facilitate responsive design (e.g. creating \"liquid layouts\", which automatically adjust to fit on different screen sizes).\n- Colors: For specifying background colors, text colors, etc.\n- Functions: For specifying e.g. background images or background image gradients.\n\n**Pixels** (px) are referred to as **absolute units** because they will always be the same size regardless of any other related settings. Other absolute units are as follows:\n\n- q, mm, cm, in: Quarter millimeters, millimeters, centimeters, or inches.\n- pt, pc: Points (1/72 of an inch) or picas (12 points.)\n\nYou probably won't use any of these very often except pixels.\n\nThere are also **relative units**, which are relative to the current element's **font-siz**e or **viewport** size:\n\n- em: 1em is the same as the font-size of the current element. The default base font-size given to web pages by web browsers before CSS styling is applied is 16 pixels, which means the computed value of 1em is 16 pixels for an element by default. But beware â€” font sizes are inherited by elements from their parents, so if different font sizes have been set on parent elements, the pixel equivalent of an em can start to become complicated. Don't worry too much about this for now â€” we'll cover inheritance and font-sizing in more detail in later articles and modules. em are the most common relative unit you'll use in web development.\n- ex, ch: Respectively these are the height of a lower case x, and the width of the number 0. These are not as commonly used or well-supported as em.\n- rem: The rem (root em) works in exactly the same way as the em, except that it will always equal the size of the default base font-size; inherited font sizes will have no effect, so this sounds like a much better option than em, although rems don't work in older versions of Internet Explorer (see more about cross-browser support in Debugging CSS.)\n- vw, vh: Respectively these are 1/100th of the width of the viewport, and 1/100th of the height of the viewport. Again, these are not as widely supported as em.\n- %","tags":["CSS"]},{"title":"CSS selectors","url":"/2019/05/09/css/CSS-selectors/","content":"\n[MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors)\n\n## Simple selectors\n\n- Type selector\n  - Selects all elements that match the given node name.\n  - Syntax: eltname\n  - Example: input will match any <input> element.\n- Class selector\n  - Selects all elements that have the given class attribute.\n  - Syntax: .classname\n  - Example: .index will match any element that has a class of \"index\".\n- ID selector\n  - Selects an element based on the value of its id attribute. There should be only one element with a given ID in a document.\n  - Syntax: #idname\n  - Example: #toc will match the element that has the ID \"toc\".\n- Universal selector\n  - Selects all elements. Optionally, it may be restricted to a specific namespace or to all namespaces.\n  - Syntax: * ns|* *|*\n  - Example: * will match all the elements of the document.\n- Attribute selector\n  - Selects elements based on the value of the given attribute.\n  - Syntax: [attr] [attr=value] [attr~=value] [attr|=value] [attr^=value] [attr$=value] [attr*=value]\n  - Example: [autoplay] will match all elements that have the autoplay attribute set (to any value).\n\n## Combinators\n\n- Adjacent sibling combinator\n  - The + combinator selects adjacent siblings. This means that the second element directly follows the first, and both share the same parent.\n  - Syntax: A + B\n  - Example: h2 + p will match all <p> elements that directly follow an <h2>.\n- General sibling combinator\n  - The ~ combinator selects siblings. This means that the second element follows the first (though not necessarily immediately), and both share the same parent.\n  - Syntax: A ~ B\n  - Example: p ~ span will match all <span> elements that follow a <p>, immediately or not.\n- Child combinator\n  - The > combinator selects nodes that are direct children of the first element.\n  - Syntax: A > B\n  - Example: ul > li will match all <li> elements that are nested directly inside a <ul> element.\n- Descendant combinator\n  - The   (space) combinator selects nodes that are descendants of the first element.\n  - Syntax: A B\n  - Example: div span will match all <span> elements that are inside a <div> element.\n- Column combinator \n  - The || combinator selects nodes which belong to a column.\n  - Syntax: A || B\n  - Example: col || td will match all <td> elements that belong to the scope of the <col>.\n\n## Pseudo-classes\n\nPseudo-classes allow the selection of elements based on state information that is not contained in the document tree.\n\n- Example: a:visited will match all <a> elements that have been visited by the user.\n\n## Pseudo-elements\n\nPseudo-elements represent entities that are not included in HTML.\n\n- Example: p::first-line will match the first line of all <p> elements.\n","tags":["CSS"]},{"title":"Pseudo-classes and pseudo-elements","url":"/2019/05/09/css/Pseudo-classes-and-pseudo-elements/","content":"\n[MDN](https://developer.mozilla.org/en-US/docs/Learn/CSS/Introduction_to_CSS/Pseudo-classes_and_pseudo-elements)\n\n## Pseudo-classes\n\nA CSS **pseudo-class** is a keyword added to the end of a selector, preceded by a colon (:), which is used to specify that you want to style the selected element but only when it is in a certain state. For example, you might want to style a link element only when it is being hovered over by the mouse pointer, or a checkbox when it is disabled or checked, or an element that is the first child of its parent in the DOM tree.\n\n![](https://raw.githubusercontent.com/alex6liu/blog-images/master/html%26css/pseudo-classes.png)\n\n## Pseudo-elements\n\nPseudo-elements are very much like pseudo-classes, but they have differences. They are keywords, this time preceded by two colons (::), that can be added to the end of selectors to select a certain part of an element.\n\n- ::after\n- ::before\n- ::first-letter\n- ::first-line\n- ::selection\n- ::backdrop","tags":["CSS"]},{"title":"HTML table form input","url":"/2019/05/09/html/HTML-table-form-input/","content":"\n## Table layout tags\n\n[mdn](https://developer.mozilla.org/en-US/docs/Web/CSS/table-layout)\n\n- Use the HTML `<table>` element to define a table\n- Use the HTML `<tr>` element to define a table row\n- Use the HTML `<td>` element to define a table data\n- Use the HTML `<th>` element to define a table heading\n- Use the HTML `<caption>` element to define a table caption\n- Use the CSS `border` property to define a border\n- Use the CSS `border-collapse` property to collapse cell borders\n- Use the CSS `padding` property to add padding to cells\n- Use the CSS `text-align` property to align cell text\n- Use the CSS `border-spacing` property to set the spacing between cells\n- Use the `colspan` attribute to make a cell span many columns\n- Use the `rowspan` attribute to make a cell span many rows\n- Use the `id` attribute to uniquely define one table\n\n``` css\n/* Keyword values */\ntable-layout: auto;\ntable-layout: fixed;\n\n/* Global values */\ntable-layout: inherit;\ntable-layout: initial;\ntable-layout: unset;\n```\n\n## Table attributes\n\n- align\n- bgcolor\n- border\n- cellpadding\n- cellspacing\n\n## Form tags and attributes\n\nThe `<form>` tag is used to create an HTML form for user input.\n\nThe `<form>` element can contain one or more of the following form elements:\n\n- `<input>`\n- `<textarea>`\n- `<button>`\n- `<select>`\n- `<option>`\n- `<optgroup>`\n- `<fieldset>`\n- `<label>`\n- `<output>`\n\n![](https://raw.githubusercontent.com/alex6liu/blog-images/master/html%26css/form-attributes.png)\n\n## Input types\n\nThe available types are as follows:\n\n- button: A push button with no default behavior.\n- checkbox: A check box allowing single values to be selected/deselected.\n- color: **HTML5** A control for specifying a color. A color picker's UI has no required features other than accepting simple colors as text (more info).\n- date: **HTML5** A control for entering a date (year, month, and day, with no time).\n- datetime-local: **HTML5** A control for entering a date and time, with no time zone.\n- email: **HTML5** A field for editing an e-mail address.\n- file: A control that lets the user select a file. Use the accept attribute to define the types of files that the control can select.\n- hidden: A control that is not displayed but whose value is submitted to the server.\n- image: A graphical submit button. You must use the src attribute to define the source of the image and the alt attribute to define alternative text. You can use the height and width attributes to define the size of the image in pixels.\n- month: **HTML5** A control for entering a month and year, with no time zone.\n- number: **HTML5** A control for entering a number.\n- password: A single-line text field whose value is obscured. Use the maxlength and minlength attributes to specify the maximum length of the value that can be entered.\n- Note: Any forms involving sensitive information like passwords (e.g. login forms) should be served over HTTPS; Firefox now implements multiple mechanisms to warn against insecure login forms â€” see Insecure passwords. Other browsers are also implementing similar mechanisms.\n- radio: A radio button, allowing a single value to be selected out of multiple choices.\n- range: **HTML5** A control for entering a number whose exact value is not important.\n- reset: A button that resets the contents of the form to default values.\n- search: **HTML5** A single-line text field for entering search strings. Line-breaks are automatically removed from the input value.\n- submit: A button that submits the form.\n- tel: **HTML5** A control for entering a telephone number.\n- text: A single-line text field. Line-breaks are automatically removed from the input value.\n- time: **HTML5** A control for entering a time value with no time zone.\n- url: **HTML5** A field for entering a URL.\n- week: **HTML5** A control for entering a date consisting of a week-year number and a week number with no time zone.\n\nSome input types are now obsolete:\n\n- datetime: A control for entering a date and time (hour, minute, second, and fraction of a second) based on UTC time zone. This feature has been removed from WHATWG HTML.","tags":["HTML"]},{"title":"HTML DOM","url":"/2019/05/09/html/HTML-DOM/","content":"\n## The HTML DOM (Document Object Model)\n\nWhen a web page is loaded, the browser creates a Document Object Model of the page.\n\nThe HTML DOM model is constructed as a tree of Objects:\n\n![](https://raw.githubusercontent.com/alex6liu/blog-images/master/html%26css/htmltree.gif)\n\n## What is the HTML DOM?\n\nThe HTML DOM is a standard object model and programming interface for HTML. It defines:\n\n- The HTML elements as objects\n- The properties of all HTML elements\n- The methods to access all HTML elements\n- The events for all HTML elements\n\nIn other words: The HTML DOM is a standard for how to get, change, add, or delete HTML elements.","tags":["HTML"]},{"title":"Root HTML tags","url":"/2019/05/09/html/Root-HTML-tags/","content":"HTML Root Tags represent the main or the starting tag that should be present in all the HTML documents. The HTML tag is the first tag that comes after the <!DOCTYPE> tag and within which other HTML tags are specified. This tag allows the browser to identify the document type.\n\n## Definition and Usage\n\nThe `<html>` tag tells the browser that this is an HTML document.\n\nThe `<html>` tag represents the root of an HTML document.\n\nThe `<html>` tag is the container for all other HTML elements (except for the `<!DOCTYPE>` tag).","tags":["HTML"]},{"title":"Understanding external, internal, and inline CSS styles","url":"/2019/05/09/css/Understanding-external-internal-and-inline-CSS-styles/","content":"\nCascading Style Sheets (CSS) are files with styling rules that govern how your website is presented on screen. CSS rules can be applied to your websiteâ€™s HTML files in various ways. You can use an **external stylesheet**, an **internal stylesheet**, or an **inline style**. Each method has advantages that suit particular uses.\n\nAn **external stylesheet** is a standalone .css file that is linked from a web page. The advantage of external stylesheets is that it can be created once and the rules applied to multiple web pages. Should you need to make widespread changes to your site design, you can make a single change in the stylesheet and it will be applied to all linked pages, saving time and effort.\n\nAn **internal stylesheet** holds CSS rules for the page in the **head** section of the HTML file. The rules only apply to that page, but you can configure CSS classes and IDs that can be used to style multiple elements in the page code. Again, a single change to the CSS rule will apply to all tagged elements on the page.\n\n**Inline styles** relate to a specific HTML tag, using a **style** attribute with a CSS rule to style a specific page element. Theyâ€™re useful for quick, permanent changes, but are less flexible than external and internal stylesheets as each inline style you create must be separately edited should you decide to make a design change.\n\n## Using external CSS stylesheets\n\nAn HTML page styled by an external CSS stylesheet must reference the .css file in the document head. Once created, the CSS file must be uploaded to your server and linked in the HTML file with code such as:\n\n``` html\n<link href=\"style.css\" rel=\"stylesheet\" type=\"text/css\">\n```\n\n## Using internal CSS stylesheets\n\nRather than linking an external .css file, HTML files using an internal stylesheet include a set of rules in their **head** section. CSS rules are wrapped in `<style>` tags, like this:\n\n``` html\n<head>\n<style type=\"text/css\">\n\n    h1 {\n            color:#fff\n            margin-left: 20px;\n       }\n\n    p {\n        font-family: Arial, Helvetica, Sans Serif;     \n       }\n\n\n</style>\n</head>\n```\n\nYou can name your stylesheet whatever you wish, but it should have a .css file extension.\n\n## Using inline styles\nInline styles are applied directly to an element in your HTML code. They use the **style** attribute, followed by regular CSS properties.\n\nFor example:\n\n``` html\n<h1 style=\"color:red;margin-left:20px;\">Todayâ€™s Update</h1>\n```","tags":["CSS"]},{"title":"HTML meta tags","url":"/2019/05/09/html/HTML-meta-tags/","content":"\n## Definition and Usage\n\nMetadata is data (information) about data.\n\nThe `<meta>` tag provides metadata about the HTML document. Metadata will not be displayed on the page, but will be machine parsable.\n\nMeta elements are typically used to specify page description, keywords, author of the document, last modified, and other metadata.\n\nThe metadata can be used by browsers (how to display content or reload page), search engines (keywords), or other web services.\n\nHTML5 introduced a method to let web designers take control over the viewport (the user's visible area of a web page), through the `<meta>` tag (See \"Setting The Viewport\" example below).\n\n## Tips and Notes\n\n**Note**: `<meta>` tags always go inside the `<head>` element.\n\n**Note**: Metadata is always passed as name/value pairs.\n\n**Note**: The content attribute MUST be defined if the name or the http-equiv attribute is defined. If none of these are defined, the content attribute CANNOT be defined.\n\n## Differences Between HTML 4.01 and HTML5\n\nThe scheme attribute is not supported in HTML5.\n\nHTML5 has a new attribute, charset, which makes it easier to define charset:\n\n- HTML 4.01: `<meta http-equiv=\"content-type\" content=\"text/html; charset=UTF-8\">`\n- HTML5: `<meta charset=\"UTF-8\">`\n\n## Examples\n\nExample 1 - Define keywords for search engines:\n\n``` html\n<meta name=\"keywords\" content=\"HTML, CSS, XML, XHTML, JavaScript\">\n```\n\nExample 2 - Define a description of your web page:\n\n``` html\n<meta name=\"description\" content=\"Free Web tutorials on HTML and CSS\">\n```\n\nExample 3 - Define the author of a page:\n\n``` html\n<meta name=\"author\" content=\"John Doe\">\n```\n\nExample 4 - Refresh document every 30 seconds:\n\n``` html\n<meta http-equiv=\"refresh\" content=\"30\">\n```\n\nExample 5 - Setting the viewport to make your website look good on all devices:\n\n``` html\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n```\n\n## Attributes\n\n![](https://raw.githubusercontent.com/alex6liu/blog-images/master/html%26css/meta.png)\n\n## Viewport \n\n[Using the viewport meta tag to control layout on mobile browsers](https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag)\n\n### What is The Viewport?\nThe viewport is the user's visible area of a web page.\n\nThe viewport varies with the device, and will be smaller on a mobile phone than on a computer screen.\n\nBefore tablets and mobile phones, web pages were designed only for computer screens, and it was common for web pages to have a static design and a fixed size.\n\nThen, when we started surfing the internet using tablets and mobile phones, fixed size web pages were too large to fit the viewport. To fix this, browsers on those devices scaled down the entire web page to fit the screen.\n\n### Setting The Viewport\n\nHTML5 introduced a method to let web designers take control over the viewport, through the `<meta>` tag.\n\nYou should include the following `<meta>` viewport element in all your web pages:\n\n``` html\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n```\n\nA `<meta>` viewport element gives the browser instructions on how to control the page's dimensions and scaling.\n\nThe width=device-width part sets the width of the page to follow the screen-width of the device (which will vary depending on the device).\n\nThe initial-scale=1.0 part sets the initial zoom level when the page is first loaded by the browser.\n\n### Size Content to The Viewport\n\nUsers are used to scroll websites vertically on both desktop and mobile devices - but not horizontally!\n\nSo, if the user is forced to scroll horizontally, or zoom out, to see the whole web page it results in a poor user experience.\n\nSome additional rules to follow:\n\n1. Do NOT use large fixed width elements - For example, if an image is displayed at a width wider than the viewport it can cause the viewport to scroll horizontally. Remember to adjust this content to fit within the width of the viewport.\n\n2. Do NOT let the content rely on a particular viewport width to render well - Since screen dimensions and width in CSS pixels vary widely between devices, content should not rely on a particular viewport width to render well.\n\n3. Use CSS media queries to apply different styling for small and large screens - Setting large absolute CSS widths for page elements will cause the element to be too wide for the viewport on a smaller device. Instead, consider using relative width values, such as width: 100%. Also, be careful of using large absolute positioning values. It may cause the element to fall outside the viewport on small devices.","tags":["HTML"]},{"title":"HTML Layout","url":"/2019/05/09/html/HTML-Layout/","content":"\n## HTML5 offers new semantic elements that define the different parts of a web page:\n\nHTML5 Semantic Elements\t\n\n- `<header>` - Defines a header for a document or a section\n- `<nav>` - Defines a container for navigation links\n- `<section>` - Defines a section in a document\n- `<article>` - Defines an independent self-contained article\n- `<aside>` - Defines content aside from the content (like a sidebar)\n- `<footer>` - Defines a footer for a document or a section\n- `<details>` - Defines additional details\n- `<summary>` - Defines a heading for the `<details>` element\n\n![](https://raw.githubusercontent.com/alex6liu/blog-images/master/html%26css/html_layout.gif)\n\n## HTML Layout Techniques\n\nThere are five different ways to create multicolumn layouts. Each way has its pros and cons:\n\n- HTML tables (not recommended)\n- CSS float property\n- CSS flexbox\n- CSS framework\n- CSS grid","tags":["HTML"]},{"title":"browser modes","url":"/2019/05/08/html/browser-modes/","content":"\n# æµè§ˆå™¨æ¨¡å¼\n\né¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¹ˆå¤šæ¨¡å¼ã€‚å…¶å®è¿™æ˜¯ä¸ªå†å²é—ç•™é—®é¢˜ï¼Œåœ¨æµè§ˆå™¨å¤§æˆ˜æ—¶æœŸï¼Œç½‘æ™¯æµè§ˆå™¨ï¼ˆNetscape Navigatorï¼‰å’Œå¾®è½¯çš„IEæµè§ˆå™¨ï¼ˆMicrosoft Internet Explorerï¼‰å¯¹ç½‘é¡µåˆ†åˆ«æœ‰ä¸åŒçš„å®ç°æ–¹å¼ï¼Œé‚£ä¸ªæ—¶å€™çš„ç½‘é¡µè¦é’ˆå¯¹è¿™ä¸¤ç§æµè§ˆå™¨åˆ†åˆ«å¼€å‘ä¸åŒçš„ç‰ˆæœ¬ã€‚è€Œåˆ°äº†W3Cåˆ¶å®šæ ‡å‡†ä¹‹åï¼Œè¿™äº›æµè§ˆå™¨å°±ä¸èƒ½ç»§ç»­ä½¿ç”¨è¿™ç§é¡µé¢äº†ï¼Œå› è€Œä¼šå¯¼è‡´å¤§éƒ¨åˆ†ç°æœ‰ç«™ç‚¹éƒ½ä¸èƒ½ä½¿ç”¨ã€‚åŸºäºè¿™ä¸ªåŸå› ï¼Œæµè§ˆå™¨æ‰å¼•å…¥ä¸¤ç§æ¨¡å¼æ¥å¤„ç†ä¸€äº›é—ç•™çš„ç«™ç‚¹ã€‚\n\n__ç°åœ¨çš„æµè§ˆå™¨æ’ç‰ˆå¼•æ“æ”¯æŒä¸‰ç§æ¨¡å¼ï¼š__\n\n1. æ€ªå¼‚ï¼ˆQuirksï¼‰æ¨¡å¼ï¼šåœ¨æ€ªå¼‚æ¨¡å¼ä¸­ï¼Œæ’ç‰ˆå¼•æ“ä¼šæ¨¡æ‹Ÿ ç½‘æ™¯4å’ŒWindowsä¸­çš„IE5çš„è¡Œä¸ºã€‚\n2. å‡†æ ‡å‡†ï¼ˆAlmost Standardsï¼‰ï¼šåœ¨å‡†æ ‡å‡†æ¨¡å¼ä¸­ï¼Œåˆ™åªåŒ…å«å¾ˆå°‘çš„ä¸€éƒ¨åˆ†æ€ªå¼‚æ¨¡å¼ä¸­çš„è¡Œä¸ºã€‚\n3. æ ‡å‡†ï¼ˆStandardsï¼‰æ¨¡å¼ï¼šåœ¨å®Œå…¨æ ‡å‡†çš„æ¨¡å¼ä¸­ï¼Œä¼šå°½é‡æ‰§è¡ŒHTMLå’ŒCSSè§„èŒƒæ‰€æŒ‡å®šçš„è¡Œä¸ºã€‚\n\n__å„ä¸»æµæµè§ˆå™¨å¯¹ä¸‰ç§æ¨¡å¼çš„æè¯‰ï¼š__\n\n- FireFoxï¼š[Mozilla's DOCTYPE sniffing](https://developer.mozilla.org/en-US/docs/Mozilla's_DOCTYPE_sniffing)\n- Operaï¼š[DOCTYPE Switches support in Opera](http://www.opera.com/docs/specs/doctype/)\n- IEï¼š[Defining document compatibility](http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85\\).aspx) ([ä¸­æ–‡](http://msdn.microsoft.com/zh-cn/library/cc288325(v=vs.85\\).aspx))\n\n------\n\n## æ¨¡å¼è¯¦è§£\n\n### å†…å®¹ç±»å‹ä¸ºtext/htmlçš„æ¨¡å¼\n\n1. æ€ªå¼‚æ¨¡å¼ï¼ˆQuirks Modeï¼‰\n    * æ€ªå¼‚æ¨¡å¼ä¸­ï¼Œä¸ºäº†é¿å…â€œç ´åâ€é‚£äº›æ ¹æ®åœ¨20ä¸–çºª90å¹´ä»£æœ«æµè¡Œçš„å®è·µåˆ›ä½œçš„é¡µé¢ï¼Œæµè§ˆå™¨è¿åäº†ç°ä»£çš„Webæ ¼å¼è§„èŒƒã€‚<br>\nä¸åŒçš„æµè§ˆå™¨å®ç°äº†ä¸åŒçš„æ€ªå¼‚è¡Œä¸ºã€‚Internet Explorer6ã€7å’Œ8ä¸­ï¼Œæ€ªå¼‚æ¨¡å¼æœ‰æ•ˆåœ°å†»ç»“åœ¨IE5.5 ã€‚å…¶ä»–æµè§ˆå™¨ä¸­ï¼Œæ€ªå¼‚æ¨¡å¼æ˜¯å¯¹å‡†æ ‡å‡†æ¨¡å¼çš„å°‘é‡åç§»ã€‚<br>\n__å¦‚æœæ­£åœ¨åˆ›ä½œæ–°ç½‘é¡µï¼Œä½ åº”è¯¥ç¬¦åˆç›¸å…³çš„è§„èŒƒï¼ˆç‰¹åˆ«æ˜¯CSS2.1ï¼‰ä¸”ä½¿ç”¨æ ‡å‡†æ¨¡å¼ã€‚__\n\n2. æ ‡å‡†æ¨¡å¼ï¼ˆStandards Modeï¼‰\n    * æ ‡å‡†æ¨¡å¼ä¸­ï¼Œæµè§ˆå™¨å°è¯•ç»™ç¬¦åˆæ ‡å‡†çš„æ–‡æ¡£åœ¨è§„èŒƒä¸Šçš„æ­£ç¡®å¤„ç†è¾¾åˆ°åœ¨æŒ‡å®šæµè§ˆå™¨ä¸­çš„ç¨‹åº¦ã€‚<br>\nä¸åŒçš„æµè§ˆå™¨éµå¾ªä¸åŒçš„é˜¶æ®µï¼Œæ‰€ä»¥æ ‡å‡†æ¨¡å¼ä¹Ÿä¸æ˜¯ä¸€ä¸ªå•ä¸€ç›®æ ‡ã€‚<br>\nHTML5æŠŠè¿™ç§æ¨¡å¼å«â€œéæ€ªå¼‚æ¨¡å¼ï¼ˆno quirks modeï¼‰â€\n\n3. å‡†æ ‡å‡†æ¨¡å¼ï¼ˆAlmost Standards Modeï¼‰\n    * Firefoxã€Safariã€Chromeã€Opera(ä»7.5å¼€å§‹)å’ŒIE8ä¹Ÿæœ‰ä¸ªå«â€œå‡†æ ‡å‡†æ¨¡å¼â€çš„æ¨¡å¼ï¼Œå®ƒæŒ‰ç…§ä¼ ç»Ÿçš„åšæ³•æ¥å®ç°è¡¨æ ¼å•å…ƒæ ¼çš„å‚ç›´å°ºå¯¸è€Œä¸æ˜¯ä¸¥æ ¼çš„éµç…§CSS2è§„èŒƒã€‚<br>\nMac IE5ã€Windows IE6å’Œ7ã€Opera7.5ä»¥å‰ç‰ˆæœ¬å’ŒKonqueroræ— éœ€å‡†æ ‡å‡†æ¨¡å¼ï¼Œå› ä¸ºå®ƒä»¬è‡³å°‘æ²¡æœ‰åœ¨å„è‡ªçš„æ ‡å‡†æ¨¡å¼ä¸‹ä¸¥æ ¼éµå¾ªCSS2è§„èŒƒæ¥å®ç°è¡¨æ ¼å•å…ƒæ ¼å‚ç›´å°ºå¯¸ã€‚å®é™…ä¸Šï¼Œå®ƒä»¬çš„æ ‡å‡†æ¨¡å¼æ›´æ¥è¿‘Mozillaçš„å‡†æ ‡å‡†æ¨¡å¼è€Œä¸æ˜¯Mozillaçš„æ ‡å‡†æ¨¡å¼ã€‚<br>\nHTML5æŠŠè¿™ç§æ¨¡å¼å«ç€â€œå—é™æ€ªå¼‚æ¨¡å¼(limited quirks mode)â€ã€‚\n\n\n### å†…å®¹ç±»å‹ä¸ºapplication/xhtml+xmlçš„æ¨¡å¼ï¼ˆXMLæ¨¡å¼ï¼‰\n\n- Firefoxã€Safariã€Chromeå’ŒOperaä¸­ï¼Œapplication/xhtml+xml HTTPå†…å®¹ç±»å‹ï¼ˆä¸æ˜¯metaå…ƒç´ ä¹Ÿä¸æ˜¯doctype!ï¼‰ä¼šè§¦å‘XMLæ¨¡å¼ã€‚<br>\nåœ¨XMLæ¨¡å¼ä¸­ï¼Œæµè§ˆå™¨å°è¯•ç»™XMLæ–‡æ¡£åœ¨è§„èŒƒä¸Šçš„æ­£ç¡®å¤„ç†è¾¾åˆ°åœ¨åˆ¶å®šæµè§ˆå™¨ä¸­çš„ç¨‹åº¦ã€‚\n\n- IE6ã€7å’Œ8ä¸æ”¯æŒapplication/xhtml+xmlï¼ŒMac IE5ä¹Ÿå¦‚æ­¤ã€‚\n\n\n### éWebæ¨¡å¼ï¼ˆNon-Web Modesï¼‰\n\næŸäº›å¼•æ“æ‹¥æœ‰çš„æ¨¡å¼ä¸Webå†…å®¹æ— å…³ã€‚<br>\nä¾‹å¦‚ï¼šOperaæœ‰ä¸ªWML2.0æ¨¡å¼ã€‚Leopardä¸Šçš„WebKitæœ‰ä¸ªç”¨äºæ—§å¼Dashboard widgetsçš„ç‰¹å®šæ¨¡å¼ã€‚\n\n\n## æ¨¡å¼çš„å½±å“\n\n### å¸ƒå±€\n\n1. text/htmlçš„æ¨¡å¼ä¸»è¦æ˜¯å½±å“CSSå¸ƒå±€ã€‚ä¾‹å¦‚ï¼š\n    * æ€ªå¼‚æ¨¡å¼ä¸‹è¡¨æ ¼ä¸ç»§æ‰¿æ ·å¼ã€‚\n    * åœ¨æŸäº›æµè§ˆå™¨çš„æ€ªå¼‚æ¨¡å¼ä¸‹ï¼Œç›’æ¨¡å‹ï¼ˆbox modelï¼‰å˜æˆIE5.5çš„ç›’æ¨¡å‹ã€‚\n    * åœ¨IEçš„æ€ªå¼‚æ¨¡å¼ä¸­ï¼Œå…ƒç´ çš„widthåŒ…å«äº†paddingå’Œborderï¼Œè€Œæ ‡å‡†æ¨¡å¼ä¸­paddingå’Œborder å¹¶ä¸å±äºå®½åº¦çš„ä¸€éƒ¨åˆ†ã€‚\n    * [æœ€åˆçš„å‡†æ ‡å‡†æ¨¡å¼](http://meyerweb.com/eric/thoughts/2008/01/24/almost-target/)åªä¼š[å½±å“è¡¨æ ¼ä¸­çš„å›¾åƒ](https://developer.mozilla.org/en-US/docs/Images,_Tables,_and_Mysterious_Gaps)ï¼ˆåŒ…å«å›¾ç‰‡çš„è¡¨æ ¼å•å…ƒæ ¼çš„é«˜å’Œæ ‡å‡†æ¨¡å¼ä¸­ä¸åŒï¼‰ï¼Œè€Œåæ¥å„ä¸ªæµè§ˆå™¨åˆæˆ–å¤šæˆ–å°‘åœ°è¿›è¡Œäº†ä¿®æ”¹ã€‚\n2. XMLæ¨¡å¼ä¸­ï¼Œé€‰æ‹©å™¨æœ‰ä¸åŒçš„åŒºåˆ†å¤§å°å†™è¡Œä¸ºã€‚æ­¤å¤–ï¼Œç”¨äºHTML bodyå…ƒç´ çš„ç‰¹æœ‰è§„åˆ™ä¸èƒ½åº”ç”¨åœ¨é‚£äº›æ²¡æœ‰å®ç°æœ€æ–°CSS2.1æ”¹å˜çš„è¾ƒæ—§ç‰ˆæœ¬çš„æµè§ˆå™¨ã€‚\n\n### è§£æ\n\nä¹Ÿæœ‰ä¸€äº›æ€ªå¼‚å½±å“HTMLå’ŒCSSçš„è§£æä¸”ä¼šå¯¼è‡´ç¬¦åˆæ ‡å‡†çš„ç½‘é¡µè¢«é”™è¯¯è§£æã€‚äº†è§£æ€ªå¼‚æ¨¡å¼å’Œæ ‡å‡†æ¨¡å¼åœ¨CSSå¸ƒå±€å’Œè§£æï¼ˆéHTMLè§£æï¼‰ä¸Šçš„ä¸»è¦å¼‚åŒæ˜¯éå¸¸é‡è¦çš„ã€‚\n\nä¸€äº›äººé”™è¯¯åœ°æŠŠæ ‡å‡†æ¨¡å¼ç§°ä¸ºâ€œä¸¥æ ¼è§£ææ¨¡å¼ï¼ˆstrict parsing modeï¼‰â€ï¼Œå…¶è®©äººè¯¯è§£äº†æµè§ˆå™¨å¼ºåˆ¶æ‰§è¡ŒHTMLè¯­æ³•è§„åˆ™å’Œç”¨æµè§ˆå™¨è¯„ä¼°æ ‡è®°çš„æ­£ç¡®æ€§ã€‚æƒ…å†µå¹¶éå¦‚æ­¤ã€‚å³ä½¿å½“æ ‡å‡†æ¨¡å¼å¸ƒå±€ç”Ÿæ•ˆæ—¶ï¼Œæµè§ˆå™¨ä¾æ—§ä¼šåš[tag soup](http://en.wikipedia.org/wiki/Tag_soup)ä¿®æ­£å·¥ä½œã€‚ï¼ˆåœ¨2000å¹´Netscape6å‘å¸ƒå‰ï¼ŒMozillaçš„ç¡®æœ‰ç”¨äºå¼ºåˆ¶æ‰§è¡ŒHTMLè¯­æ³•è§„åˆ™çš„è§£ææ¨¡å¼ã€‚è¿™äº›æ¨¡å¼å’Œç°æœ‰çš„Webå†…å®¹ä¸å…¼å®¹è€Œè¢«é—å¼ƒã€‚ï¼‰\n\nå¦ä¸€ä¸ªå¸¸è§çš„è¯¯è§£æ˜¯å…³äºXHTMLè§£æçš„ã€‚é€šå¸¸è®¤ä¸ºç”¨XHTML doctypeå¾—åˆ°ä¸åŒçš„è§£æã€‚å…¶å®å¹¶éå¦‚æ­¤ï¼Œå†…å®¹ç±»å‹æ˜¯text/htmlçš„XHTMLæ–‡æ¡£æ‰€ç”¨è§£æå™¨å’ŒHTMLæ–‡æ¡£çš„æ˜¯åŒä¸€ä¸ªã€‚ç›®å‰æµè§ˆå™¨åœ¨æ„çš„æ˜¯æ–‡æ¡£ç±»å‹ä¸ºtext/htmlçš„XHTMLä»…æ˜¯â€œtag soup with croutonsâ€ï¼ˆé¢å¤–çš„æ–œçº¿ï¼Œé—­åˆ\"/>\"ï¼‰ã€‚<br>\nä»…å½“ä½¿ç”¨XMLæ–‡æ¡£ç±»å‹çš„æ–‡æ¡£ï¼ˆä¾‹å¦‚ï¼šapplication/xhtml+xmlæˆ–xmapplication/ï¼‰ä¼šè§¦å‘XMLæ¨¡å¼æ¥è§£æï¼Œè¿™æ—¶çš„è§£æå™¨å®Œå…¨ä¸åŒäºHTMLè§£æå™¨ã€‚\n\n### è„šæœ¬\n\nè™½ç„¶æ€ªå¼‚æ¨¡å¼ä¸»è¦æ˜¯å…³äºCSSçš„ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›æ˜¯å…³äºè„šæœ¬çš„ã€‚ä¾‹å¦‚ï¼ŒFirefoxçš„æ€ªå¼‚æ¨¡å¼ä¸­ï¼ŒHTML id å±æ€§åƒåœ¨IEä¸€æ ·å»ºç«‹äº†å…¨å±€è„šæœ¬ä½œç”¨åŸŸçš„å¯¹è±¡å¼•ç”¨ã€‚IE8ä¸­å…³äºè„šæœ¬çš„å½±å“æ¯”å…¶ä»–æµè§ˆå™¨æ›´å€¼å¾—å…³æ³¨ã€‚\n\nXMLæ¨¡å¼ä¸­ï¼ŒæŸäº›DOM APIçš„è¡Œä¸ºå½»åº•ä¸åŒï¼Œå› ä¸ºXMLçš„DOM APIè¡Œä¸ºè¢«å®šä¹‰æ—¶ä¸å…¼å®¹HTMLçš„è¡Œä¸ºã€‚\n\n\n## IEçš„æ¨¡å¼\n\nIE8æœ‰4ç§æ¨¡å¼ï¼šIE5.5æ€ªå¼‚æ¨¡å¼ã€IE7æ ‡å‡†æ¨¡å¼ã€IE8å‡†æ ‡å‡†æ¨¡å¼å’ŒIE8æ ‡å‡†æ¨¡å¼ï¼Œ<br>\nè€ŒIE9æœ‰7ç§æ¨¡å¼ï¼šIE5.5æ€ªå¼‚æ¨¡å¼ã€IE7æ ‡å‡†æ¨¡å¼ã€IE8å‡†æ ‡å‡†æ¨¡å¼ã€IE8æ ‡å‡†æ¨¡å¼ã€IE9å‡†æ ‡å‡†æ¨¡å¼ã€IE9æ ‡å‡†æ¨¡å¼ã€XMLæ¨¡å¼ã€‚\n\n### IE9çš„æµè§ˆå™¨æ¨¡å¼å’Œæ–‡æ¡£æ¨¡å¼\n\nå¦‚æœä½ ä½¿ç”¨çš„æ˜¯IE9ï¼Œé‚£ä¹ˆæŒ‰ä¸‹F12é”®å°±ä¼šå‡ºç°å¼€å‘è€…å·¥å…·ï¼Œä¸Šé¢æœ‰ä¸¤ä¸ªä¸‹æ‹‰èœå•ï¼šæµè§ˆå™¨æ¨¡å¼å’Œæ–‡æ¡£æ¨¡å¼ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯æµè§ˆå™¨æ¨¡å¼ï¼Ÿä»€ä¹ˆåˆæ˜¯æ–‡æ¡£æ¨¡å¼ï¼ŸäºŒè€…æœ‰ä½•åŒºåˆ«ï¼Ÿ\n\n* æµè§ˆå™¨æ¨¡å¼ç”¨äºåˆ‡æ¢IEé’ˆå¯¹è¯¥ç½‘é¡µçš„é»˜è®¤æ–‡æ¡£æ¨¡å¼ã€å¯¹ä¸åŒç‰ˆæœ¬æµè§ˆå™¨çš„æ¡ä»¶æ³¨é‡Šè§£æã€ä»¥åŠå‘é€ç»™ç½‘ç«™æœåŠ¡å™¨çš„ç”¨æˆ·ä»£ç†ï¼ˆUser-Agentï¼‰å­—ç¬¦ä¸²çš„å€¼ã€‚ç½‘ç«™å¯ä»¥æ ¹æ®æµè§ˆå™¨è¿”å›çš„ä¸åŒç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²åˆ¤æ–­æµè§ˆå™¨çš„ç‰ˆæœ¬å’ŒåŠå®‰è£…çš„åŠŸèƒ½ï¼Œè¿™æ ·å°±å¯ä»¥æ ¹æ®ä¸åŒçš„æµè§ˆå™¨è¿”å›ä¸åŒçš„é¡µé¢å†…å®¹äº†ã€‚\n\n* æ–‡æ¡£æ¨¡å¼ç”¨äºæŒ‡å®šIEçš„é¡µé¢æ’ç‰ˆå¼•æ“ï¼ˆTridentï¼‰ä»¥å“ªä¸ªç‰ˆæœ¬çš„æ–¹å¼æ¥è§£æå¹¶æ¸²æŸ“ç½‘é¡µä»£ç ã€‚åˆ‡æ¢æ–‡æ¡£æ¨¡å¼ä¼šå¯¼è‡´ç½‘é¡µè¢«åˆ·æ–°ï¼Œä½†ä¸ä¼šæ›´æ”¹ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²ä¸­çš„ç‰ˆæœ¬å·ï¼Œä¹Ÿä¸ä¼šä»æœåŠ¡å™¨é‡æ–°ä¸‹è½½ç½‘é¡µã€‚åˆ‡æ¢æµè§ˆå™¨æ¨¡å¼çš„åŒæ—¶ï¼Œæµè§ˆå™¨ä¹Ÿä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ç›¸åº”çš„æ–‡æ¡£æ¨¡å¼ã€‚\n\nä¸€è¨€ä»¥è”½ä¹‹ï¼Œæµè§ˆå™¨æ¨¡å¼ä¼šå½±å“æœåŠ¡å™¨ç«¯å¯¹å®¢æˆ·ç«¯æµè§ˆå™¨ç‰ˆæœ¬çš„åˆ¤æ–­ï¼Œå¯¹æ¡ä»¶æ³¨é‡Šä¹Ÿæœ‰å½±å“ï¼›è€Œæ–‡æ¡£æ¨¡å¼ä¼šå½±å“IEçš„æ’ç‰ˆå¼•æ“ï¼Œå¯¹ç½‘é¡µæ¸²æŸ“ä¼šæœ‰å½±å“ï¼Œå¯¹CSS hackä¹Ÿä¼šäº§ç”Ÿå½±å“ã€‚å› æ­¤ï¼Œé€šè¿‡æ¡ä»¶æ³¨é‡Šå¯ä»¥åˆ¤æ–­æµè§ˆå™¨æ¨¡å¼ï¼Œè€Œä½¿ç”¨CSS hackå¯ä»¥åˆ¤æ–­æ–‡æ¡£æ¨¡å¼ã€‚\n\n### IE9å…¼å®¹æ€§è§†å›¾ä¸IE9æ ‡å‡†è§†å›¾\n\nå¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¸€å¥ç®€å•çš„JavaScriptè¯­å¥æ¥æŸ¥çœ‹ç”¨æˆ·ä»£ç†ï¼ˆUser-Agentï¼‰å­—ç¬¦ä¸²çš„å€¼ï¼Œåˆ™å¯ä»¥çœ‹åˆ°IE9å…¼å®¹æ€§è§†å›¾ä¸IE9çš„åŒºåˆ«ï¼š\n\n    alert('UA:'+navigator.userAgent);  \n\nè¾“å‡ºç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œæ³¨æ„å…¶ä¸­çš„MSIEç‰ˆæœ¬å·å·²ç»ä¸åŒã€‚åˆ¤æ–­æµè§ˆå™¨æ¨¡å¼å°±æ˜¯åˆ¤æ–­User-Agentä¸­çš„ç‰ˆæœ¬å·ï¼Œå³MSIEåé¢çš„æ•°å€¼ï¼š\n\n    // IE9  \n    UA:Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; Tablet PC 2.0)  \n     \n    // IE9 å…¼å®¹æ€§è§†å›¾  \n    UA:Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; Tablet PC 2.0) \n     \n    //çœŸå®IE7\n    Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)\n\nè¯è¯´IE9å…¼å®¹æ€§è§†å›¾æ˜¯æ¨¡æ‹ŸIE7çš„è¡Œä¸ºï¼Œé‚£ä¹ˆIE9å…¼å®¹æ€§è§†å›¾ä¸IE7æœ‰æ²¡æœ‰åŒºåˆ«å‘¢ï¼Ÿ<br>\nè‚¯å®šæ˜¯æœ‰åŒºåˆ«çš„ï¼Œå³ä½¿æ˜¯IE9ä¸­çš„IE7æ ‡å‡†æ¨¡å¼ï¼Œä¸åŸç”Ÿçš„IE7åœ¨æ¸²æŸ“ä¸Šä¹Ÿæ˜¯æœ‰åŒºåˆ«çš„ï¼Œå…·ä½“æˆ‘ä»¬æš‚ä¸å»æ·±ç©¶ã€‚\n\né‚£ä¹ˆæ—¢ç„¶IE9å…¼å®¹æ€§è§†å›¾çš„ç‰ˆæœ¬å·è·ŸIE7ç›¸åŒï¼Œå¦‚ä½•æ‰èƒ½åˆ¤æ–­å½“å‰æ˜¯IE9å…¼å®¹æ€§è§†å›¾ï¼Œè¿˜æ˜¯çº¯æ­£çš„IE7å‘¢ï¼Ÿ<br>\nå…¶å®å¾ˆç®€å•ï¼Œåªéœ€è¦åˆ¤æ–­æµè§ˆå™¨çš„ç”¨æˆ·ä»£ç†ï¼ˆUser-Agentï¼‰å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«Tridentå³å¯ã€‚<br>\né¦–å…ˆæ£€æµ‹MSIEçš„ç‰ˆæœ¬å·æ˜¯å¦ä¸º7.0ï¼Œç„¶åå†åˆ¤æ–­æ˜¯å¦å«æœ‰Tridentå­—ä¸²ï¼Œè‹¥åŒ…å«åˆ™ä¸ºIE9å…¼å®¹æ€§è§†å›¾ï¼Œå¦åˆ™åˆ™ä¸ºçº¯æ­£çš„IE7ã€‚\n\n### æ–‡æ¡£æ¨¡å¼çš„æ£€æµ‹\n\nåœ¨JavaScriptä¸­å¯ä»¥é€šè¿‡documentModeæ¥æ£€æµ‹æ–‡æ¡£æ¨¡å¼ï¼Œåœ¨IE6å’ŒIE7ä¸­æ˜¯ä½¿ç”¨compatModeæ¥ç¡®å®šæ–‡æ¡£æ¨¡å¼çš„ï¼Œè¿™ä¸ªå±æ€§è‡ªIE8å¼€å§‹å·²ç»è¢«documentModeæ‰€æ›¿ä»£ã€‚\n```javascript\nengine = null;  \nif (window.navigator.appName == \"Microsoft Internet Explorer\")  \n{  \n    // This is an IE browser. What mode is the engine in?  \n    if (document.documentMode) // IE8 or later  \n        engine = document.documentMode;  \n    else // IE 5-7  \n    {  \n        engine = 5; // Assume quirks mode unless proven otherwise  \n        if (document.compatMode)  \n        {  \n            if (document.compatMode == \"CSS1Compat\")  \n                engine = 7; // standards mode  \n        }  \n        // There is no test for IE6 standards mode because that mode  \n        // was replaced by IE7 standards mode; there is no emulation.  \n    }  \n    // the engine variable now contains the document compatibility mode.  \n} \n```\n\n## å‚è€ƒèµ„æ–™\n\n- [æ·±å…¥ç†è§£æµè§ˆå™¨å…¼å®¹æ€§æ¨¡å¼](http://www.csdn.net/article/2012-10-22/2811049-Understanding-the-browser-compatibility-)\n- [ç”¨doctypeæ¿€æ´»æµè§ˆå™¨æ¨¡å¼](http://dancewithnet.com/2009/06/14/activating-browser-modes-with-doctype/)([è‹±æ–‡åŸç‰ˆ](http://hsivonen.iki.fi/doctype/))\n- [å…³äºæµè§ˆå™¨æ¨¡å¼å’Œæ–‡æœ¬æ¨¡å¼çš„å›°æƒ‘](https://imququ.com/post/browser-mode-and-document-mode-in-ie.html)\n","tags":["broswer"]},{"title":"HTML vs XHTML","url":"/2019/05/08/html/HTML-vs-XHTML/","content":"\n## The Most Important Differences from HTML:\n\n- Document Structure\n  - XHTML DOCTYPE is **mandatory**\n  - The xmlns attribute in <html> is **mandatory**\n  - <html>, <head>, <title>, and <body> are **mandatory**\n- XHTML Elements\n  - XHTML elements must be **properly nested**\n  - XHTML elements must always be **closed**\n  - XHTML elements must be in **lowercase**\n  - XHTML documents must have **one root element**\n- XHTML Attributes\n  - Attribute names must be in **lower case**\n  - Attribute values must be **quoted**\n  - Attribute minimization is **forbidden**\n\n### <!DOCTYPE ....> Is Mandatory\n\nAn XHTML document must have an XHTML DOCTYPE declaration.\n\nA complete list of all the XHTML Doctypes is found in our HTML Tags Reference.\n\nThe <html>, <head>, <title>, and <body> elements must also be present, and the xmlns attribute in <html> must specify the xml namespace for the document.\n\nThis example shows an XHTML document with a minimum of required tags:\n\n``` html\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n\n<head>\n  <title>Title of document</title>\n</head>\n\n<body>\n  some content \n</body>\n\n</html>\n```\n\n### XHTML Elements Must Be Properly Nested\n\nIn HTML, some elements can be improperly nested within each other, like this:\n\n``` html\n<b><i>This text is bold and italic</b></i>\n```\n\nIn XHTML, all elements must be properly nested within each other, like this:\n\n``` html\n<b><i>This text is bold and italic</i></b>\n```\n\n### XHTML Elements Must Always Be Closed\n\nThis is correct:\n\n``` html\n<p>This is a paragraph</p>\n<p>This is another paragraph</p>\n```\n\n### Empty Elements Must Also Be Closed\n\nThis is correct:\n\n``` html\nA break: <br />\nA horizontal rule: <hr />\nAn image: <img src=\"happy.gif\" alt=\"Happy face\" />\n```\n\n### XHTML Elements Must Be In Lower Case\n\n``` html\n<body>\n<p>This is a paragraph</p>\n</body>\n```\n\n### XHTML Attribute Names Must Be In Lower Case\n\n``` html\n<table width=\"100%\">\n```\n\n### Attribute Values Must Be Quoted\n\n``` html\n<table width=\"100%\">\n```\n\n### Attribute Minimization Is Forbidden\n\nWrong:\n\n``` html\n<input type=\"checkbox\" name=\"vehicle\" value=\"car\" checked />\n```\n\nCorrect:\n\n``` html\n<input type=\"checkbox\" name=\"vehicle\" value=\"car\" checked=\"checked\" />\n```\n\n## How to Convert from HTML to XHTML\n\n- Add an XHTML <!DOCTYPE> to the first line of every page\n- Add an xmlns attribute to the html element of every page\n- Change all element names to lowercase\n- Close all empty elements\n- Change all attribute names to lowercase\n- Quote all attribute values\n\n[Link](https://www.w3schools.com/html/html_xhtml.asp)","tags":["HTML"]},{"title":"å¾®ä¿¡å°ç¨‹åºä½“éªŒç‰ˆè½¬å‘åæ— æ³•æ‰“å¼€","url":"/2019/05/05/æ€»ç»“/å¾®ä¿¡å°ç¨‹åºä½“éªŒç‰ˆè½¬å‘åæ— æ³•æ‰“å¼€/","content":"\nä½“éªŒç‰ˆå°ç¨‹åº ç‚¹å‡»æ¨èç»™æœ‹å‹\nè¿™ä¸ªé¡µé¢çš„æ¨èç»™æœ‹å‹,æ¨èå‡ºå» æ‰“å¼€çš„æ˜¯æ­£å¼ç‰ˆ","tags":["å¾®ä¿¡å°ç¨‹åº"]},{"title":"You Dont't Know JS ç¬”è®°(2)","url":"/2019/05/05/è¯»ä¹¦ç¬”è®°/You Dont Know JS/You-Dont-t-Know-JS-ç¬”è®°-2/","content":"\n# Scope & Closures\n\n## Chapter 1: What is Scope?\n\n## Chapter 2: Lexical Scope\n\n## Chapter 3: Function vs. Block Scope\n\n### Scope From Functions\n\n```js\nfunction foo(a) {\n\tvar b = 2;\n\n\t// some code\n\n\tfunction bar() {\n\t\t// ...\n\t}\n\n\t// more code\n\n\tvar c = 3;\n}\n```\n\nIn this snippet, the scope bubble for `foo(..)` includes identifiers `a`, `b`, `c` and `bar`. **It doesn't matter** *where* in the scope a declaration appears, the variable or function belongs to the containing scope bubble, regardless. We'll explore how exactly *that* works in the next chapter.\n\n`bar(..)` has its own scope bubble. So does the global scope, which has just one identifier attached to it: `foo`.\n\nBecause `a`, `b`, `c`, and `bar` all belong to the scope bubble of `foo(..)`, they are not accessible outside of `foo(..)`. That is, the following code would all result in `ReferenceError` errors, as the identifiers are not available to the global scope:\n\n```js\nbar(); // fails\n\nconsole.log( a, b, c ); // all 3 fail\n```\n\nHowever, all these identifiers (`a`, `b`, `c`, `foo`, and `bar`) are accessible *inside* of `foo(..)`, and indeed also available inside of `bar(..)` (assuming there are no shadow identifier declarations inside `bar(..)`).\n\n### Functions As Scopes\n\n### Blocks As Scopes","tags":["js"]},{"title":"åŸå‹ prototype","url":"/2019/05/05/js/åŸå‹ prototype/"},{"title":"é—­åŒ… closure","url":"/2019/05/05/js/é—­åŒ…closure/","content":"\n\n[æ·±å…¥è´¯å½»é—­åŒ…æ€æƒ³ï¼Œå…¨é¢ç†è§£JSé—­åŒ…å½¢æˆè¿‡ç¨‹](https://segmentfault.com/a/1190000009886713)\n[link](https://www.cnblogs.com/frankfang/archive/2011/08/03/2125663.html)\n\n## å…³äºé—­åŒ…çš„é¢è¯•é¢˜","tags":["js","closure"]},{"title":"You Dont't Know JS ç¬”è®°(1)","url":"/2019/04/30/è¯»ä¹¦ç¬”è®°/You Dont Know JS/You-Dont-t-Know-JS ç¬”è®°/","content":"\n# Up & Going\n\n## Chapter 1: Into Programming\n\n### get user input\n\n``` js\nage = prompt( \"Please tell me your age:\" );\n\nconsole.log( age );\n```\n\n### Converting Between Types\n\n``` js\nvar a = \"42\";\nvar b = Number( a );\n\nconsole.log( a ); // \"42\"\nconsole.log( b ); // 42\n```\n\n### Scope\n\n``` js\nfunction outer() {\n\tvar a = 1;\n\n\tfunction inner() {\n\t\tvar b = 2;\n\n\t\t// we can access both `a` and `b` here\n\t\tconsole.log( a + b );\t// 3\n\t}\n\n\tinner();\n\n\t// we can only access `a` here\n\tconsole.log( a );\t\t\t// 1\n}\n\nouter();\n```\n\nSo, code inside the `inner()` function has access to both variables `a` and `b`, but code in `outer()` has access only to `a` -- it cannot access `b` because that variable is only inside `inner()`.\n\n## Chapter 2: Into JavaScript\n\n### Values & Types\n\n- string\n- number\n- boolean\n- null and undefined\n- object\n- symbol (new to ES6)\n\n``` js\na = null;\ntypeof a;\t\t\t\t// \"object\" -- weird, bug\n```\n\nAlso, note `a = undefined`. We're explicitly setting `a` to the `undefined` value, but that is behaviorally no different from a variable that has no value set yet, like with the `var a`; line at the top of the snippet. A variable can get to this \"undefined\" value state in several different ways, including functions that return no values and usage of the void operator.\n\narray and function. But rather than being proper built-in types, these should be thought of more like subtypes -- specialized versions of the `object` type.\n\n### å¼ºåˆ¶ç±»å‹è½¬åŒ–\n\n``` js\nvar a = \"42\";\nvar b = a * 1;\t// \"42\" implicitly coerced to 42 here\n\na;\t\t\t\t// \"42\"\nb;\t\t\t\t// 42 -- the number!\n```\n\n``` js\nvar a = 42;\nvar b = a + 'a';\n\na;\t\t\t\t// 42\nb;\t\t\t\t// \"42a\" -- the String!\n```\n\nYou should take special note of the == and === comparison rules if you're comparing two non-primitive values, like objects (including function and array). Because those values are actually held by reference, both == and === comparisons will simply check whether the references match, not anything about the underlying values.\n\nFor example, arrays are by default coerced to strings by simply joining all the values with commas (`,`) in between. You might think that two arrays with the same contents would be == equal, but they're not:\n\n``` js\nvar a = [1,2,3];\nvar b = [1,2,3];\nvar c = \"1,2,3\";\n\na == c;\t\t// true\nb == c;\t\t// true\na == b;\t\t// false\n```\n\nhow can all three of those comparisons be false? Because the `b` value is being coerced to the \"invalid number value\" `NaN` in the `<` and `>` comparisons, and the specification says that `NaN` is neither greater-than nor less-than any other value.\n\n``` js\nvar a = 42;\nvar b = \"foo\";\n\na < b;\t\t// false\na > b;\t\t// false\na == b;\t\t// false\n```\n\n#### False\n\n- \"\" (empty string)\n- 0, -0, NaN (invalid number)\n- null, undefined\n- false\n\n#### True\n\n- \"hello\"\n- 42\n- true\n- [ ], [ 1, \"2\", 3 ] (arrays)\n- { }, { a: 42 } (objects)\n- function foo() { .. } (functions)\n\n### Function Scopes\n\n#### Hoisting\n\n``` js\nvar a = 2;\n\nfoo();\t\t\t\t\t// works because `foo()`\n\t\t\t\t\t\t// declaration is \"hoisted\"\n\nfunction foo() {\n\ta = 3;\n\n\tconsole.log( a );\t// 3\n\n\tvar a;\t\t\t\t// declaration is \"hoisted\"\n\t\t\t\t\t\t// to the top of `foo()`\n}\n\nconsole.log( a );\t// 2\n```\n\n#### Nested Scopes\n\n``` js\n\nfunction foo() {\n\tvar a = 1;\n\n\tfunction bar() {\n\t\tvar b = 2;\n\n\t\tfunction baz() {\n\t\t\tvar c = 3;\n\n\t\t\tconsole.log( a, b, c );\t// 1 2 3\n\t\t}\n\n\t\tbaz();\n\t\tconsole.log( a, b );\t\t// 1 2\n\t}\n\n\tbar();\n\tconsole.log( a );\t\t\t\t// 1\n}\n\nfoo();\n```\n\nNotice that `c` is not available inside of `bar()`, because it's declared only inside the inner `baz()` scope, and that `b` is not available to `foo()` for the same reason.\n\nES6 lets you declare variables to belong to individual blocks (pairs of `{ .. }`), using the `let` keyword\n\n### Immediately Invoked Function Expressions (IIFEs)\n\n``` js\n(function IIFE(){\n\tconsole.log( \"Hello!\" );\n})();\n// \"Hello!\"\n```\n\nThe outer `( .. )` that surrounds the `(function IIFE(){ .. })` function expression is just a nuance of JS grammar needed to prevent it from being treated as a normal function declaration.\n\nThe final `()` on the end of the expression -- the `})();` line -- is what actually executes the function expression referenced immediately before it.\n\nBecause an IIFE is just a function, and functions create variable scope, using an IIFE in this fashion is often used to declare variables that won't affect the surrounding code outside the IIFE:\n\n``` js\nvar a = 42;\n\n(function IIFE(){\n\tvar a = 10;\n\tconsole.log( a );\t// 10\n})();\n\nconsole.log( a );\t\t// 42\n```\n\nIIFEs can also have return values:\n\n``` js\nvar x = (function IIFE(){\n\treturn 42;\n})();\n\nx;\t// 42\n```\n\n### Closure\n\nYou can think of closure as a way to \"remember\" and continue to access a function's scope (its variables) even once the function has finished running.\n\n``` js\nfunction makeAdder(x) {\n\t// parameter `x` is an inner variable\n\n\t// inner function `add()` uses `x`, so\n\t// it has a \"closure\" over it\n\tfunction add(y) {\n\t\treturn y + x;\n\t};\n\n\treturn add;\n}\n\n// `plusOne` gets a reference to the inner `add(..)`\n// function with closure over the `x` parameter of\n// the outer `makeAdder(..)`\nvar plusOne = makeAdder( 1 );\n\n// `plusTen` gets a reference to the inner `add(..)`\n// function with closure over the `x` parameter of\n// the outer `makeAdder(..)`\nvar plusTen = makeAdder( 10 );\n\nplusOne( 3 );        // 4  <-- 1 + 3\nplusOne( 41 );        // 42 <-- 1 + 41\n\nplusTen( 13 );        // 23 <-- 10 + 13\n```\n\nMore on how this code works:\n\n1. When we call `makeAdder(1)`, we get back a reference to its inner `add(..)` that remembers `x` as `1`. We call this function reference `plusOne(..)`.\n2. When we call `makeAdder(10)`, we get back another reference to its inner `add(..)` that remembers `x` as `10`. We call this function reference `plusTen(..)`.\n3. When we call `plusOne(3)`, it adds `3` (its inner `y`) to the `1` (remembered by `x`), and we get `4` as the result.\n4. When we call `plusTen(13)`, it adds `13` (its inner `y`) to the `10` (remembered by `x`), and we get `23` as the result.\n\n### `this` Identifier\n\n``` js\nfunction foo() {\n\tconsole.log( this.bar );\n}\n\nvar bar = \"global\";\n\nvar obj1 = {\n\tbar: \"obj1\",\n\tfoo: foo\n};\n\nvar obj2 = {\n\tbar: \"obj2\"\n};\n\n// --------\n\nfoo();\t\t\t\t// \"global\"\nobj1.foo();\t\t\t// \"obj1\"\nfoo.call( obj2 );\t\t// \"obj2\"\nnew foo();\t\t\t// undefined\n```\n\nThere are four rules for how `this` gets set, and they're shown in those last four lines of that snippet.\n\n1. `foo()` ends up setting `this` to the global object in non-strict mode -- in strict mode, `this` would be `undefined` and you'd get an error in accessing the `bar` property -- so `\"global\"` is the value found for `this.bar`.\n2. `obj1.foo()` sets `this` to the `obj1` object.\n3. `foo.call(obj2)` sets `this` to the `obj2` object.\n4. `new foo()` sets `this` to a brand new empty object.\n\n### Prototypes\n\nWhen you reference a property on an object, if that property doesn't exist, JavaScript will automatically use that object's internal prototype reference to find another object to look for the property on. You could think of this almost as a fallback if the property is missing.\n\nThe internal prototype reference linkage from one object to its fallback happens at the time the object is created. The simplest way to illustrate it is with a built-in utility called `Object.create(..)`.\n\n``` js\nvar foo = {\n\ta: 42\n};\n\n// create `bar` and link it to `foo`\nvar bar = Object.create( foo );\n\nbar.b = \"hello world\";\n\nbar.b;\t\t// \"hello world\"\nbar.a;\t\t// 42 <-- delegated to `foo`\n```\n\nThe `a` property doesn't actually exist on the `bar` object, but because `bar` is prototype-linked to `foo`, JavaScript automatically falls back to looking for `a` on the `foo` object, where it's found.\n\n### Polyfilling\n\nES6 defines a utility called `Number.isNaN(..)` to provide an accurate non-buggy check for `NaN` values\n\n### Transpiling\n\nHere's a quick example of transpiling. ES6 adds a feature called \"default parameter values.\"\n\n``` js\nfunction foo(a = 2) {\n\tconsole.log( a );\n}\n\nfoo();\t\t// 2\nfoo( 42 );\t// 42\n```\n\n","tags":["js"]},{"title":"JSON Web Token","url":"/2019/04/30/ç½‘ç»œ/JSON-Web-Token/","content":"\nJSON Web Tokenï¼ˆç¼©å†™ JWTï¼‰æ˜¯ç›®å‰æœ€æµè¡Œçš„è·¨åŸŸè®¤è¯è§£å†³æ–¹æ¡ˆ\n\n[Link](http://www.ruanyifeng.com/blog/2018/07/json_web_token-tutorial.html)\n\n## ä¸€ã€è·¨åŸŸè®¤è¯çš„é—®é¢˜\n\nä¸€èˆ¬æµç¨‹æ˜¯ä¸‹é¢è¿™æ ·\n\n> 1ã€ç”¨æˆ·å‘æœåŠ¡å™¨å‘é€ç”¨æˆ·åå’Œå¯†ç ã€‚\n> 2ã€æœåŠ¡å™¨éªŒè¯é€šè¿‡åï¼Œåœ¨å½“å‰å¯¹è¯ï¼ˆsessionï¼‰é‡Œé¢ä¿å­˜ç›¸å…³æ•°æ®ï¼Œæ¯”å¦‚ç”¨æˆ·è§’è‰²ã€ç™»å½•æ—¶é—´ç­‰ç­‰ã€‚\n> 3ã€æœåŠ¡å™¨å‘ç”¨æˆ·è¿”å›ä¸€ä¸ª session_idï¼Œå†™å…¥ç”¨æˆ·çš„ Cookieã€‚\n> 4ã€ç”¨æˆ·éšåçš„æ¯ä¸€æ¬¡è¯·æ±‚ï¼Œéƒ½ä¼šé€šè¿‡ Cookieï¼Œå°† session_id ä¼ å›æœåŠ¡å™¨ã€‚\n> 5ã€æœåŠ¡å™¨æ”¶åˆ° session_idï¼Œæ‰¾åˆ°å‰æœŸä¿å­˜çš„æ•°æ®ï¼Œç”±æ­¤å¾—çŸ¥ç”¨æˆ·çš„èº«ä»½ã€‚\n\nè¿™ç§æ¨¡å¼çš„é—®é¢˜åœ¨äºï¼Œæ‰©å±•æ€§ï¼ˆscalingï¼‰ä¸å¥½ã€‚å•æœºå½“ç„¶æ²¡æœ‰é—®é¢˜ï¼Œå¦‚æœæ˜¯æœåŠ¡å™¨é›†ç¾¤ï¼Œæˆ–è€…æ˜¯è·¨åŸŸçš„æœåŠ¡å¯¼å‘æ¶æ„ï¼Œå°±è¦æ±‚ session æ•°æ®å…±äº«ï¼Œæ¯å°æœåŠ¡å™¨éƒ½èƒ½å¤Ÿè¯»å– sessionã€‚\n\nä¸¾ä¾‹æ¥è¯´ï¼ŒA ç½‘ç«™å’Œ B ç½‘ç«™æ˜¯åŒä¸€å®¶å…¬å¸çš„å…³è”æœåŠ¡ã€‚ç°åœ¨è¦æ±‚ï¼Œç”¨æˆ·åªè¦åœ¨å…¶ä¸­ä¸€ä¸ªç½‘ç«™ç™»å½•ï¼Œå†è®¿é—®å¦ä¸€ä¸ªç½‘ç«™å°±ä¼šè‡ªåŠ¨ç™»å½•ï¼Œè¯·é—®æ€ä¹ˆå®ç°ï¼Ÿ\n\nä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ session æ•°æ®æŒä¹…åŒ–ï¼Œå†™å…¥æ•°æ®åº“æˆ–åˆ«çš„æŒä¹…å±‚ã€‚å„ç§æœåŠ¡æ”¶åˆ°è¯·æ±‚åï¼Œéƒ½å‘æŒä¹…å±‚è¯·æ±‚æ•°æ®ã€‚è¿™ç§æ–¹æ¡ˆçš„ä¼˜ç‚¹æ˜¯æ¶æ„æ¸…æ™°ï¼Œç¼ºç‚¹æ˜¯å·¥ç¨‹é‡æ¯”è¾ƒå¤§ã€‚å¦å¤–ï¼ŒæŒä¹…å±‚ä¸‡ä¸€æŒ‚äº†ï¼Œå°±ä¼šå•ç‚¹å¤±è´¥ã€‚\n\nå¦ä¸€ç§æ–¹æ¡ˆæ˜¯æœåŠ¡å™¨ç´¢æ€§ä¸ä¿å­˜ session æ•°æ®äº†ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½å‘å›æœåŠ¡å™¨ã€‚JWT å°±æ˜¯è¿™ç§æ–¹æ¡ˆçš„ä¸€ä¸ªä»£è¡¨ã€‚\n\n## äºŒã€JWT çš„åŸç†\n\nJWT çš„åŸç†æ˜¯ï¼ŒæœåŠ¡å™¨è®¤è¯ä»¥åï¼Œç”Ÿæˆä¸€ä¸ª JSON å¯¹è±¡ï¼Œå‘å›ç»™ç”¨æˆ·ï¼Œå°±åƒä¸‹é¢è¿™æ ·ã€‚\n\n``` json\n{\n  \"å§“å\": \"å¼ ä¸‰\",\n  \"è§’è‰²\": \"ç®¡ç†å‘˜\",\n  \"åˆ°æœŸæ—¶é—´\": \"2018å¹´7æœˆ1æ—¥0ç‚¹0åˆ†\"\n}\n```\n\nä»¥åï¼Œç”¨æˆ·ä¸æœåŠ¡ç«¯é€šä¿¡çš„æ—¶å€™ï¼Œéƒ½è¦å‘å›è¿™ä¸ª JSON å¯¹è±¡ã€‚æœåŠ¡å™¨å®Œå…¨åªé è¿™ä¸ªå¯¹è±¡è®¤å®šç”¨æˆ·èº«ä»½ã€‚ä¸ºäº†é˜²æ­¢ç”¨æˆ·ç¯¡æ”¹æ•°æ®ï¼ŒæœåŠ¡å™¨åœ¨ç”Ÿæˆè¿™ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œä¼šåŠ ä¸Šç­¾åï¼ˆè¯¦è§åæ–‡ï¼‰ã€‚\n\næœåŠ¡å™¨å°±ä¸ä¿å­˜ä»»ä½• session æ•°æ®äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒæœåŠ¡å™¨å˜æˆæ— çŠ¶æ€äº†ï¼Œä»è€Œæ¯”è¾ƒå®¹æ˜“å®ç°æ‰©å±•\n\n## ä¸‰ã€JWT çš„æ•°æ®ç»“æ„\n\nå®é™…çš„ JWT æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œä¸­é—´ç”¨ç‚¹ï¼ˆ.ï¼‰åˆ†éš”æˆä¸‰ä¸ªéƒ¨åˆ†ã€‚æ³¨æ„ï¼ŒJWT å†…éƒ¨æ˜¯æ²¡æœ‰æ¢è¡Œçš„\n\nJWT çš„ä¸‰ä¸ªéƒ¨åˆ†ä¾æ¬¡å¦‚ä¸‹ã€‚\n\n- Headerï¼ˆå¤´éƒ¨ï¼‰\n- Payloadï¼ˆè´Ÿè½½ï¼‰\n- Signatureï¼ˆç­¾åï¼‰\n\nå†™æˆä¸€è¡Œï¼Œå°±æ˜¯ä¸‹é¢çš„æ ·å­ã€‚\n\n`Header.Payload.Signature`\n\n### 3.1 Header\n\nHeader éƒ¨åˆ†æ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œæè¿° JWT çš„å…ƒæ•°æ®ï¼Œé€šå¸¸æ˜¯ä¸‹é¢çš„æ ·å­ã€‚\n\n``` json\n{\n  \"alg\": \"HS256\",\n  \"typ\": \"JWT\"\n}\n```\n\nä¸Šé¢ä»£ç ä¸­ï¼Œalgå±æ€§è¡¨ç¤ºç­¾åçš„ç®—æ³•ï¼ˆalgorithmï¼‰ï¼Œé»˜è®¤æ˜¯ HMAC SHA256ï¼ˆå†™æˆ HS256ï¼‰ï¼›typå±æ€§è¡¨ç¤ºè¿™ä¸ªä»¤ç‰Œï¼ˆtokenï¼‰çš„ç±»å‹ï¼ˆtypeï¼‰ï¼ŒJWT ä»¤ç‰Œç»Ÿä¸€å†™ä¸ºJWTã€‚\n\næœ€åï¼Œå°†ä¸Šé¢çš„ JSON å¯¹è±¡ä½¿ç”¨ Base64URL ç®—æ³•ï¼ˆè¯¦è§åæ–‡ï¼‰è½¬æˆå­—ç¬¦ä¸²ã€‚\n\n### 3.2 Payload\n\nPayload éƒ¨åˆ†ä¹Ÿæ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œç”¨æ¥å­˜æ”¾å®é™…éœ€è¦ä¼ é€’çš„æ•°æ®ã€‚JWT è§„å®šäº†7ä¸ªå®˜æ–¹å­—æ®µï¼Œä¾›é€‰ç”¨ã€‚\n\n```\niss (issuer)ï¼šç­¾å‘äºº\nexp (expiration time)ï¼šè¿‡æœŸæ—¶é—´\nsub (subject)ï¼šä¸»é¢˜\naud (audience)ï¼šå—ä¼—\nnbf (Not Before)ï¼šç”Ÿæ•ˆæ—¶é—´\niat (Issued At)ï¼šç­¾å‘æ—¶é—´\njti (JWT ID)ï¼šç¼–å·\n```\n\né™¤äº†å®˜æ–¹å­—æ®µï¼Œä½ è¿˜å¯ä»¥åœ¨è¿™ä¸ªéƒ¨åˆ†å®šä¹‰ç§æœ‰å­—æ®µ\n\næ³¨æ„ï¼ŒJWT é»˜è®¤æ˜¯ä¸åŠ å¯†çš„ï¼Œä»»ä½•äººéƒ½å¯ä»¥è¯»åˆ°ï¼Œæ‰€ä»¥ä¸è¦æŠŠç§˜å¯†ä¿¡æ¯æ”¾åœ¨è¿™ä¸ªéƒ¨åˆ†ã€‚\n\nè¿™ä¸ª JSON å¯¹è±¡ä¹Ÿè¦ä½¿ç”¨ Base64URL ç®—æ³•è½¬æˆå­—ç¬¦ä¸²ã€‚\n\n### 3.3 Signature\n\nSignature éƒ¨åˆ†æ˜¯å¯¹å‰ä¸¤éƒ¨åˆ†çš„ç­¾åï¼Œé˜²æ­¢æ•°æ®ç¯¡æ”¹ã€‚\n\né¦–å…ˆï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ªå¯†é’¥ï¼ˆsecretï¼‰ã€‚è¿™ä¸ªå¯†é’¥åªæœ‰æœåŠ¡å™¨æ‰çŸ¥é“ï¼Œä¸èƒ½æ³„éœ²ç»™ç”¨æˆ·ã€‚ç„¶åï¼Œä½¿ç”¨ Header é‡Œé¢æŒ‡å®šçš„ç­¾åç®—æ³•ï¼ˆé»˜è®¤æ˜¯ HMAC SHA256ï¼‰ï¼ŒæŒ‰ç…§ä¸‹é¢çš„å…¬å¼äº§ç”Ÿç­¾åã€‚\n\n```js\nHMACSHA256(\n  base64UrlEncode(header) + \".\" +\n  base64UrlEncode(payload),\n  secret)\n```\n\nç®—å‡ºç­¾åä»¥åï¼ŒæŠŠ Headerã€Payloadã€Signature ä¸‰ä¸ªéƒ¨åˆ†æ‹¼æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯ä¸ªéƒ¨åˆ†ä¹‹é—´ç”¨\"ç‚¹\"ï¼ˆ.ï¼‰åˆ†éš”ï¼Œå°±å¯ä»¥è¿”å›ç»™ç”¨æˆ·ã€‚\n\n### 3.4 Base64URL\n\nJWT ä½œä¸ºä¸€ä¸ªä»¤ç‰Œï¼ˆtokenï¼‰ï¼Œæœ‰äº›åœºåˆå¯èƒ½ä¼šæ”¾åˆ° URLï¼ˆæ¯”å¦‚ api.example.com/?token=xxxï¼‰ã€‚Base64 æœ‰ä¸‰ä¸ªå­—ç¬¦+ã€/å’Œ=ï¼Œåœ¨ URL é‡Œé¢æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œæ‰€ä»¥è¦è¢«æ›¿æ¢æ‰ï¼š=è¢«çœç•¥ã€+æ›¿æ¢æˆ-ï¼Œ/æ›¿æ¢æˆ_ ã€‚è¿™å°±æ˜¯ Base64URL ç®—æ³•ã€‚\n\n## å››ã€JWT çš„ä½¿ç”¨æ–¹å¼\n\nå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„ JWTï¼Œå¯ä»¥å‚¨å­˜åœ¨ Cookie é‡Œé¢ï¼Œä¹Ÿå¯ä»¥å‚¨å­˜åœ¨ localStorageã€‚\n\næ­¤åï¼Œå®¢æˆ·ç«¯æ¯æ¬¡ä¸æœåŠ¡å™¨é€šä¿¡ï¼Œéƒ½è¦å¸¦ä¸Šè¿™ä¸ª JWTã€‚ä½ å¯ä»¥æŠŠå®ƒæ”¾åœ¨ Cookie é‡Œé¢è‡ªåŠ¨å‘é€ï¼Œä½†æ˜¯è¿™æ ·ä¸èƒ½è·¨åŸŸï¼Œæ‰€ä»¥æ›´å¥½çš„åšæ³•æ˜¯æ”¾åœ¨ HTTP è¯·æ±‚çš„å¤´ä¿¡æ¯Authorizationå­—æ®µé‡Œé¢ã€‚\n\n``` http\nAuthorization: Bearer <token>\n```\n\nå¦ä¸€ç§åšæ³•æ˜¯ï¼Œè·¨åŸŸçš„æ—¶å€™ï¼ŒJWT å°±æ”¾åœ¨ POST è¯·æ±‚çš„æ•°æ®ä½“é‡Œé¢ã€‚\n\n## äº”ã€JWT çš„å‡ ä¸ªç‰¹ç‚¹\n\nï¼ˆ1ï¼‰JWT é»˜è®¤æ˜¯ä¸åŠ å¯†ï¼Œä½†ä¹Ÿæ˜¯å¯ä»¥åŠ å¯†çš„ã€‚ç”ŸæˆåŸå§‹ Token ä»¥åï¼Œå¯ä»¥ç”¨å¯†é’¥å†åŠ å¯†ä¸€æ¬¡ã€‚\n\nï¼ˆ2ï¼‰JWT ä¸åŠ å¯†çš„æƒ…å†µä¸‹ï¼Œä¸èƒ½å°†ç§˜å¯†æ•°æ®å†™å…¥ JWTã€‚\n\nï¼ˆ3ï¼‰JWT ä¸ä»…å¯ä»¥ç”¨äºè®¤è¯ï¼Œä¹Ÿå¯ä»¥ç”¨äºäº¤æ¢ä¿¡æ¯ã€‚æœ‰æ•ˆä½¿ç”¨ JWTï¼Œå¯ä»¥é™ä½æœåŠ¡å™¨æŸ¥è¯¢æ•°æ®åº“çš„æ¬¡æ•°ã€‚\n\nï¼ˆ4ï¼‰JWT çš„æœ€å¤§ç¼ºç‚¹æ˜¯ï¼Œç”±äºæœåŠ¡å™¨ä¸ä¿å­˜ session çŠ¶æ€ï¼Œå› æ­¤æ— æ³•åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­åºŸæ­¢æŸä¸ª tokenï¼Œæˆ–è€…æ›´æ”¹ token çš„æƒé™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦ JWT ç­¾å‘äº†ï¼Œåœ¨åˆ°æœŸä¹‹å‰å°±ä¼šå§‹ç»ˆæœ‰æ•ˆï¼Œé™¤éæœåŠ¡å™¨éƒ¨ç½²é¢å¤–çš„é€»è¾‘ã€‚\n\nï¼ˆ5ï¼‰JWT æœ¬èº«åŒ…å«äº†è®¤è¯ä¿¡æ¯ï¼Œä¸€æ—¦æ³„éœ²ï¼Œä»»ä½•äººéƒ½å¯ä»¥è·å¾—è¯¥ä»¤ç‰Œçš„æ‰€æœ‰æƒé™ã€‚ä¸ºäº†å‡å°‘ç›—ç”¨ï¼ŒJWT çš„æœ‰æ•ˆæœŸåº”è¯¥è®¾ç½®å¾—æ¯”è¾ƒçŸ­ã€‚å¯¹äºä¸€äº›æ¯”è¾ƒé‡è¦çš„æƒé™ï¼Œä½¿ç”¨æ—¶åº”è¯¥å†æ¬¡å¯¹ç”¨æˆ·è¿›è¡Œè®¤è¯ã€‚\n\nï¼ˆ6ï¼‰ä¸ºäº†å‡å°‘ç›—ç”¨ï¼ŒJWT ä¸åº”è¯¥ä½¿ç”¨ HTTP åè®®æ˜ç ä¼ è¾“ï¼Œè¦ä½¿ç”¨ HTTPS åè®®ä¼ è¾“ã€‚\n\n## å…¶ä»–\n\nç¬¬ä¸‰æ–¹ç¨‹åºè·å–ç”¨æˆ·æ•°æ®ï¼Œéœ€è¦ç”¨æˆ·æˆæƒæ—¶ç”¨[oauth](http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html)ï¼Œæ¯”å¦‚QQç™»å½•ï¼Œå¾®ä¿¡ç™»å½•ç­‰ã€‚\n\nç¬¬ä¸‰æ–¹ç¨‹åºç›´æ¥è·å–æ•°æ®ï¼Œåªåšæ¥å£è®¤è¯ç”¨æ—¶ç”¨jwtï¼Œæ¯”å¦‚å„ç§äº‘æœåŠ¡çš„æ¥å…¥ã€‚\n\nåœ¨Webåº”ç”¨ä¸­ï¼Œåˆ«å†æŠŠJWTå½“åšsessionä½¿ç”¨ï¼Œç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¼ ç»Ÿçš„cookie-sessionæœºåˆ¶å·¥ä½œå¾—æ›´å¥½\n\nJWTé€‚åˆä¸€æ¬¡æ€§çš„å‘½ä»¤è®¤è¯ï¼Œé¢å‘ä¸€ä¸ªæœ‰æ•ˆæœŸæçŸ­çš„JWTï¼Œå³ä½¿æš´éœ²äº†å±é™©ä¹Ÿå¾ˆå°ï¼Œç”±äºæ¯æ¬¡æ“ä½œéƒ½ä¼šç”Ÿæˆæ–°çš„JWTï¼Œå› æ­¤ä¹Ÿæ²¡å¿…è¦ä¿å­˜JWTï¼ŒçœŸæ­£å®ç°æ— çŠ¶æ€ã€‚","tags":["token","jwt"]},{"title":"å…³äºmongoose.save()åœ¨koa-routerçš„postä¸­è¿”å›404çš„é—®é¢˜","url":"/2019/04/29/æ€»ç»“/å…³äºmongoose-save-åœ¨koa-routerçš„postä¸­è¿”å›404çš„é—®é¢˜/","content":"\n## é—®é¢˜ä»£ç \n\n``` js\nrouter.post('/signup', async (ctx, next) => {\n  const data = ctx.request.body\n  const user = {\n    username: data.username,\n    email: data.email,\n    password: data.password\n  }\n  const newUser = new User(user);\n\n  // expressä¸­çš„å†™æ³•\n  await newUser.save(err => {\n    if (!err) {\n      ctx.body = {\n        code: 0,\n        status: 200,\n        message: 'æ³¨å†ŒæˆåŠŸ'\n      }\n    } else if (err.code === 11000) {\n      ctx.body = {\n        code: -1,\n        status: 200,\n        message: 'æ­¤é‚®ç®±å·²æ³¨å†Œ'\n      }\n    } else {\n      ctx.body = {\n        code: 999,\n        status: 200,\n        message: 'æœªçŸ¥é”™è¯¯'\n      }\n    }\n  })\n})\n```\n\nä¸Šé¢çš„ä»£ç ä¸è¡Œ, postmanä¸­æ€»æ˜¯ä¼šæ˜¾ç¤º 404 not found\n\nç„¶åå°è¯•äº†\n\n``` js\nlet code\nawait newUser.save(err => {\n  if (!err) {\n    code = 0\n  } else if (err.code === 11000) {\n    code = -1\n  } else {\n    code = 999\n  }\n})\n\nconsole.log(code)\n```\n\nä¹Ÿä¸è¡Œ, æ‰“å°ä¸€ç›´æ˜¯ undefined\n\nåæ¥æœ‰åœ¨ç½‘ä¸Šçœ‹åˆ° `let res = await newUser.save()`çš„å†™æ³•, ä½†æ˜¯koaä¼šæŠ¥é”™.\n\n## è§£å†³æ–¹æ³•\n\nèŠ±äº†ä¸€å¤©æ—¶é—´, ç»ˆäºæƒ³åˆ°å¯ä»¥ç”¨try catchæ¥è§£å†³è¿™ä¸ªé—®é¢˜\n\n``` js\nrouter.post('/signup', async (ctx, next) => {\n  const data = ctx.request.body\n  const user = {\n    username: data.username,\n    email: data.email,\n    password: data.password\n  }\n  const newUser = new User(user);\n\n  try {\n    let res = await newUser.save()\n    if (res) {\n      ctx.body = {\n        code: 0,\n        status: 200,\n        message: 'æ³¨å†ŒæˆåŠŸ'\n      }\n    }\n  }\n  catch (err) {\n    if (err.code === 11000) {\n      ctx.body = {\n        code: -1,\n        status: 200,\n        message: 'æ­¤é‚®ç®±å·²æ³¨å†Œ'\n      }\n    } else {\n      ctx.body = {\n        code: 999,\n        status: 200,\n        message: 'æœªçŸ¥é”™è¯¯'\n      }\n    }\n  }\n})\n```\n\nè¿™æ ·ç»ˆäºå¯ä»¥åœ¨ postman ä¸­æ­£ç¡®çš„è¿”å›bodyäº†!\n","tags":["koa","mongoose"]},{"title":"Koa+Taroæ­å»ºCMS","url":"/2019/04/26/koa/Koa-Taroæ­å»ºCMS/","content":"\n## ç™»å½•åŠŸèƒ½\n\nä½¿ç”¨ POST è¯·æ±‚\n\n### ç”¨æˆ·è®¤è¯\n\n## æ³¨å†ŒåŠŸèƒ½\n\n### éªŒè¯ç \n\n``` js\nconst svgCaptcha = require('svg-captcha');\n\n// ç”ŸæˆéªŒè¯ç \nconst captcha = svgCaptcha.create();\n\nrouter.get('/signup', async (ctx, next) => {\n  ctx.status = 200;\n  ctx.type = 'svg';\n  ctx.body = captcha.data;\n})\n```\n\n## dashboard","tags":["koa","taro"]},{"title":"<koaå’Œnode.jså¼€å‘å®æˆ˜>ç¬”è®°","url":"/2019/04/25/koa/koaå’Œnode-jså¼€å‘å®æˆ˜-ç¬”è®°/","content":"\n## 2\n\n### 2.2 Contextå¯¹è±¡\n\n``` js\napp.use(async ctx => {\n  ctx; // è¿™æ˜¯ Context\n  ctx .request; //è¿™æ˜¯ Koa Request\n  ctx.response; //è¿™æ˜¯ Koa Response\n  this; //è¿™ä¹Ÿæ˜¯ Context\n  this.request; //è¿™ä¹Ÿæ˜¯ Koa Request\n  this .response; //è¿™ä¹Ÿæ˜¯ Koa Response\n));\n```\n\n#### ctx.request\n\n``` js\nctx.response.body = {\n  url: ctx. request. url, //è·å–è¯·æ±‚ URL\n  query: ctx.request.query, //è·å–è§£æçš„æŸ¥è¯¢å­—ç¬¦ä¸²\n  querystring : ctx.request.querystring //è·å–åŸå§‹æŸ¥è¯¢å­—ç¬¦ä¸²\n}\n```\n\néšååœ¨æµè§ˆå™¨ä¸­è®¿é—® `http://localhost:3000/?search=koa&keywords=context`ï¼Œä¾¿å¯ä»¥çœ‹åˆ° ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œå¦‚ä¸‹æ‰€ç¤º :\n\n``` js\n{\n  'url':'/?search=koa&keywords=context',\n  'query' : { 'search' : 'koa', 'keywords' : 'context' } ,\n  'querystring':'search=koa&keywords=context'\n}\n```\n\nPOSTè¯·æ±‚çš„å‚æ•°è·å–æ–¹å¼å’Œ GETè¯·æ±‚ä¸åŒ. \n\nKoaæ²¡æœ‰å°è£…è·å– POSTè¯·æ±‚å‚æ•°çš„æ–¹ æ³•ï¼Œå› æ­¤éœ€è¦è§£æ Context ä¸­çš„åŸç”Ÿ Node.jsè¯·æ±‚å¯¹è±¡ req, æˆ–è€…ä½¿ç”¨ `koa-bodyparser`ä¸­é—´ä»¶\n\n#### ctx.response\n\nåœ¨å®é™…å¼€å‘ä¸­ï¼Œ é™¤è®¾ç½®ä¸€ä¸ªè¯·æ±‚çš„å“åº”ä¸»ä½“å¤–ï¼Œ å¾€å¾€è¿˜éœ€è¦é€šè¿‡ `ctx.response.status` è®¾ç½®è¯·æ±‚çŠ¶æ€ï¼Œå¦‚ 200, 404, 500 ç­‰ã€‚\n\né€šè¿‡ `ctx.response.type` å¯ä»¥è®¾ç½®å“åº”çš„ `Content-Type`, å¦‚æœå“åº”å†… å®¹æ˜¯ HTML æ ¼å¼ï¼Œåˆ™è®¾ç½®ä¸º `ctx.response.type ='html'`;å¦‚æœå“åº”å†…å®¹æ˜¯ä¸€å¼  png å›¾ç‰‡ï¼Œåˆ™è®¾ç½®ä¸º `ctx.responseå¥pe ='1mage/png'`ã€‚æ˜¾å¼åœ°è®¾ç½® `Content-Type`æ˜¯å› ä¸ºæµè§ˆå™¨é»˜è®¤ çš„ `Content-Type` æ˜¯ `text/plain`ï¼Œå¦‚æœ `Content-Type` ä¸å¯¹ä¼šå‘ç”Ÿè§£æé”™è¯¯ã€‚\n\né€šè¿‡`ctx.request.accepts()`å‡½æ•°æ¥åˆ¤æ–­å®¢æˆ·ç«¯æœŸæœ›çš„æ•°æ®ç±»å‹\n\né€šè¿‡ `ctx.response.body` è®¾ç½®å“åº”ä½“å†…å®¹\n\nå’Œ `ctx.request.accepts()`ç±»ä¼¼çš„ä¸€ä¸ªæ–¹æ³•æ˜¯ `ctx.response.is(types...)`ï¼Œå®ƒå¯ä»¥ç”¨æ¥æ£€æŸ¥å“åº”ç±»å‹æ˜¯å¦æ˜¯æ‰€æä¾›çš„ç±»å‹ä¹‹ä¸€ï¼Œè¿™å¯¹åˆ›å»ºæ“çºµå“åº”çš„ä¸­é—´ä»¶ç‰¹åˆ«æœ‰ç”¨ ã€‚\n\nè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•æ˜¯ `ctx.response.redirect(url, [alt])`ï¼Œè¿™ä¸ªæ–¹æ³•ç”¨äºå°†çŠ¶æ€ç  302 é‡å®š å‘åˆ° URLï¼Œä¾‹å¦‚ç”¨ æˆ·ç™»å½•åè‡ªåŠ¨é‡å®šå‘åˆ°ç½‘ç«™çš„é¦–é¡µã€‚\n\n#### ctx.state\n\n`ctx.state` æ˜¯æ¨è çš„å‘½åç©ºé—´ï¼Œç”¨äºé€šè¿‡ä¸­é—´ä»¶ä¼ é€’ä¿¡æ¯å’Œå‰ç«¯è§†å›¾ã€‚ç±»ä¼¼ koa-views è¿™ äº›æ¸²æŸ“ Viewå±‚çš„ä¸­é—´ä»¶ä¹Ÿä¼šé»˜è®¤æŠŠ ctx.stateé‡Œé¢çš„å±æ€§ä½œä¸º View çš„ä¸Šä¸‹æ–‡ä¼ å…¥ã€‚\n\n#### ctx.cookies\n\nctx.cookies ç”¨äºè·å–å’Œè®¾ç½® Cookie\n\n``` js\nctx.cookies.get(name, [optionsJ); //è·å–Cookie\nctx.cookies.set(name, value, [options]); // è®¾ç½®Cookie\n```\n\n![](https://raw.githubusercontent.com/alex6liu/blog-images/master/koa/ctx.cookie.options.png)\n\n#### ctx.throw\n\nctx.throwç”¨äºæŠ›å‡ºé”™è¯¯ï¼ŒæŠŠé”™è¯¯ä¿¡æ¯è¿”å›ç»™ç”¨æˆ·ï¼Œ ä»£ç ç¤ºä¾‹å¦‚ä¸‹:\n\n``` js\napp.use(async (ctx) => {\n  ctx.throw(500);\n});\n```\n\n### 2.3 Koaçš„ä¸­é—´ä»¶\n\né€šè¿‡ app.use()å‡½æ•°æ¥åŠ è½½ä¸­é—´ä»¶ã€‚\n\nä¸­é—´ä»¶å‡½æ•°æ˜¯ä¸€ä¸ªå¸¦æœ‰ ctx å’Œ next ä¸¤ä¸ªå‚æ•°çš„ç®€å•å‡½æ•°ã€‚\n\nctx å°±æ˜¯ä¹‹å‰ç« èŠ‚ä»‹ç»çš„ä¸Šä¸‹æ–‡ï¼Œå°è£…äº† Request å’Œ Response ç­‰å¯¹è±¡; next ç”¨äºæŠŠä¸­é—´ä»¶çš„æ‰§è¡Œæƒäº¤ç»™ä¸‹æ¸¸çš„ä¸­é—´ä»¶ã€‚ åœ¨ next()ä¹‹å‰ä½¿ç”¨ await å…³é”®å­—æ˜¯å› ä¸º next()ä¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè€Œåœ¨å½“å‰ä¸­é—´ä»¶ä¸­ä½ äº next()ä¹‹åçš„ä»£ç ä¼šæš‚åœæ‰§è¡Œï¼Œç›´åˆ°æœ€åä¸€ä¸ªä¸­é—´ä»¶æ‰§è¡Œå®Œæ¯•åï¼Œå†è‡ªä¸‹è€Œä¸Šä¾æ¬¡æ‰§è¡Œæ¯ ä¸ªä¸­é—´ä»¶ä¸­ next()ä¹‹åçš„ä»£ç ï¼Œç±»ä¼¼äºä¸€ç§å…ˆè¿›åå‡ºçš„å †æç»“æ„ã€‚\n\n![](https://raw.githubusercontent.com/alex6liu/blog-images/master/koa/onion.png)\n\nä¸‹é¢é€šè¿‡å…·ä½“ä»£ç æ¥æ¼”ç¤ºä¸­é—´ä»¶çš„æ‰§è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤º:\n\n``` js\napp.use (async function (ctx, next) {\n  console.log('one start');\n  await next();\n  console.log('one end');\n));\napp.use (async function (ctx, next) {\n  console.log('two start');\n  ctx.body = 'two';\n  await next();\n  console.log('two end');\n)};\napp.use (async function (ctx, next) {\n  console.log('three start');\n  await next();\n  console.log('three end');\n)};\n```\n\nè¿™æ®µä»£ç ä¸­æœ‰ 3ä¸ªä¸­é—´ä»¶ï¼Œ æ‰§è¡Œç»“æœå¦‚ä¸‹:\n\n``` js\none start\ntwo start\nthree start\nthree end\ntwo end\none end\n```\n\nå¦‚æœæƒ³å°†å¤šä¸ªä¸­é—´ä»¶ç»„åˆæˆä¸€ä¸ªå•ä¸€çš„ä¸­é—´ä»¶, ä¾¿äºé‡ç”¨æˆ–å¯¼å‡ºï¼Œå¯ä»¥ä½¿ç”¨`koa-compose`ï¼Œä»£ç å¦‚ä¸‹:\n\n``` js\nconst all = compose ([middlewarel, middleware2, middleware3]);\napp.use(all);\n```\n\nå¦‚æœä¸€ä¸ªä¸­é—´ä»¶æ²¡æœ‰è°ƒç”¨ `await next()`ï¼Œåˆä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µå‘¢? ç­”æ¡ˆæ˜¯:åé¢çš„ä¸­é—´ä»¶å°†ä¸ä¼šè¢«æ‰§è¡Œã€‚\n\n#### å¸¸ç”¨ Koa ä¸­é—´ä»¶\n\n- koa-bodyparser\n- koa-router\n- koa-static\n- koa-views\n\n## 3 è·¯ç”±\n\nå‰ç«¯è·¯ç”±ä¸»è¦è§£å†³äº†ä¸¤ä¸ªé—®é¢˜:åœ¨é¡µé¢ä¸åˆ·æ–°çš„å‰æä¸‹å®ç° URL çš„å˜åŒ–ï¼Œä»¥åŠæ•æ‰URLçš„å˜åŒ–å¹¶æ‰§è¡Œç›¸åº”çš„é¡µé¢é€»è¾‘ã€‚\n\n### RESTful è§„èŒƒ\n\nREST çš„å…¨ç§°æ˜¯ Representational State Transferï¼Œå³è¡¨ç°å±‚çŠ¶æ€è½¬ç§».\n\nRESTè®¾è®¡ä¸€èˆ¬ç¬¦åˆä»¥ä¸‹æ¡ä»¶:\n\n- ç¨‹åºæˆ–åº”ç”¨çš„äº‹ç‰©éƒ½åº”è¯¥è¢«æŠ½è±¡ä¸ºèµ„æºã€‚\n- æ¯ä¸ªèµ„æºå¯¹åº”å”¯ä¸€çš„URIã€‚(URIçš„å…¨ç§°æ˜¯ UniformResource Identifierï¼Œå³ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼Œæ˜¯ä¸€ä¸ªç”¨äºæ ‡è¯†æŸä¸€äº’è”ç½‘èµ„æºåç§°çš„å­—ç¬¦ä¸²)\n- ä½¿ç”¨ç»Ÿä¸€çš„æ¥å£å¯¹èµ„æºè¿›è¡Œæ“ä½œã€‚\n- å¯¹èµ„æºçš„å„ç§æ“ä½œä¸ä¼šæ”¹å˜èµ„æºæ ‡è¯†ã€‚\n- æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯æ— çŠ¶æ€çš„ã€‚\n\nåœ¨è¯¥åœºæ™¯ä¸­ï¼Œéœ€è¦å®Œæˆå¯¹ç½‘ç«™ç”¨æˆ·çš„æ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤å’ŒæŸ¥çœ‹æ“ä½œã€‚åœ¨éRESTfulæ¶æ„ä¸­ï¼Œä¸€èˆ¬è¢«è®¾è®¡ä¸ºå¦‚ä¸‹æ‰€ç¤º:\n\n``` js\nhttps://api.test.com/addUser // POSTæ–¹æ³•ï¼Œè¯·æ±‚å‘é€æ–°å¢ç”¨æˆ·ä¿¡æ¯\nhttps://api.test.com/deleteUser //POSTæ–¹æ³•ï¼Œè¯·æ±‚å‘é€ç”¨æˆ·çš„ ID\n```\n\nè€ŒåŸºäºRESTfulæ¶æ„è®¾è®¡çš„ APIï¼Œå…¨å±€åªæä¾›å”¯ä¸€çš„URI: `https://api.test.com/users`\n\n``` js\nhttps://api.test.com/users // POSTæ–¹æ³•ï¼Œ è¯·æ±‚å‘é€æ–°å¢ç”¨æˆ·ä¿¡æ¯\nhttps://api.test.com/users/:id // DELETEæ–¹æ³•ï¼Œç”¨æˆ·IDæ˜¯URIçš„ä¸€éƒ¨åˆ†\nhttps://api.test.com/users/:id // PUTæ–¹æ³•ï¼Œè¯·æ±‚å‘é€ç”¨æˆ·çš„ä¿¡æ¯, IDæ˜¯ URI çš„ä¸€éƒ¨åˆ†\nhttps://api.test.com/users/:id // GETæ–¹æ³•ï¼Œç”¨æˆ· IDæ˜¯ URI çš„ä¸€éƒ¨åˆ†\n```\n\nGitHubçš„APIè®¾è®¡è¢«ç§°ä¸ºRESTful APIæ•™ç§‘ä¹¦çš„å…¸èŒƒï¼Œåœ°å€ä¸º`https://developer.github.com/v3/`ã€‚ åŒæ—¶ï¼Œä¸å¾—ä¸æçš„æ˜¯ GitHub v4 çš„ API ä½¿ç”¨äº†å…¨æ–°çš„è®¾è®¡é£æ ¼ GraphQL ï¼Œåœ°å€ä¸º `https://developer.github.com/v4/`ã€‚ GraphQL æä¾›äº†ä¸€å¥—å®Œæ•´æè¿°ï¼Œä½¿å®¢æˆ·ç«¯èƒ½å¤Ÿæ²¡æœ‰ä»»ä½•å†—ä½™åœ°å‡†ç¡®è·å¾—éœ€è¦çš„æ•°æ®ã€‚\n\n### ç”¨æ³•\n\nå¦‚æœä¸€æ¡è·¯ç”±è¯·æ±‚åœ¨ all()æ–¹æ³•å’Œå…¶ä»–æ–¹æ³•ä¸­åŒæ—¶å‘½ä¸­ï¼Œ åªæœ‰æ‰§è¡Œäº† `await next()`ï¼Œè¿™æ¡è·¯ç”±è¯·æ±‚æ‰ä¼šåœ¨ all()æ–¹æ³•å’Œå…¶ä»–æ–¹æ³•ä¸­éƒ½èµ·ä½œç”¨\n\nåœ¨é¡¹ç›®ä¸­ï¼Œ all()æ–¹æ³•ä¸€èˆ¬ç”¨æ¥è®¾ç½®è¯·æ±‚å¤´ï¼Œå¦‚è®¾ç½®è¿‡æœŸæ—¶é—´ã€CORS (Cross-Origin Resource Sharing ï¼Œè·¨åŸŸèµ„æºå…±äº«)ç­‰ï¼Œ\n\n``` js\n//é€šè¿‡è°ƒç”¨è·¯ç”±çš„åç§° userï¼Œç”Ÿæˆè·¯ç”±==â€/users/3â€\nrouter.url('url', 3);\n//é€šè¿‡è°ƒç”¨è·¯ç”±çš„åç§°userï¼Œç”Ÿæˆè·¯ç”±== â€/users/3â€\nrouter.url('user', { id: 3 ));\n```\n\n#### å‘½åè·¯ç”±\n\nä½¿ç”¨ `router.url()`æ–¹æ³•å¯ä»¥åœ¨ä»£ç ä¸­æ ¹æ®è·¯ç”±åç§°å’Œå‚æ•°(å¯é€‰)ç”Ÿæˆå…·ä½“çš„ URLï¼Œè€Œä¸ç”¨é‡‡ç”¨å®‡ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼å»ç”Ÿæˆ URLã€‚\n\n#### åµŒå¥—è·¯ç”±\n\n``` js\nconst forums = new Router ();\nconst posts = new Router ();\nposts.get('/', function (ctx, next) {...});\nposts.get('/:pid', function (ctx, next) {... });\nforums.use('/forums/:fid/posts', posts.routes(), posts.allowedMethods());\n//è·å–äº’è”ç½‘ç‰ˆå—åˆ—è¡¨çš„æ¥å£\n// â€/forums/:fid/postsâ€=>â€/forums/123/postsâ€\n//è·å–äº’è”ç½‘ç‰ˆå—ä¸‹æŸç¯‡æ–‡ç« çš„æ¥å£\n// â€/forums/:fid/posts/:pidâ€=> â€/forums/123/posts/123â€\napp.use(forums.routes());\n```\n\n#### è·¯ç”±å‰ç¼€\n\n``` js\nlet router = new Router ({\n  prefix:'/users'\n});\n//åŒ¹é…è·¯ç”±â€/usersâ€\nrouter.get('/',...);\n//åŒ¹é…è·¯ç”±â€ /users/:idâ€\nrouter.get('/:id',...);\n```\n\n#### URLå‚æ•°\n\n``` js\nrouter.get('/:category/:title', function (ctx, next) {\n  // å“åº”è¯·æ±‚'/programming/how-to-koa'\n  console.log(ctx .params);\n  //å‚æ•°è§£æ=> ( category: 'programming', title:'how-to-koa')\n});\n```\n\n### é€šè¿‡ koa-routerå®ç°æ¥å£çš„æƒé™æ§åˆ¶\n\nå¸¸è§é‰´åˆ«ç”¨æˆ·æƒé™çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯å¹¿æ³›ä½¿ç”¨çš„ `Cookie-Based Authentication` (åŸºäº Cookie çš„è®¤è¯æ¨¡å¼)ï¼Œå¦ä¸€ç§æ˜¯ `Token-Based Authentication` (åŸºäº Token çš„è®¤è¯æ¨¡å¼) ã€‚\n\næœ¬æ¡ˆä¾‹é‡‡ç”¨ Token æ–¹å¼è®¤è¯ã€‚ \n\nToken æ–¹å¼æœ€å¤§çš„ ä¼˜ç‚¹åœ¨äºé‡‡ç”¨äº†æ— çŠ¶æ€æœºåˆ¶ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¯ä»¥å®ç°å¤©ç„¶çš„è·¨åŸŸæ”¯æŒã€å‰åç«¯åˆ†ç¦»ç­‰ï¼ŒåŒæ—¶é™ä½äº†æœåŠ¡ç«¯å¼€å‘å’Œç»´æŠ¤çš„æˆæœ¬ ã€‚\n\nToken æ–¹å¼çš„ç¼ºç‚¹åœ¨äºæœåŠ¡å™¨æ¯æ¬¡éƒ½éœ€è¦å¯¹ Token è¿›è¡Œæ ¡éªŒï¼Œè¿™ä¸€æ­¥éª¤ä¼šå¯¹æœåŠ¡å™¨äº§ç”Ÿè¿ç®—å‹åŠ› ã€‚ \n\nå¦ä¸€æ–¹é¢ï¼Œæ— çŠ¶æ€ API ç¼ºä¹å¯¹ç”¨æˆ·æµç¨‹æˆ–å¼‚å¸¸çš„æ§åˆ¶ï¼Œä¸ºäº†é¿å…å‡ºç°ä¸€äº›ä¾‹å¦‚å›æ”¾æ”»å‡»çš„å¼‚å¸¸æƒ…å†µï¼Œåº”è¯¥è®¾ç½®è¾ƒçŸ­çš„è¿‡æœŸæ—¶é—´ï¼Œä¸”éœ€è¦å¯¹å¯†é’¥è¿›è¡Œä¸¥æ ¼çš„ä¿æŠ¤ ã€‚å¯¹äºå…·æœ‰å¤æ‚æµç¨‹çš„é«˜å±åœºæ™¯(å¦‚æ”¯ä»˜ç­‰ã€‰ï¼Œ åˆ™è¦è°¨æ…é€‰æ‹© Token è®¤è¯æ¨¡å¼ ã€‚\n\nåœ¨æœ¬æ¡ˆä¾‹ä¸­ï¼Œé€‰ç”¨ jsonwebtoken (ä»¥ä¸‹ç®€ç§° JWT)æ¥å®ç° Token çš„ç”Ÿæˆã€æ ¡éªŒå’Œè§£ç ã€‚Token çš„ä¸­é—´ä»¶å®ç°é€‰æ‹© `koa-jwt`ã€‚\n\n``` js\nconst Koa = require('koa');\nconst Router = require('koa-router');\nconst bodyParser = require('koa-bodyparser');\nconst { sign } = require('jsonwebtoken');\nconst { secret } = require('./config');\nconst jwt = require('koa-jwt')({ secret });\nconst app = new Koa();\nconst router = new Router();\nconst detail = new Router();\napp.use(bodyParser());\n\nrouter\n  .post('/api/login', async (ctx, next) => {\n    const user = ctx.request.body;\n    if (user && user.username) {\n      let { username } = user;\n      const token = sign({ username }, secret, { expiresIn: '1h' });\n      ctx.body = {\n        message: 'Get Token Success',\n        code: 1,\n        token\n      };\n    } else {\n      ctx.body = {\n        message: 'Param Error',\n        code: -1\n      };\n    }\n  })\n  .get('/api/userInfo', jwt, async ctx => {\n    ctx.body = {\n      username: ctx.state.user.username\n    };\n  })\n  .get('/api/adminInfo', jwt, admin, async ctx => {\n    ctx.body = {\n      username: ctx.state.user.username\n    };\n\n\napp.use(router.routes()).use(router.allowedMethods());\napp.listen(3000, () => {\n  console.log('app listening 3000...');\n});\n```\n\nmiddleware/admin\n\n``` js\nmodule.exports = () => {\n  return async (ctx, next) => {\n    if (ctx.state.user.username === 'admin') {\n      next()\n    } else {\n      ctx.body = {\n        code: -1,\n        message: 'Authentication Error'\n      }\n    }\n  }\n}\n```\n\n## 4 HTTP\n\n### URI å’Œ URL\n\n- URI: Uniform Resource Identifier (ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦)\n- URL: Uniform Resource Locator (ç»Ÿä¸€èµ„æºå®šä½ç¬¦ã€‰\n\nURL æ˜¯ URIçš„ä¸€ä¸ªå­é›†\n\nä¸€ä¸ªå®Œæ•´çš„ URL ä¸€èˆ¬ç”±7ä¸ªéƒ¨åˆ†ç»„æˆï¼Œå¦‚ä¸‹æ‰€ç¤º:\n\n`scheme: [// [user [:password]@] host[:port]] [/path] [?query] [#fragment]`\n\n- scheme:ä½¿ç”¨çš„åè®®ï¼Œå¦‚ FTP (File Transfer Protocol)ã€ HTTP ç­‰ ã€‚\n- user[:password]: è¡¨ç¤ºè®¿é—®èµ„æºçš„ç”¨æˆ·åå’Œå¯†ç ï¼Œå¸¸è§äº FTP åè®®ä¸­ ã€‚\n- host:ä¸»æœºï¼Œå¦‚ IP åœ°å€æˆ–åŸŸåã€‚\n- port:ç«¯å£å·ï¼Œå¦‚ HTTP é»˜è®¤ä¸º 80 ç«¯å£ ã€‚\n- path:è®¿é—®èµ„æºçš„è·¯å¾„ã€‚\n- query: è¯·æ±‚æ•°æ®ï¼Œä»¥â€œ?â€å¼€å¤´ã€‚\n- fragment: å®šä½é”šç‚¹ï¼Œä»¥â€œ#â€å¼€å¤´ï¼Œå¯ç”¨äºå¿«é€Ÿå®šä½ç½‘é¡µå¯¹åº”çš„æ®µè½ã€‚\n\n### å¸¸ç”¨çš„ HTTP çŠ¶æ€ç \n\nHTTP çŠ¶æ€ç ä¸»è¦åŒ…æ‹¬ 1** (æ¶ˆæ¯)ã€ 2**(æˆåŠŸ)ã€ 3**(é‡å®šå‘)ã€ 4**(è¯·æ±‚é”™è¯¯ã€‰ã€ 5** å’Œ 6** (æœåŠ¡å™¨é”™è¯¯)\n\n![](https://raw.githubusercontent.com/alex6liu/blog-images/master/http/http.statuscode.png)\n\n### å¸¸ç”¨çš„è¯·æ±‚æ–¹æ³•\n\n![](https://raw.githubusercontent.com/alex6liu/blog-images/master/http/http.request.png)\n\n### å¸¸ç”¨çš„ HTTP é¦–éƒ¨å­—æ®µ\n\n![](https://raw.githubusercontent.com/alex6liu/blog-images/master/http/http.header.png)\n\n## 5 æ„å»º Koa Web åº”ç”¨\n\nMVC å…¨åæ˜¯ Model View Controllerï¼Œå³æ¨¡å‹ã€è§†å›¾ã€ æ§åˆ¶å™¨ã€‚\n\n- Model: è´Ÿè´£æ•°æ®è®¿é—®\n- Controller: è´Ÿè´£å¤„ç†æ¶ˆæ¯\n- View: è´Ÿè´£æ˜¾ç¤ºæ•°æ®\n\nä¸‰å±‚æ¶æ„( 3-TierArchitecture )æ˜¯ä¸€ä¸ªåˆ†å±‚å¼çš„æ¶æ„è®¾è®¡ç†å¿µï¼Œå¦‚æœ‰å¿…è¦ï¼Œä¹Ÿå¯ä»¥åˆ†ä¸ºå¤šå±‚ã€‚\n\nåˆ†å±‚çš„è®¾è®¡ç†å¿µå¥‘åˆäº†â€œé«˜å†…èšä½è—•åˆâ€ çš„æ€æƒ³ï¼Œåœ¨è½¯ä»¶ä½“ç³»æ¶æ„è®¾è®¡ä¸­æ˜¯æœ€å¸¸è§ã€ä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€ç§ç»“æ„ã€‚\n\né€šå¸¸æ„ä¹‰ä¸Šçš„ä¸‰å±‚æ¶æ„æ˜¯å°†æ•´ä¸ªä¸šåŠ¡åº”ç”¨åˆ’åˆ†ä¸º ç•Œé¢å±‚( User Interface Layer)ã€ä¸šåŠ¡é€»è¾‘å±‚( Business Logic Layer)ã€æ•°æ®è®¿é—®å±‚( Data Access Layer)\n\n### åœ¨ Koa ä¸­å®ç° MVC\n\n#### åˆ†ç¦»Router\n\nè·¯ç”±éƒ¨åˆ†çš„ä»£ç å¯ä»¥åˆ†ç¦»æˆç‹¬ç«‹çš„æ–‡ä»¶ï¼Œå¹¶æ ¹æ®é¡¹ç›®ç»“æ„æ”¾ç½®åœ¨é€‚å½“çš„ä½ç½®ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚æœ¬ç¤ºä¾‹ä¸­ï¼Œå°†è·¯ç”±éƒ¨åˆ†çš„ä»£ç ç‹¬ç«‹åœ¨ router.jsæ–‡ä»¶ä¸­ï¼Œå¹¶ç½®äºé¡¹ç›®æ ¹ç›®å½•ä¸‹\n\n``` js\n|-- app.js\n|-- router.js\n```\n\nrouter.js\n\n``` js\nconst router = require('koa-router')();\nconst HomeController = require('./controller/home');\nmodule.exports = (app) => {\n  router.get('/', HomeController.index);\n  router.get('/home', HomeController.home);\n  router.get('/home/:id/:name', HomeController.homeParams);\n  router.get('/user', HomeController.login);\n  router.post('/user/register', HomeController.register);\n  app.use(router.routes()).use(router.allowedMethods());\n}\n```\n\napp.js\n\n``` js\nconst Koa = require('koa');\nconst bodyParser = require('koa-bodyparser');\nconst app = new Koa();\nconst router = require('./router');\napp.use(bodyParser());\nrouter(app);\napp.listen(3000, () => {\n    console.log('server is running at http://localhost:3000');\n});\n```\n\n#### åˆ†ç¦» controller\n\ncontroller è´Ÿè´£å­˜æ”¾å“åº” HTPP è¯·æ±‚çš„ä¸šåŠ¡é€»è¾‘ä»£ç \n\ncontroller/home.js\n\n``` js\nconst HomeService = require('../service/home');\nmodule.exports = {\n    index: async (ctx, next) => {\n        ctx.response.body = `<h1>index page</h1>`;\n    },\n    home: async (ctx, next) => {\n        console.log(ctx.request.query);\n        console.log(ctx.request.querystring);\n        ctx.response.body = '<h1>HOME page</h1>';\n    },\n    homeParams: async (ctx, next) => {\n        console.log(ctx.params);\n        ctx.response.body = '<h1>HOME page /:id/:name</h1>';\n    },\n    login: async (ctx, next) => {\n        ctx.response.body = `<form action=\"/user/register\" method=\"post\">\n              <input name=\"name\" type=\"text\" placeholder=\"è¯·è¾“å…¥ç”¨æˆ·åï¼šikcamp\"/> \n              <br/>\n              <input name=\"password\" type=\"text\" placeholder=\"è¯·è¾“å…¥å¯†ç ï¼š123456\"/>\n              <br/> \n              <button>GoGoGo</button>\n            </form>`;\n    },\n    register: async (ctx, next) => {\n        let {name,password} = ctx.request.body;\n        let data = await HomeService.register(name, password);\n        ctx.response.body = data;\n\n    }\n}\n```\n\nä¸šåŠ¡å±‚çš„ä»£ç åˆ†ç¦»æˆåŠŸä¹‹åï¼Œéœ€è¦ä¿®æ”¹ router.jsæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­å¼•å…¥ controller/home.js, å¹¶ä»¥ home.js ä¸­çš„å‡½æ•°ä½œä¸º HTTP è¯·æ±‚çš„å“åº”å‡½æ•°\n\n**æ³¨æ„: ä¸Šé¢çš„router.jsä»£ç æ˜¯åˆ†ç¦»åçš„**\n\nåœ¨å®é™…å¼€å‘ä¸­ï¼Œæœ‰æ—¶ Node.js éœ€è¦è¿›è¡Œä¸€äº›æ•°æ®è®¿é—®å±‚çš„æ“ä½œï¼Œå¦‚æ“ä½œæ•°æ®åº“ã€è°ƒç”¨ç¬¬ä¸‰æ–¹æ¥å£è·å–æ•°æ®ç­‰ï¼Œå› æ­¤éœ€è¦åˆ†ç¦»å‡º Service å±‚æ¥è¿›è¡Œç›¸åº”å¤„ç† ã€‚ç›¸åº”åœ°ï¼ŒController åªéœ€è¦è¿›è¡Œä¸šåŠ¡é€»è¾‘éƒ¨åˆ†çš„å¤„ç†å³å¯ã€‚\n\n#### åˆ†ç¦» Service\n\nservice/home.js\n\n``` js\nmodule.exports = {\n    register: async (name, pwd) => {\n        let data;\n        if (name == 'ikcamp' && pwd == '123456') {\n            data = `Helloï¼Œ ${name}ï¼`;\n        } else {\n            data = 'è´¦å·ä¿¡æ¯é”™è¯¯';\n        }\n        return data;\n    }\n}\n```\n\n**æ³¨æ„: ä¸Šé¢çš„ controller/home.js ä»£ç ä¹Ÿæ˜¯åˆ†ç¦»åçš„**\n\nè‡³æ­¤ï¼Œé¡¹ç›®ä»£ç å·²ç»å®Œæˆäº†åŸºæœ¬çš„ç»“æ„åˆ†ç¦»ï¼Œå¾—åˆ°çš„æ¨¡å—åŒ…æ‹¬å•ç‹¬å¤„ç† HTTP è¯·æ±‚çš„è·¯ç”±æ–‡ä»¶ router.jsã€å¯¹ HTTP è¯·æ±‚è¿›è¡Œå“åº”çš„ Controller æ–‡ä»¶ï¼Œä»¥åŠä¸º Controller æä¾› Model æ•°æ®çš„ Service æ–‡ä»¶ã€‚\n\n### æ¨¡æ¿å¼•æ“\n\nç›®å‰ï¼Œå¯ä»¥åœ¨ Node.js ä¸­åº”ç”¨ä¸”æ¯”è¾ƒæˆç†Ÿçš„æ¨¡æ¿å¼•æ“æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚ EJSã€ Jade (ç°å·±æ”¹ åä¸º Pug)ã€ Handlebarsã€ Nunjucksã€ Swigç­‰\n\næ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ¨¡æ¿å¼•æ“\n\n`koa-views`\n\n### é™æ€èµ„æº\n\nåœ¨è®¿é—®ç«™ç‚¹æ—¶ï¼Œæµè§ˆå™¨ä¼šæ¥æ”¶åˆ°å„ç§èµ„æºï¼Œå¸¸è§çš„æœ‰ HTMLã€ JavaScriptè„šæœ¬æ–‡ä»¶ã€ css æ ·å¼è¡¨ã€ GIF å›¾ç‰‡èµ„æºå’Œ Flash\n\né‚£ä¹ˆæµè§ˆå™¨æ˜¯é€šè¿‡ä»€ä¹ˆæ–¹å¼åŒºåˆ†ä¸åŒçš„èµ„æºç±»å‹ï¼Œ åˆæ˜¯å¦‚ä½•å†³å®šä»¥ä»€ä¹ˆå½¢å¼æ¥æ˜¾ç¤ºçš„å‘¢?\n\nç­”æ¡ˆæ˜¯æ ¹æ® MIMETypeï¼Œä¹Ÿå°±æ˜¯è¯¥èµ„æºçš„åª’ä½“ç±»å‹ã€‚\n\n![](https://raw.githubusercontent.com/alex6liu/blog-images/master/http/mime-type.png)\n\n`koa-static`\n\n### å…¶ä»–å¸¸ç”¨å¼€å‘æŠ€å·§\n\n#### `koa-json`\n\n#### ä½¿ç”¨ koa-multer ä¸­é—´ä»¶å®ç°æ–‡ä»¶ä¸Šä¼ \n\n**æ³¨æ„: Multer ä¸ä¼šå¤„ç†ä»»ä½•é multipart/form-data ç±»å‹çš„è¡¨å•æ•°æ®**\n\n``` js\ncanst koa = require('koa');\nconst multer = require ( 'koa-multer' );\nconst app = koa();\napp.use(multer({dest : './uploads/'}));\napp.listen(3000) ;\n```\n\n## 6 æ•°æ®åº“\n\n### åœ¨Koaä¸­åº”ç”¨MySQLæ•°æ®åº“\n\nåœ¨ Node.js ä¸­ï¼Œ ä¸€èˆ¬é‡‡ç”¨ Sequelize è¿™ä¸ª ORM ç±»åº“æ¥æ“ä½œæ•°æ®åº“ã€‚ Sequelize æ”¯æŒå¤šç§æ•°æ®åº“ï¼Œå¦‚ PostgreSQLã€ MySQLã€ SQLiteå’Œ MSSQLã€‚\n\n`npm install sequelize -save`\n\n``` js\nconst Sequelize = require('sequelize');\nconst sequelize = new Sequelize('databaseName'ï¼Œ'userNameå‹º' 'password'ï¼Œ{\n  host : 'localhost',\n  dialect : 'mysql'\n}};\nsequelize.authenticate().then (()=>{\n  console.log('Connected');\n  }).catch(err=>{\n    console.error ('Connect failed');\n  });\n```\n\næç¤º:ç”±äºå»ºç«‹æ•°æ®åº“è¿æ¥å­˜åœ¨æˆæœ¬ï¼Œæ‰€ä»¥é€šå¸¸æƒ…å†µä¸‹ä¼šé€šè¿‡è¿æ¥æ± æ¥æå‡æ•°æ®åº“çš„è¿æ¥æ•ˆç‡ï¼Œä»¥é¿å…æ¯æ¬¡æ‰§è¡Œæ•°æ®åº“æ“ä½œæ—¶é‡å¤å»ºç«‹è¿æ¥ã€‚Sequelizeé»˜è®¤æ”¯æŒè¿æ¥æ± ï¼Œå¯ä»¥åœ¨åˆ›å»ºè¿æ¥æ—¶æŒ‡å®š pool å‚æ•°æ¥ä¿®æ”¹é»˜è®¤çš„è¿æ¥æ± è®¾ç½®ã€‚\n\né€šè¿‡ Sequelizeï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å®šä¹‰æ•°æ®æ¨¡å‹æ¥åˆ›å»ºæ•°æ®è¡¨ï¼Œè€Œä¸å¿…å»æ•°æ®åº“ä¸­ä½¿ç”¨ SQL è„šæœ¬åˆ›å»ºã€‚å¯ä»¥é€šè¿‡ define æ–¹æ³•å®šä¹‰æ¨¡å‹\n\n``` js\nconst Categoty = sequelize.define('category', {\n  id : Sequelize.UUID,\n  name: Sequelize.STRING\n})\n\nconst Project = sequelize.define('project',{ // å®šä¹‰Projectæ¨¡å‹\n  name: {\n    type: Sequelize.STRING,\n    allowNull: false,\n    unique : true\n  },\n  date: {\n    type : Sequelize.DATE,\n    defaultValue: Sequelize.NOW\n})\n```\n\nSequelize ä¼šé»˜è®¤ä¸ºåˆ›å»ºçš„æ•°æ®è¡¨è‡ªåŠ¨åˆ›å»º createdAt å’Œ updatedAt å­—æ®µã€‚åŒæ—¶ï¼ŒSequelize ä¹Ÿæä¾›äº†é…ç½®é¡¹æ¥ç¦ç”¨æˆ–ä¿®æ”¹è¿™äº›å­—æ®µ\n\nåœ¨å®šä¹‰æ¨¡å‹æ—¶ï¼Œä¹Ÿå¯ä»¥ä¸ºå­—æ®µå®šä¹‰ Getterå’Œ Setterï¼Œ å®šä¹‰å†™å…¥æ•°æ®çš„è§„åˆ™\n\n``` js\nconst Custom = sequelize.define('custom', {\n  name: {\n    type : Sequelize .STRING,\n    get () { //å®šä¹‰ Getterï¼Œå¯ä»¥è‡ªå®šä¹‰è·å–æ•°æ®\n      const title = this.getDataValue('title');\n      return `${this.getDataValue('name')} (${title})`\n    }\n  }\n  title : {\n    title : Sequelize.STRING,\n    set (val) { //å®šä¹‰ Setterï¼Œå¯ä»¥åœ¨å†™å…¥æ•°æ®å‰å¤„ç†æ•°æ®\n      this.setDataValue('title', val.toUpperCase())\n    }\n  }\n}\n```\n\n#### åŒæ­¥\n\nå¯ä»¥é€šè¿‡ sync æ–¹æ³•å°†å®šä¹‰çš„æ¨¡å‹åŒæ­¥åˆ°æ•°æ®åº“ä¸­ã€‚æ—¢å¯ä»¥åŒæ­¥å•ä¸ªè¡¨ï¼Œä¹Ÿå¯ä»¥åŒæ­¥å…¨éƒ¨è¡¨ \n\n``` js\nsequelize.sync().then(() => { //åŒæ­¥å…¨éƒ¨æ¨¡å‹\n  // done\n}).catch(error => {\n  // some error thrown\n})\nProduct.sync() //åŒæ­¥å•ä¸ªæ•°æ®è¡¨\nProject.sync({ force: true }) //å¼ºåˆ¶åŒæ­¥ï¼Œå½“æ•°æ®åº“ä¸­å·²ç»å­˜åœ¨è¡¨æ—¶ï¼Œæ¸…é™¤å·²ç»å­˜åœ¨çš„è¡¨\n```\n\n#### æŸ¥è¯¢\n\n``` js\nawait Product.findAll(); // æŸ¥å‡º Productè¡¨ä¸­çš„æ‰€æœ‰æ•°æ®\n\nawait Project.findAll({ // æŸ¥è¯¢ nameå’Œ dateå­—æ®µ\n  attributes: ['name', 'date']\n})\n```\n\n``` js\nconst { Op } = require( 'sequelize' );\nawait Project.findAll({\n  where: {\n    name: {\n      [Op.like]: 't%' //æŸ¥è¯¢æ“ä½œä¸ºlikeï¼Œå€¼ä¸ºä»¥ tå¼€å¤´\n    }\n  }\n})\n```\n\n### åœ¨ Koa ä¸­åº”ç”¨ MongoDB æ•°æ®åº“\n\nåœ¨å¼€å‘ Node.js åº”ç”¨æ—¶ï¼Œ ä¸€èˆ¬å€ŸåŠ© Mongoose ç±»åº“æ¥è®¿é—®æ•°æ®åº“\n\n### åœ¨Koaä¸­åº”ç”¨Redisæ•°æ®åº“\n\n`npm install redis -save`\n\n## 7 å•å…ƒæµ‹è¯•\n\n## 8 ä¼˜åŒ–ä¸éƒ¨ç½²\n\n### æ—¥å¿—\n\n`npm install log4js -save`\n\næ ¹æ®æ—¥å¿—çš„ç”¨é€”ï¼Œ ä¸€èˆ¬å¯ä»¥å°†æ—¥å¿—åˆ†ä¸ºè®¿é—®æ—¥å¿—å’Œåº”ç”¨æ—¥å¿—\n\nåº”ç”¨æ—¥å¿—åŒ…æ‹¬ debugã€ infoã€ warn å’Œ error ç­‰ä¸åŒçº§åˆ«\n\n### éƒ¨ç½²\n\n`npm install pm2@lastst -g`\n\n","tags":["koa","nodejs","ç¬”è®°"]},{"title":"å‰ç«¯ä½“ç³»ç›®å½•","url":"/2019/04/25/æ€»ç»“/å‰ç«¯ä½“ç³»ç›®å½•/","content":"\n## 1ã€HTML/HTML5åŸºç¡€ï¼š\n1.0ã€è¯­ä¹‰åŒ–H5æ ‡ç­¾\n1.1ã€H5å¼•è¿›äº†ä¸€äº›æ–°çš„æ ‡ç­¾ï¼Œç‰¹åˆ«æ³¨æ„articleã€headerã€footerã€asideã€navç­‰ï¼Œæ³¨æ„HTMLçš„æ ‡é¢˜ç»“æ„\n1.2ã€ç†è§£æµè§ˆå™¨è§£æHTMLçš„è¿‡ç¨‹ï¼Œç†è§£DOMçš„æ ‘å½¢ç»“æ„ï¼ŒåŠç›¸åº”API\n1.3ã€ç†è§£HTMLæ ‡ç­¾åœ¨å„ä¸ªæµè§ˆå™¨ä¸Šçš„é»˜è®¤æ ·å¼ï¼ˆä»£ç†æ ·å¼ï¼‰ï¼Œç†è§£CSSä¸­çš„é‡ç½®æ ·å¼è¡¨çš„æ¦‚å¿µ\n1.4ã€ç†è§£Canvasã€SVGã€videoç­‰åŠŸèƒ½æ€§æ ‡ç­¾\n1.5ã€ç†è§£formã€iframeæ ‡ç­¾ï¼Œç†è§£æ–‡ä»¶æäº¤è¿‡ç¨‹\næ¨èä¹¦ç±ï¼š\nAã€ã€ŠHTML5ç§˜ç±ã€‹\n\n## 2ã€é«˜å¥å£®æ€§CSS\n2.1ã€å­¦ä¹ åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬å¤§éƒ¨åˆ†å¸¸ç”¨å±æ€§ã€é€‰æ‹©å™¨çš„ç”¨æ³•ï¼Œè¦å¯¹å¤§å¤šæ•°æ ‡ç­¾æœ‰ä¸ªåŸºç¡€æ¦‚å¿µ,åœ¨æ—¥å¸¸ä½¿ç”¨çš„åŸºç¡€ä¸Šï¼Œå°è¯•å­¦ä¹ æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜ï¼Œè¦çŸ¥é“å…¼å®¹æ€§çš„ä¸»è¦é—®é¢˜åŠè§£å†³æ–¹æ³•\n2.2ã€æ·±å…¥ç†è§£ç›’å­æ¨¡å‹ï¼ŒåŒºåˆ†å—çº§å…ƒç´ ã€è¡Œå†…å…ƒç´ ï¼Œæœ‰å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„å±æ€§ï¼šdisplayã€floatã€positionï¼Œä¸€å®šè¦å¼„æ¸…æ¥šåŒºåˆ†ç›’å­ã€è¡Œå†…ç›’å­çš„æ¦‚å¿µå¦å¤–å¯ä»¥è€ƒè™‘å­¦ä¸€äº›é¢„ç¼–è¯‘è¯­è¨€ï¼šsassã€lessï¼Œéƒ½å¾ˆç®€å•\n2.3ã€å­¦ä¹ å¸¸ç”¨æ¡†æ¶ï¼Œå¯ä»¥ä½¿ç”¨bootstrapæ„å»ºé¡¹ç›®\n2.4ã€å­¦ä¹ æ¡†æ¶çš„ä»£ç ç»„ç»‡æ–¹å¼åŒ…æ‹¬ï¼š12æ ¼æ …ç³»ç»Ÿã€ç»„ä»¶åŒ–ã€ç»„ä»¶çš„é£æ ¼åŒ–ç­‰\n2.5ã€å­¦ä¹ CSS 3çš„æ–°åŠŸèƒ½ï¼Œç‰¹åˆ«æ˜¯åŠ¨ç”»æ•ˆæœã€é€‰æ‹©å™¨\n2.6ã€è®¤çœŸå­¦ä¹ ä¸€äº›CSSå¯¹è±¡åŒ–æ€æƒ³ï¼Œå­¦ä¹ ç¼–å†™ç®€æ´æ€§ã€é«˜å¤ç”¨æ€§ã€é«˜å¥å£®æ€§çš„CSS\n2.7ã€æœ‰ç©ºçš„è¯ï¼Œå¯ä»¥çœ‹çœ‹æ‰€è°“çš„æ‰å¹³åŒ–è®¾è®¡ï¼Œè¿˜æœ‰ç®€æ´æ€§\n2.8ã€ç†è§£CSSOMã€renderã€reflowã€CSSæ€§èƒ½ã€CSSé˜»å¡æ¦‚å¿µ\nå­¦ä¹ æ–¹æ³•ï¼š\n1ã€å¤šçœ‹åˆ«äººçš„ä»£ç ï¼Œä¸€äº›è®¾è®¡çš„ä¸é”™çš„ç½‘ç«™å°±æ˜¯å¾ˆå¥½çš„å­¦ä¹ ç´ æï¼Œæ¯”å¦‚æ‹‰å‹¾ç½‘\n2ã€ä¸€å®šè¦å­¦ä¼šä½¿ç”¨gruntã€gulpå‹ç¼©CSS\n3ã€display + position + float å¯ä»¥ç»„åˆå‡ºå¾ˆå¤æ‚çš„æ•ˆæœï¼Œå¤šæƒ³æƒ³ç›’å­æ¨¡å‹\n4ã€å°è¯•åœ¨ä¸ç”¨floatï¼Œä¸”positionä¸ä¸ºabsoluteçš„æƒ…å†µä¸‹å®ç°ç­‰é«˜ã€ç­‰å®½ç­‰å¸ƒå±€\næ¨èä¹¦ç±ï¼š\n1ã€ã€Šå›¾çµç¨‹åºè®¾è®¡ä¸›ä¹¦:HTML5ä¸CSS3è®¾è®¡æ¨¡å¼ã€‹\n2ã€ã€ŠWebå¼€å‘æŠ€æœ¯ä¸›ä¹¦:æ·±å…¥ç†è§£Bootstrapã€‹\n3ã€ã€Šé«˜æµé‡ç½‘ç«™CSSå¼€å‘æŠ€æœ¯ã€‹\n4ã€ã€ŠCSSè®¾è®¡å½»åº•ç ”ç©¶ã€‹ è¿™ä¸ªä¸€å®šè¦\n5ã€ã€ŠWebå¼€å‘æŠ€æœ¯ä¸›ä¹¦:æ·±å…¥ç†è§£Bootstrapã€‹\n6ã€å¯ä»¥æ‰¾ä¸€äº›ä¸“é—¨è®²SASSçš„ä¹¦ï¼Œä½†æ˜¯æˆ‘æ²¡æ‰¾åˆ°\n7ã€ã€ŠCSSæƒå¨æŒ‡å—(ç¬¬3ç‰ˆ)ã€‹\n\n## 3ã€æ·±å…¥å­¦ä¹ JS\n3.1ã€é‡æ–°å­¦ä¹ JSè¯­æ³•ï¼Œæ³¨æ„ï¼šè¡¨è¾¾å¼ï¼ˆç‰¹åˆ«æ˜¯å‡½æ•°è®¿é—®è¡¨è¾¾å¼ï¼‰ã€è¯­å¥ã€ç±»å‹ï¼ˆåŒ…æ‹¬ç±»å‹åˆ¤æ–­)æ³¨æ„ï¼Œè¿™ä¸ªæ—¶å€™ä¸»è¦å€¾å‘äºâ€œåŸç”Ÿâ€JSå“¦ï¼Œä¸è¦ä½¿ç”¨æ¡†æ¶\n3.2ã€æ·±å…¥ç†è§£JSçš„â€œä¸€çº§å‡½æ•°â€ã€å¯¹è±¡ã€ç±»çš„æ¦‚å¿µ,å­¦ä¼šä½¿ç”¨å‡½æ•°æ¥æ„é€ ç±»ã€é—­åŒ…ï¼Œå­¦ä¼šç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼ç»„ç»‡ä»£ç \n3.3ã€æ·±å…¥ç†è§£JSçš„ä½œç”¨åŸŸã€ä½œç”¨åŸŸé“¾ã€thiså¯¹è±¡ï¼ˆåœ¨å„ç§è°ƒç”¨å½¢å¼ä¸­ï¼Œthisçš„æŒ‡å‘ï¼‰ç†è§£å‡½æ•°çš„å„ç§è°ƒç”¨æ–¹æ³•ï¼ˆcallã€applyã€bindç­‰ï¼‰\n3.4ã€ç†è§£å¯¹è±¡ã€æ•°ç»„çš„æ¦‚å¿µ\nç†è§£å¯¹è±¡çš„â€œ[]â€è°ƒç”¨ï¼Œç†è§£å¯¹è±¡æ˜¯ä¸€ç§â€œç‰¹æ®Šæ•°ç»„â€\nç†è§£forè¯­å¥çš„ç”¨æ³•\næ·±å…¥ç†è§£JSä¸­åŸå§‹å€¼ã€åŒ…è£…å¯¹è±¡çš„æ¦‚å¿µï¼ˆé‡è¦ï¼‰\n3.5ã€å­¦ä¹ ä¸€äº›å¸¸ç”¨æ¡†æ¶çš„ä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬ï¼šJQUERYã€underscoreã€EXTJSï¼ŒåŠ åˆ†ç‚¹æœ‰ï¼šbackboneã€angularjsã€ejsã€jade\né€šè¿‡æ¯”è¾ƒå¤šä¸ªæ¡†æ¶çš„ä½¿ç”¨æ–¹æ³•ï¼Œæƒ³æ¸…æ¥šâ€œJSè¯­è¨€æå…¶çµæ´»â€è¿™ä¸€äº‹å®\næ€»ç»“å¸¸è§ç”¨æ³•ï¼Œæé«˜å­¦ä¹ é€Ÿåº¦\nå­¦ä¹ æ¨¡å—åŒ–å¼€å‘ï¼ˆä½¿ç”¨require.jsã€sea.jsç­‰ï¼‰\n3.6ã€é€‚å½“çœ‹ä¸€äº›è‘—åæ¡†æ¶çš„æºç ï¼Œæ¯”å¦‚jQueryï¼ˆä¸å»ºè®®çœ‹angularjsï¼Œå¤ªå¤æ‚äº†ï¼‰\né‡è¦çš„æ˜¯å­¦ä¹ æ¡†æ¶ä¸­ä»£ç çš„ç»„ç»‡å½¢å¼ï¼Œå³è®¾è®¡æ¨¡å¼\n3.7ã€äº†è§£JSè§£é‡Šã€è¿è¡Œè¿‡ç¨‹ï¼Œç†è§£JSçš„å•çº¿ç¨‹æ¦‚å¿µ\næ·±å…¥ç†è§£JSäº‹ä»¶ã€å¼‚æ­¥ã€é˜»å¡æ¦‚å¿µ\n3.8ã€ç†è§£æµè§ˆå™¨ç»„æˆéƒ¨ä»¶ï¼Œç†è§£V8çš„æ¦‚å¿µ\nå­¦ä¹ V8çš„è§£é‡Š-è¿è¡Œè¿‡ç¨‹\nåœ¨V8åŸºç¡€ä¸Šï¼Œå­¦ä¼šå¦‚ä½•æé«˜JSæ€§èƒ½\nå­¦ä¼šä½¿ç”¨chromeçš„profileè¿›è¡Œå†…å­˜æ³„éœ²åˆ†æ\nå­¦ä¹ æ–¹æ³•ï¼š\n1ã€æé«˜å¯¹è‡ªå·±çš„è¦æ±‚ï¼Œè¦æœ‰ä»£ç æ´ç™–\n2ã€é€‚å½“çš„æ—¶å€™çœ‹çœ‹ä¼˜ç§€æ¡†æ¶çš„æºç ï¼Œç‰¹åˆ«æ˜¯æ¡†æ¶çš„æ¶æ„æ¨¡å¼ã€è®¾è®¡æ¨¡å¼\n3ã€å¤šå­¦å­¦è®¾è®¡æ¨¡å¼\n4ã€å­¦ä¹ åŸç”ŸJSã€DOMã€BOMã€Ajax\næ¨èä¹¦ç±ï¼š\n1ã€ã€ŠOâ€™Reillyç²¾å“å›¾ä¹¦ç³»åˆ—:â€‹JavaScriptæƒå¨æŒ‡å—(â€‹ç¬¬6ç‰ˆ)ã€‹ å¿…çœ‹\n2ã€ã€ŠJavaScriptè®¾è®¡æ¨¡å¼ã€‹\n3ã€ã€ŠWebKitæŠ€æœ¯å†…å¹•ã€‹\n4ã€ã€ŠJavaScriptæ¡†æ¶é«˜çº§ç¼–â€‹ç¨‹:åº”ç”¨Prototype YUI Ext JS Dojo MooToolsã€‹\n5ã€ã€Šç”¨AngularJSå¼€å‘ä¸‹ä¸€ä»£Webåº”ç”¨ã€‹\n6ã€è·¨ç»ˆç«¯\n6.1ã€ç†è§£æ··åˆAPPçš„æ¦‚å¿µ\n6.2ã€ç†è§£ç½‘é¡µåœ¨å„ç±»ç»ˆç«¯ä¸Šçš„è¡¨ç°\n6.3ã€ç†è§£ç½‘é¡µä¸åŸç”Ÿappçš„åŒºåŒï¼Œé‡åœ¨çº¦æŸ\n6.4ã€ç†è§£å•é¡µç½‘ç«™ï¼Œç‰¹åˆ«è¦è§„é¿é¡µé¢çš„å†…å­˜æ³„éœ²é—®é¢˜\n6.5ã€å…¥é—¨nodejsï¼Œå¯¹å…¶æœ‰ä¸ªåŸºç¡€æ¦‚å¿µï¼ŒçŸ¥é“å®ƒèƒ½åšä»€ä¹ˆï¼Œç¼ºç‚¹æ˜¯ä»€ä¹ˆ\næ¨èä¹¦ç±ï¼š\n1ã€ã€Šå•é¡µWebåº”ç”¨:JavaScriptä»å‰ç«¯åˆ°åç«¯ ã€‹\n2ã€ã€ŠWeb 2.0ç•Œé¢è®¾è®¡æ¨¡å¼ã€‹\n3ã€ã€Šå“åº”å¼Webè®¾è®¡:HTML5å’Œâ€‹CSS3å®æˆ˜ã€‹\n5ã€å·¥å…·\nå­¦ä¼šä½¿ç”¨gruntè¿›è¡ŒJSã€CSSã€HTML å‹ç¼©ï¼Œç‰¹åˆ«æ˜¯æ¨¡å—åŒ–jså¼€å‘æ—¶å€™çš„å‹ç¼©\nä¼šç”¨PSè¿›è¡Œåˆ‡å›¾ã€ä¿å­˜icon\nå…¥æ‰‹sublimeã€webstorm\nå­¦ä¼šä½¿ç”¨chromeè°ƒè¯•é¢æ¿ï¼Œç‰¹åˆ«æ˜¯ï¼šconsoleã€networkã€profileã€element\n\nè¿›é˜¶ï¼š\n\n## 4ã€æ€§èƒ½\n1.1ã€ç†è§£èµ„æºåŠ è½½çš„è¿‡ç¨‹\nåŒ…æ‹¬ï¼šTCPæ¡æ‰‹è¿æ¥ã€HTTPè¯·æ±‚æŠ¥æ–‡ã€HTTPå›å¤æŠ¥æ–‡\n1.2ã€ç†è§£èµ„æºåŠ è½½çš„æ€§èƒ½çº¦æŸï¼ŒåŒ…æ‹¬ï¼šTCPè¿æ¥é™åˆ¶ã€TCPæ…¢å¯åŠ¨\n1.3ã€ç†è§£CSSæ–‡ä»¶ã€JSæ–‡ä»¶å‹ç¼©ï¼Œç†è§£ä¸åŒæ–‡ä»¶æ”¾åœ¨é¡µé¢ä¸åŒä½ç½®åå¯¹æ€§èƒ½çš„å½±å“\n1.4ã€ç†è§£CDNåŠ é€Ÿ\n1.5ã€å­¦ä¼šä½¿ç”¨HTTPå¤´æ§åˆ¶èµ„æºç¼“å­˜ï¼Œç†è§£cache-controlã€expireã€max-ageã€ETagå¯¹ç¼“å­˜çš„å½±å“\n1.6ã€æ·±å…¥ç†è§£æµè§ˆå™¨çš„renderè¿‡ç¨‹\næ¨èä¹¦ç±ï¼š\n1ã€ã€ŠWebæ€§èƒ½æƒå¨æŒ‡å—ã€‹\n2ã€é›…è™ç½‘ç«™é¡µé¢æ€§èƒ½ä¼˜åŒ–çš„34æ¡é»„é‡‘å®ˆåˆ™\n\n## 5ã€HTTPåŠTCPåè®®æ—\n2.1ã€å­¦ä¹ httpåè®®ï¼Œç†è§£httpè¯·æ±‚-å“åº”æ¨¡å¼\n2.2ã€ç†è§£httpæ˜¯åº”ç”¨å±‚åè®®ï¼Œå®ƒæ˜¯æ„å»ºåœ¨TCP/IPåè®®ä¸Šçš„\n2.3ã€ç†è§£httpæŠ¥æ–‡ï¼ˆè¯·æ±‚-å“åº”æŠ¥æ–‡ï¼‰\n2.4ã€ç†è§£httpä»£ç†ã€ç¼“å­˜ã€ç½‘å…³ç­‰æ¦‚å¿µï¼ŒæŒ‡å®šå¦‚ä½•æ§åˆ¶ç¼“å­˜\n2.5ã€ç†è§£httpåè®®å†…å®¹ï¼ŒåŒ…æ‹¬ï¼šçŠ¶æ€ç ã€httpå¤´ã€é•¿è¿æ¥ï¼ˆhttp1.1ï¼‰\n2.6ã€å­¦ä¹ httpæœåŠ¡å™¨çš„å·¥ä½œæ¨¡å‹ï¼Œå¯¹é™æ€æ–‡ä»¶ã€CGIã€DHTMLçš„å¤„ç†æµç¨‹æœ‰ä¸ªå¤§è‡´æ¦‚å¿µ\næ¨èä¹¦ç±ï¼š\n1ã€ã€ŠHTTPæƒå¨æŒ‡å—ã€‹\n2ã€ã€ŠTCP/IPè¯¦è§£ã€‹\n3ã€ã€Šå›¾è§£TCP/IP(ç¬¬5ç‰ˆ)ã€‹\n\n## 6ã€å®‰å…¨æ€§\n\n","tags":["å‰ç«¯"]},{"title":"å‰ç«¯è¿›é˜¶ä¹¦ç±","url":"/2019/04/25/æ€»ç»“/å‰ç«¯è¿›é˜¶ä¹¦ç±/","content":"\n[Link](https://github.com/qiu-deqing/FE-learning)\n\n## ç½‘ç»œ\n\n[ ] å›¾è§£http\n[ ] HTTPæƒå¨æŒ‡å—\n[ ] å›¾è§£tcp/ip\n\n## æ€§èƒ½\n\n[ ] Webæ€§èƒ½æƒå¨æŒ‡å—\n[ ] é›…è™ç½‘ç«™é¡µé¢æ€§èƒ½ä¼˜åŒ–çš„34æ¡é»„é‡‘å®ˆåˆ™\n[ ] é«˜æ€§èƒ½ç½‘ç«™å»ºè®¾æŒ‡å—\n\n## Javascript\n\n[ ] JavaScriptæƒå¨æŒ‡å—\n[ ] JavaScripté«˜çº§ç¨‹åºè®¾è®¡\n[ ] JavaScript DOMç¼–ç¨‹è‰ºæœ¯\n[ ] æ·±å…¥ç†è§£ES6\n[ ] javaScript å¿è€…ç§˜ç±\n\n## css\n\n[ ] CSSæƒå¨æŒ‡å—\n[ ] CSS æ­ç§˜\n\n## æ¶æ„\n\n[ ] å¤§å‹ç½‘ç«™æŠ€æœ¯æ¶æ„\n[ ] Head Firstè®¾è®¡æ¨¡å¼\n[ ] è®¾è®¡æ¨¡å¼\n\n## UI/UX\n\n[ ] ç‚¹çŸ³æˆé‡‘\n\n## å‰ç«¯æ¡†æ¶\n\n[ ] æ·±å…¥ReactæŠ€æœ¯æ ˆ\n[ ] React è¿›é˜¶ä¹‹è·¯\n[ ] ReactçŠ¶æ€ç®¡ç†ä¸åŒæ„å®æˆ˜\n[ ] vue.js æƒå¨æŒ‡å—\n[ ] Vue.jså®æˆ˜\n\n## nodeåŠåç«¯æ¡†æ¶\n\n[ ] æ·±å…¥æµ…å‡ºNode.js\n[ ] Node.jså¼€å‘æŒ‡å—\n[ ] koaå’Œnode.jså¼€å‘å®æˆ˜\n[ ] express\n\n## èµ„æ·±!!!\n\n[ ] äººæœˆç¥è¯\n[ ] ç®—æ³•å¯¼è®º\n[ ] æ“ä½œç³»ç»Ÿ\n[ ] ç¼–è¯‘åŸç†\n[ ] è®¡ç®—æœºç½‘ç»œåŸç†\n[ ] è®¡ç®—æœºç¨‹åºè®¾è®¡çš„è‰ºæœ¯","tags":["å‰ç«¯","ä¹¦"]},{"title":"What technical details should a programmer of a web application consider before making the site public?","url":"/2019/04/25/æ€»ç»“/What-technical-details-should-a-programmer-of-a-web-application-consider-before-making-the-site-public/","content":"\n# What technical details should a programmer of a web application consider before making the site public?\n\n[æ¥æº](https://softwareengineering.stackexchange.com/questions/46716/what-technical-details-should-a-programmer-of-a-web-application-consider-before)\n\nThe idea here is that most of us should already know most of what is on this list. But there just might be one or two items you haven't really looked into before, don't fully understand, or maybe never even heard of.\n\n## Interface and User Experience\n\n- Be aware that browsers implement standards inconsistently and make sure your site works reasonably well across all major browsers. At a minimum test against a recent Gecko engine (Firefox), a WebKit engine (Safari and some mobile browsers), Chrome, your supported IE browsers (take advantage of the Application Compatibility VPC Images), and Opera. Also consider how browsers render your site in different operating systems.\n\n- Consider how people might use the site other than from the major browsers: cell phones, screen readers and search engines, for example. â€” Some accessibility info: WAI and Section508, Mobile development: MobiForge.\n\n- Staging: How to deploy updates without affecting your users. Have one or more test or staging environments available to implement changes to architecture, code or sweeping content and ensure that they can be deployed in a controlled way without breaking anything. Have an automated way of then deploying approved changes to the live site. This is most effectively implemented in conjunction with the use of a version control system (git, Subversion, etc.) and an automated build mechanism (Ant, NAnt, etc.).\n\n- Don't display unfriendly errors directly to the user.\n\n- Don't put users' email addresses in plain text as they will get spammed to death.\n\n- Add the attribute rel=\"nofollow\" to user-generated links to avoid spam.\n\n- Build well-considered limits into your site - This also belongs under Security.\n\n- Learn how to do progressive enhancement.\n\n- Redirect after a POST if that POST was successful, to prevent a refresh from submitting again.\n\n- Don't forget to take accessibility into account. It's always a good idea and in certain circumstances it's a legal requirement. WAI-ARIA and WCAG 2 are good resources in this area.\n\n- Read Don't Make Me Think.\n\n## Security\n\n- It's a lot to digest but the OWASP development guide covers Web Site security from top to bottom.\nKnow about Injection especially SQL injection and how to prevent it.\n\n- Never trust user input, nor anything else that comes in the request (which includes cookies and hidden form field values!).\n\n- Hash passwords using salt and use different salts for your rows to prevent rainbow attacks. Use a slow hashing algorithm, such as bcrypt (time tested) or scrypt (even stronger, but newer) (1, 2), for storing passwords. (How To Safely Store A Password). The NIST also approves of PBKDF2 to hash passwords\", and it's FIPS approved in .NET (more info here). Avoid using MD5 or SHA family directly.\n\n- Don't try to come up with your own fancy authentication system. It's such an easy thing to get wrong in subtle and untestable ways and you wouldn't even know it until after you're hacked.\n\n- Know the rules for processing credit cards. (See this question as well)\nUse SSL/TLS/HTTPS for any sites where sensitive data is entered (like credentials, Personally Identifiable Information, credit card info). Let's Encrypt is a free certificate authority which can help.\n\n- Prevent session hijacking.\n\n- Avoid cross site scripting (XSS).\n\n- Avoid cross site request forgeries (CSRF).\n\n- Avoid Clickjacking.\n\n- Keep your system(s) up to date with the latest patches.\n\n- Make sure your database connection information is secured.\n\n- Keep yourself informed about the latest attack techniques and vulnerabilities affecting your platform.\n\n- Read The Google Browser Security Handbook.\n\n- Read The Web Application Hacker's Handbook.\n\n- Consider The principle of least privilege. Try to run your app server as non-root. (tomcat example)\nPut rel=\"noopener noreferrer\" on all user-provided links with target=\"_blank\" to prevent JavaScript on the destination page from redirecting your page to somewhere else, such as a fake login page. More Info\nConsider using a strict Content Security Policy.\n\n## Performance\n\n- Implement caching if necessary, understand and use HTTP caching properly as well as HTML5 Manifest.\n\n- Optimize images - don't use a 20 KB image for a repeating background.\n\n- Compress content for speed, see brotli, gzip/deflate (deflate is better).\n\n- Combine/concatenate multiple stylesheets or multiple script files to reduce the number of browser connections and improve gzip ability to compress duplications between files.\n\n- Take a look at the Yahoo Exceptional Performance site, lots of great guidelines, including improving front-end performance and their YSlow tool (requires Firefox, Safari, Chrome or Opera). Also, Google page speed (use with browser extension) is another tool for performance profiling, and it optimizes your images too.\n\n- Use CSS Image Sprites for small related images like toolbars (see the \"minimize HTTP requests\" point)\n- Use SVG image sprites for small related images like toolbars. SVG coloring is bit tricky. You can read about it here.\n\n- Busy web sites should consider splitting components across domains. Specifically...\n\n- Static content (i.e. images, CSS, JavaScript, and generally content that doesn't need access to cookies) should go in a separate domain that does not use cookies, because all cookies for a domain and its subdomains are sent with every request to the domain and its subdomains. One good option here is to use a Content Delivery Network (CDN), but consider the case where that CDN may fail by including alternative CDNs, or local copies that can be served instead.\nMinimize the total number of HTTP requests required for a browser to render the page.\n\n- Choose a template engine and render/pre-compile it using task-runners like gulp or grunt\n\n- Make sure thereâ€™s a favicon.ico file in the root of the site, i.e. /favicon.ico. Browsers will automatically request it, even if the icon isnâ€™t mentioned in the HTML at all. If you donâ€™t have a /favicon.ico, this will result in a lot of 404s, draining your serverâ€™s bandwidth.\n\n## SEO (Search Engine Optimization)\n\n- Use \"search engine friendly\" URLs, i.e. use example.com/pages/45-article-title instead of example.com/index.php?page=45\n- When using # for dynamic content change the # to #! and then on the server $_REQUEST[\"_escaped_fragment_\"] is what googlebot uses instead of #!. In other words, ./#!page=1 becomes ./?_escaped_fragments_=page=1. Also, for users that may be using FF.b4 or Chromium, history.pushState({\"foo\":\"bar\"}, \"About\", \"./?page=1\"); Is a great command. So even though the address bar has changed the page does not reload. This allows you to use ? instead of #! to keep dynamic content and also tell the server when you email the link that we are after this page, and the AJAX does not need to make another extra request.\n- Don't use links that say \"click here\". You're wasting an SEO opportunity and it makes things harder for people with screen readers.\n- Have an XML sitemap, preferably in the default location /sitemap.xml.\n- Use <link rel=\"canonical\" ... /> when you have multiple URLs that point to the same content, this issue can also be addressed from Google Webmaster Tools.\n- Use Google Webmaster Tools and Bing Webmaster Tools.\n- Install Google Analytics right at the start (or an open source analysis tool like Piwik).\n- Know how robots.txt and search engine spiders work.\n- Redirect requests (using 301 Moved Permanently) asking for www.example.com to example.com (or the other way round) to prevent splitting the google ranking between both sites.\n- Know that there can be badly-behaved spiders out there.\n- If you have non-text content look into Google's sitemap extensions for video etc. There is some good information about this in Tim Farley's answer.\n\n## Technology\n\n- Understand HTTP and things like GET, POST, sessions, cookies, and what it means to be \"stateless\".\n- Write your XHTML/HTML and CSS according to the W3C specifications and make sure they validate. The goal here is to avoid browser quirks modes and as a bonus make it much easier to work with non-traditional browsers like screen readers and mobile devices.\n- Understand how JavaScript is processed in the browser.\n- Understand how JavaScript, style sheets, and other resources used by your page are loaded and consider their impact on perceived performance. It is now widely regarded as appropriate to move scripts to the bottom of your pages with exceptions typically being things like analytics apps or HTML5 shims.\n- Understand how the JavaScript sandbox works, especially if you intend to use iframes.\n- Be aware that JavaScript can and will be disabled, and that AJAX is therefore an extension, not a baseline. Even if most normal users leave it on now, remember that NoScript is becoming more popular, mobile devices may not work as expected, and Google won't run most of your JavaScript when indexing the site.\n- Learn the difference between 301 and 302 redirects (this is also an SEO issue).\n- Learn as much as you possibly can about your deployment platform.\n- Consider using a Reset Style Sheet or normalize.css.\n- Consider JavaScript frameworks (such as jQuery, MooTools, Prototype, Dojo or YUI 3), which will hide a lot of the browser differences when using JavaScript for DOM manipulation.\n- Taking perceived performance and JS frameworks together, consider using a service such as the Google Libraries API to load frameworks so that a browser can use a copy of the framework it has already cached rather than downloading a duplicate copy from your site.\n- Don't reinvent the wheel. Before doing ANYTHING search for a component or example on how to do it. There is a 99% chance that someone has done it and released an OSS version of the code.\n- On the flipside of that, don't start with 20 libraries before you've even decided what your needs are. Particularly on the client-side web where it's almost always ultimately more important to keep things lightweight, fast, and flexible.\n\n## Bug fixing\n\n- Understand you'll spend 20% of your time coding and 80% of it maintaining, so code accordingly.\n- Set up a good error reporting solution.\n- Have a system for people to contact you with suggestions and criticisms.\n- Document how the application works for future support staff and people performing maintenance.\n- Make frequent backups! (And make sure those backups are functional) Have a restore strategy, not just a backup strategy.\n- Use a version control system to store your files, such as Subversion, Mercurial or Git.\n- Don't forget to do your Acceptance Testing. Frameworks like Selenium can help. Especially if you fully automate your testing, perhaps by using a Continuous Integration tool, such as Jenkins.\n- Make sure you have sufficient logging in place using frameworks such as log4j, log4net or log4r. If something goes wrong on your live site, you'll need a way of finding out what.\n- When logging make sure you capture both handled exceptions, and unhandled exceptions. Report/analyse the log output, as it'll show you where the key issues are in your site.\n\n## Other\n\n- Implement both server-side and client-side monitoring and analytics (one should be proactive rather than reactive).\n- Use services like UserVoice and Intercom (or any other similar tools) to constantly keep in touch with your users.\n- Follow Vincent Driessen's Git branching model\n\nLots of stuff omitted not necessarily because they're not useful answers, but because they're either too detailed, out of scope, or go a bit too far for someone looking to get an overview of the things they should know. Please feel free to edit this as well, I probably missed some stuff or made some mistakes.","tags":["webåº”ç”¨"]},{"title":"cookieå’Œsessionçš„åŒºåˆ«","url":"/2019/04/25/ç½‘ç»œ/cookieå’Œsessionçš„åŒºåˆ«/","content":"\n# cookieå’Œsessionçš„åŒºåˆ«\n\n1. ç”±äºHTTPåè®®æ˜¯æ— çŠ¶æ€çš„åè®®ï¼Œæ‰€ä»¥æœåŠ¡ç«¯éœ€è¦è®°å½•ç”¨æˆ·çš„çŠ¶æ€æ—¶ï¼Œå°±éœ€è¦ç”¨æŸç§æœºåˆ¶æ¥è¯†å…·ä½“çš„ç”¨æˆ·ï¼Œè¿™ä¸ªæœºåˆ¶å°±æ˜¯Session.å…¸å‹çš„åœºæ™¯æ¯”å¦‚è´­ç‰©è½¦ï¼Œå½“ä½ ç‚¹å‡»ä¸‹å•æŒ‰é’®æ—¶ï¼Œç”±äºHTTPåè®®æ— çŠ¶æ€ï¼Œæ‰€ä»¥å¹¶ä¸çŸ¥é“æ˜¯å“ªä¸ªç”¨æˆ·æ“ä½œçš„ï¼Œæ‰€ä»¥æœåŠ¡ç«¯è¦ä¸ºç‰¹å®šçš„ç”¨æˆ·åˆ›å»ºäº†ç‰¹å®šçš„Sessionï¼Œç”¨ç”¨äºæ ‡è¯†è¿™ä¸ªç”¨æˆ·ï¼Œå¹¶ä¸”è·Ÿè¸ªç”¨æˆ·ï¼Œè¿™æ ·æ‰çŸ¥é“è´­ç‰©è½¦é‡Œé¢æœ‰å‡ æœ¬ä¹¦ã€‚è¿™ä¸ªSessionæ˜¯ä¿å­˜åœ¨æœåŠ¡ç«¯çš„ï¼Œæœ‰ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ã€‚åœ¨æœåŠ¡ç«¯ä¿å­˜Sessionçš„æ–¹æ³•å¾ˆå¤šï¼Œå†…å­˜ã€æ•°æ®åº“ã€æ–‡ä»¶éƒ½æœ‰ã€‚é›†ç¾¤çš„æ—¶å€™ä¹Ÿè¦è€ƒè™‘Sessionçš„è½¬ç§»ï¼Œåœ¨å¤§å‹çš„ç½‘ç«™ï¼Œä¸€èˆ¬ä¼šæœ‰ä¸“é—¨çš„SessionæœåŠ¡å™¨é›†ç¾¤ï¼Œç”¨æ¥ä¿å­˜ç”¨æˆ·ä¼šè¯ï¼Œè¿™ä¸ªæ—¶å€™ Session ä¿¡æ¯éƒ½æ˜¯æ”¾åœ¨å†…å­˜çš„ï¼Œä½¿ç”¨ä¸€äº›ç¼“å­˜æœåŠ¡æ¯”å¦‚Memcachedä¹‹ç±»çš„æ¥æ”¾ Sessionã€‚\n2. æ€è€ƒä¸€ä¸‹æœåŠ¡ç«¯å¦‚ä½•è¯†åˆ«ç‰¹å®šçš„å®¢æˆ·ï¼Ÿè¿™ä¸ªæ—¶å€™Cookieå°±ç™»åœºäº†ã€‚æ¯æ¬¡HTTPè¯·æ±‚çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯éƒ½ä¼šå‘é€ç›¸åº”çš„Cookieä¿¡æ¯åˆ°æœåŠ¡ç«¯ã€‚å®é™…ä¸Šå¤§å¤šæ•°çš„åº”ç”¨éƒ½æ˜¯ç”¨ Cookie æ¥å®ç°Sessionè·Ÿè¸ªçš„ï¼Œç¬¬ä¸€æ¬¡åˆ›å»ºSessionçš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯ä¼šåœ¨HTTPåè®®ä¸­å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œéœ€è¦åœ¨ Cookie é‡Œé¢è®°å½•ä¸€ä¸ªSession IDï¼Œä»¥åæ¯æ¬¡è¯·æ±‚æŠŠè¿™ä¸ªä¼šè¯IDå‘é€åˆ°æœåŠ¡å™¨ï¼Œæˆ‘å°±çŸ¥é“ä½ æ˜¯è°äº†ã€‚æœ‰äººé—®ï¼Œå¦‚æœå®¢æˆ·ç«¯çš„æµè§ˆå™¨ç¦ç”¨äº† Cookie æ€ä¹ˆåŠï¼Ÿä¸€èˆ¬è¿™ç§æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨ä¸€ç§å«åšURLé‡å†™çš„æŠ€æœ¯æ¥è¿›è¡Œä¼šè¯è·Ÿè¸ªï¼Œå³æ¯æ¬¡HTTPäº¤äº’ï¼ŒURLåé¢éƒ½ä¼šè¢«é™„åŠ ä¸Šä¸€ä¸ªè¯¸å¦‚ sid=xxxxx è¿™æ ·çš„å‚æ•°ï¼ŒæœåŠ¡ç«¯æ®æ­¤æ¥è¯†åˆ«ç”¨æˆ·ã€‚\n3. Cookieå…¶å®è¿˜å¯ä»¥ç”¨åœ¨ä¸€äº›æ–¹ä¾¿ç”¨æˆ·çš„åœºæ™¯ä¸‹ï¼Œè®¾æƒ³ä½ æŸæ¬¡ç™»é™†è¿‡ä¸€ä¸ªç½‘ç«™ï¼Œä¸‹æ¬¡ç™»å½•çš„æ—¶å€™ä¸æƒ³å†æ¬¡è¾“å…¥è´¦å·äº†ï¼Œæ€ä¹ˆåŠï¼Ÿè¿™ä¸ªä¿¡æ¯å¯ä»¥å†™åˆ°Cookieé‡Œé¢ï¼Œè®¿é—®ç½‘ç«™çš„æ—¶å€™ï¼Œç½‘ç«™é¡µé¢çš„è„šæœ¬å¯ä»¥è¯»å–è¿™ä¸ªä¿¡æ¯ï¼Œå°±è‡ªåŠ¨å¸®ä½ æŠŠç”¨æˆ·åç»™å¡«äº†ï¼Œèƒ½å¤Ÿæ–¹ä¾¿ä¸€ä¸‹ç”¨æˆ·ã€‚è¿™ä¹Ÿæ˜¯Cookieåç§°çš„ç”±æ¥ï¼Œç»™ç”¨æˆ·çš„ä¸€ç‚¹ç”œå¤´ã€‚\n\næ‰€ä»¥ï¼Œæ€»ç»“ä¸€ä¸‹ï¼šSessionæ˜¯åœ¨æœåŠ¡ç«¯ä¿å­˜çš„ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œç”¨æ¥è·Ÿè¸ªç”¨æˆ·çš„çŠ¶æ€ï¼Œè¿™ä¸ªæ•°æ®å¯ä»¥ä¿å­˜åœ¨é›†ç¾¤ã€æ•°æ®åº“ã€æ–‡ä»¶ä¸­ï¼›Cookieæ˜¯å®¢æˆ·ç«¯ä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„ä¸€ç§æœºåˆ¶ï¼Œç”¨æ¥è®°å½•ç”¨æˆ·çš„ä¸€äº›ä¿¡æ¯ï¼Œä¹Ÿæ˜¯å®ç°Sessionçš„ä¸€ç§æ–¹å¼ã€‚\n\n----\n\n1. session åœ¨æœåŠ¡å™¨ç«¯ï¼Œcookie åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰\n2. session é»˜è®¤è¢«å­˜åœ¨åœ¨æœåŠ¡å™¨çš„ä¸€ä¸ªæ–‡ä»¶é‡Œï¼ˆä¸æ˜¯å†…å­˜ï¼‰\n3. session çš„è¿è¡Œä¾èµ– session idï¼Œè€Œ session id æ˜¯å­˜åœ¨ cookie ä¸­çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæµè§ˆå™¨ç¦ç”¨äº† cookie ï¼ŒåŒæ—¶ session ä¹Ÿä¼šå¤±æ•ˆï¼ˆä½†æ˜¯å¯ä»¥é€šè¿‡å…¶å®ƒæ–¹å¼å®ç°ï¼Œæ¯”å¦‚åœ¨ url ä¸­ä¼ é€’ session_idï¼‰\n4. session å¯ä»¥æ”¾åœ¨ æ–‡ä»¶ã€æ•°æ®åº“ã€æˆ–å†…å­˜ä¸­éƒ½å¯ä»¥ã€‚\n5. ç”¨æˆ·éªŒè¯è¿™ç§åœºåˆä¸€èˆ¬ä¼šç”¨ session\n\n----\n","tags":["cookie","session"]},{"title":"å‘é€çŸ­ä¿¡","url":"/2019/04/22/æ€»ç»“/å‘é€çŸ­ä¿¡/","content":"\n# å‘é€çŸ­ä¿¡\n\nå®‰è£…MD5\n\n``` js\nnpm i md5\n```\n\nä½¿ç”¨\n\n``` js\nconst timestamp = Date.parse(new Date()) / 1000\nconst nonce = this.generateCode()\nconst originString = this.platform.jscode + timestamp + nonce + this.state.phoneNumber\nconst sign = md5(originString)\n\nconst self = this\nself\n  .am('sms', {\n    mobile: this.state.phoneNumber,\n    // jscode: this.state.jscode,\n    timestamp,\n    nonce,\n    sign\n  })\n\n// ç”Ÿæˆ6ä½éšæœºæ•°å­—\ngenerateCode() {\n  let arr = []\n  for(let i = 0; i < 6; i++){\n    let num = Math.random() * 9\n    num = parseInt(num, 10)\n    arr.push(num);\n  }\n  return arr.join('')\n}\n```","tags":["çŸ­ä¿¡"]},{"title":"koaå­¦ä¹ ","url":"/2019/04/22/koa/koaå­¦ä¹ /","content":"\n# koa å­¦ä¹ \n\n## æ´‹è‘±æ¨¡å‹\n\n![](https://camo.githubusercontent.com/d80cf3b511ef4898bcde9a464de491fa15a50d06/68747470733a2f2f7261772e6769746875622e636f6d2f66656e676d6b322f6b6f612d67756964652f6d61737465722f6f6e696f6e2e706e67)\n\n## Middleware\n\n### Router\n\n`koa-router`\n\n[link](https://github.com/ZijianHe/koa-router)\n\n#### å®‰è£…\n\n`npm install koa-router`\n\n#### Basic Usage\n\n``` js\nvar Koa = require('koa');\nvar Router = require('koa-router');\n\nvar app = new Koa();\nvar router = new Router();\n\nrouter.get('/', (ctx, next) => {\n  // ctx.router available\n});\n\napp\n  .use(router.routes())\n  .use(router.allowedMethods());\n```\n\nAdditionaly, `router.all()` can be used to match against all methods.\n\n#### åŠ¨æ€è·¯ç”±\n\n```js\nrouter.get('/:id', (ctx, next) => {\n  console.log(ctx.params)\n});\n```\n\n#### urlä¼ å€¼\n\n```js\nrouter.get('/news', (ctx, next) => {\n  console.log(ctx.query) // -> æ¨è\n  console.log(ctx.querystring)\n  console.log(ctx.url)\n  console.log(ctx.request.url)\n  console.log(ctx.request.query)\n});\n```\n\n#### å…¬å…±æ•°æ®\n\n``` js\napp.use(async function (ctx) {\n  ctx.state = {\n    session: this.session,\n    title: 'app'\n  };\n});\n```\n\n### ejsæ¨¡æ¿å¼•æ“\n\n#### å®‰è£…\n\n`npm i ejs koa-views`\n\n#### Usage\n\n``` js\nconst views = require('koa-views');\nconst path = require('path');\n\napp.use(views(path.join(__dirname, '../views'), {\n  extension: 'ejs'\n}))\n\n// app.use(views('views', { extension: 'ejs' })) // åç¼€åejs\n// app.use(views('views', { map: {html: 'ejs' }})) // åç¼€åhtml\n\n// åœ¨viewsæ–‡ä»¶å¤¹ä¸‹æ–°å»ºindex.ejs\napp.use(async function (ctx) {\n  await ctx.render('index', {\n    title: 'hello'\n  });\n});\n```\n\n#### ejsè¯­æ³•\n\n##### æ•°æ®ç»‘å®š\n\n`<%= title %>`\n\n##### forå¾ªç¯\n\nlistæ˜¯ç»‘å®šçš„æ•°æ®\n\n``` js\n<% for(let i; i< list.length: i++) { %>\n  <%= list[i] %>\n<% } %>\n```\n\n##### å¼•å…¥æ¨¡æ¿\n\n``` js\n// public/header.ejs\n<h2>Header</h2>\n```\n\n`<% include public/header.ejs %>`\n\n##### ç»‘å®šhtmlæ•°æ®\n\n`<%- html %>`\n\n### è·å–postæäº¤çš„æ•°æ®\n\n#### åŸç”Ÿ\n\n``` js\napp.use( async ( ctx ) => {\n\n  if ( ctx.url === '/' && ctx.method === 'GET' ) {\n    // å½“GETè¯·æ±‚æ—¶å€™è¿”å›è¡¨å•é¡µé¢\n    let html = `\n      <h1>koa2 request post demo</h1>\n      <form method=\"POST\" action=\"/\">\n        <p>userName</p>\n        <input name=\"userName\" /><br/>\n        <p>nickName</p>\n        <input name=\"nickName\" /><br/>\n        <p>email</p>\n        <input name=\"email\" /><br/>\n        <button type=\"submit\">submit</button>\n      </form>\n    `\n    ctx.body = html\n  } else if ( ctx.url === '/' && ctx.method === 'POST' ) {\n    // å½“POSTè¯·æ±‚çš„æ—¶å€™ï¼Œè§£æPOSTè¡¨å•é‡Œçš„æ•°æ®ï¼Œå¹¶æ˜¾ç¤ºå‡ºæ¥\n    let postData = await parsePostData( ctx )\n    ctx.body = postData\n  } else {\n    // å…¶ä»–è¯·æ±‚æ˜¾ç¤º404\n    ctx.body = '<h1>404ï¼ï¼ï¼ o(â•¯â–¡â•°)o</h1>'\n  }\n\n// è§£æä¸Šä¸‹æ–‡é‡ŒnodeåŸç”Ÿè¯·æ±‚çš„POSTå‚æ•°\nfunction parsePostData( ctx ) {\n  return new Promise((resolve, reject) => {\n    try {\n      let postdata = \"\";\n      ctx.req.addListener('data', (data) => {\n        postdata += data\n      })\n      ctx.req.addListener(\"end\",function(){\n        let parseData = parseQueryStr( postdata )\n        resolve( parseData )\n      })\n    } catch ( err ) {\n      reject(err)\n    }\n  })\n}\n\n// å°†POSTè¯·æ±‚å‚æ•°å­—ç¬¦ä¸²è§£ææˆJSON\nfunction parseQueryStr( queryStr ) {\n  let queryData = {}\n  let queryStrList = queryStr.split('&')\n  console.log( queryStrList )\n  for (  let [ index, queryStr ] of queryStrList.entries()  ) {\n    let itemList = queryStr.split('=')\n    queryData[ itemList[0] ] = decodeURIComponent(itemList[1])\n  }\n  return queryData\n}\n```\n\n#### koa-bodyparserä¸­é—´ä»¶\n\n`npm i koa-bodyparser`\n\n``` js\nconst bodyParser = require('koa-bodyparser')\n\n// ä½¿ç”¨ctx.bodyè§£æä¸­é—´ä»¶\napp.use(bodyParser())\n\napp.use( async ( ctx ) => {\n\n  if ( ctx.url === '/' && ctx.method === 'GET' ) {\n    // å½“GETè¯·æ±‚æ—¶å€™è¿”å›è¡¨å•é¡µé¢\n    let html = `\n      <h1>koa2 request post demo</h1>\n      <form method=\"POST\" action=\"/\">\n        <p>userName</p>\n        <input name=\"userName\" /><br/>\n        <p>nickName</p>\n        <input name=\"nickName\" /><br/>\n        <p>email</p>\n        <input name=\"email\" /><br/>\n        <button type=\"submit\">submit</button>\n      </form>\n    `\n    ctx.body = html\n  } else if ( ctx.url === '/' && ctx.method === 'POST' ) {\n    // å½“POSTè¯·æ±‚çš„æ—¶å€™ï¼Œä¸­é—´ä»¶koa-bodyparserè§£æPOSTè¡¨å•é‡Œçš„æ•°æ®ï¼Œå¹¶æ˜¾ç¤ºå‡ºæ¥\n    let postData = ctx.request.body // -> å°±æ˜¯è¿™ä¸€å¥\n    ctx.body = postData\n  } else {\n    // å…¶ä»–è¯·æ±‚æ˜¾ç¤º404\n    ctx.body = '<h1>404ï¼ï¼ï¼ o(â•¯â–¡â•°)o</h1>'\n  }\n})\n```\n\n### é™æ€èµ„æº\n\n#### åŸç”Ÿ\n\n[link](https://github.com/ChenShenhai/koa2-note/blob/master/note/static/server.md)\n\n#### ä¸­é—´ä»¶\n\n`koa-static`\n\n``` js\nconst Koa = require('koa')\nconst path = require('path')\nconst static = require('koa-static')\n\nconst app = new Koa()\n\n// é™æ€èµ„æºç›®å½•å¯¹äºç›¸å¯¹å…¥å£æ–‡ä»¶index.jsçš„è·¯å¾„\nconst staticPath = './static'\n\napp.use(static(\n  path.join( __dirname,  staticPath)\n))\n\n\napp.use( async ( ctx ) => {\n  ctx.body = 'hello world'\n})\n\napp.listen(3000, () => {\n  console.log('[demo] static-use-middleware is starting at port 3000')\n})\n```\n\n### art-templateæ¨¡æ¿å¼•æ“\n\n- é€Ÿåº¦æå¿«\n- æ”¯æŒejsè¯­æ³•\n\n#### å®‰è£…\n\n`npm install --save art-template koa-art-template`\n\n#### Usage\n\n``` js\nconst Koa = require('koa');\nconst render = require('koa-art-template');\n\nconst app = new Koa();\nrender(app, {\n  root: path.join(__dirname, 'view'),\n  extname: '.art',\n  debug: process.env.NODE_ENV !== 'production'\n});\n\napp.use(async function (ctx) {\n  await ctx.render('user');\n});\n\napp.listen(8080);\n```\n\n#### syntax\n\n[link](https://aui.github.io/art-template/docs/syntax.html)\n\n`{{value}}`\n\n## cookie\n\n### ä½¿ç”¨æ–¹æ³•\n\nkoaæä¾›äº†ä»ä¸Šä¸‹æ–‡ç›´æ¥è¯»å–ã€å†™å…¥cookieçš„æ–¹æ³•\n\n- ctx.cookies.get(name, [options]) è¯»å–ä¸Šä¸‹æ–‡è¯·æ±‚ä¸­çš„cookie\n- ctx.cookies.set(name, value, [options]) åœ¨ä¸Šä¸‹æ–‡ä¸­å†™å…¥cookie\n\nkoa2 ä¸­æ“ä½œçš„cookiesæ˜¯ä½¿ç”¨äº†npmçš„cookiesæ¨¡å—ï¼Œæºç åœ¨[https://github.com/pillarjs/cookies](https://github.com/pillarjs/cookies)ï¼Œæ‰€ä»¥åœ¨è¯»å†™cookieçš„ä½¿ç”¨å‚æ•°ä¸è¯¥æ¨¡å—çš„ä½¿ç”¨ä¸€è‡´ã€‚\n\n### ä¾‹å­ä»£ç \n\n``` js\nconst Koa = require('koa')\nconst app = new Koa()\n\napp.use( async ( ctx ) => {\n\n  if ( ctx.url === '/index' ) {\n    ctx.cookies.set(\n      'cid',\n      'hello world',\n      {\n        domain: 'localhost',  // å†™cookieæ‰€åœ¨çš„åŸŸå\n        path: '/index',       // å†™cookieæ‰€åœ¨çš„è·¯å¾„\n        maxAge: 10 * 60 * 1000, // cookieæœ‰æ•ˆæ—¶é•¿\n        expires: new Date('2017-02-15'),  // cookieå¤±æ•ˆæ—¶é—´\n        httpOnly: false,  // æ˜¯å¦åªç”¨äºhttpè¯·æ±‚ä¸­è·å–\n        overwrite: false  // æ˜¯å¦å…è®¸é‡å†™\n      }\n    )\n    ctx.body = 'cookie is ok'\n  } else {\n    ctx.body = 'hello world' \n  }\n\n})\n\napp.listen(3000, () => {\n  console.log('[demo] cookie is starting at port 3000')\n})\n```\n\n## session\n\nkoa2åŸç”ŸåŠŸèƒ½åªæä¾›äº†cookieçš„æ“ä½œï¼Œä½†æ˜¯æ²¡æœ‰æä¾›sessionæ“ä½œã€‚sessionå°±åªç”¨è‡ªå·±å®ç°æˆ–è€…é€šè¿‡ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶å®ç°ã€‚åœ¨koa2ä¸­å®ç°sessionçš„æ–¹æ¡ˆæœ‰ä¸€ä¸‹å‡ ç§\n\n- å¦‚æœsessionæ•°æ®é‡å¾ˆå°ï¼Œå¯ä»¥ç›´æ¥å­˜åœ¨å†…å­˜ä¸­\n- å¦‚æœsessionæ•°æ®é‡å¾ˆå¤§ï¼Œåˆ™éœ€è¦å­˜å‚¨ä»‹è´¨å­˜æ”¾sessionæ•°æ®\n\n### æ•°æ®åº“å­˜å‚¨æ–¹æ¡ˆ\n\n- å°†sessionå­˜æ”¾åœ¨MySQLæ•°æ®åº“ä¸­\n- éœ€è¦ç”¨åˆ°ä¸­é—´ä»¶\n  - koa-session-minimal é€‚ç”¨äºkoa2 çš„sessionä¸­é—´ä»¶ï¼Œæä¾›å­˜å‚¨ä»‹è´¨çš„è¯»å†™æ¥å£ ã€‚\n  - koa-mysql-session ä¸ºkoa-session-minimalä¸­é—´ä»¶æä¾›MySQLæ•°æ®åº“çš„sessionæ•°æ®è¯»å†™æ“ä½œã€‚\n  - å°†sessionIdå’Œå¯¹åº”çš„æ•°æ®å­˜åˆ°æ•°æ®åº“\n- å°†æ•°æ®åº“çš„å­˜å‚¨çš„sessionIdå­˜åˆ°é¡µé¢çš„cookieä¸­\n- æ ¹æ®cookieçš„sessionIdå»è·å–å¯¹äºçš„sessionä¿¡æ¯\n\n### ä¾‹å­ä»£ç \n\n```js\nconst Koa = require('koa')\nconst session = require('koa-session-minimal')\nconst MysqlSession = require('koa-mysql-session')\n\nconst app = new Koa()\n\n// é…ç½®å­˜å‚¨sessionä¿¡æ¯çš„mysql\nlet store = new MysqlSession({\n  user: 'root',\n  password: 'abc123',\n  database: 'koa_demo',\n  host: '127.0.0.1',\n})\n\n// å­˜æ”¾sessionIdçš„cookieé…ç½®\nlet cookie = {\n  maxAge: '', // cookieæœ‰æ•ˆæ—¶é•¿\n  expires: '',  // cookieå¤±æ•ˆæ—¶é—´\n  path: '', // å†™cookieæ‰€åœ¨çš„è·¯å¾„\n  domain: '', // å†™cookieæ‰€åœ¨çš„åŸŸå\n  httpOnly: '', // æ˜¯å¦åªç”¨äºhttpè¯·æ±‚ä¸­è·å–\n  overwrite: '',  // æ˜¯å¦å…è®¸é‡å†™\n  secure: '',\n  sameSite: '',\n  signed: '',\n  \n}\n\n// ä½¿ç”¨sessionä¸­é—´ä»¶\napp.use(session({\n  key: 'SESSION_ID',\n  store: store,\n  cookie: cookie\n}))\n\napp.use( async ( ctx ) => {\n\n  // è®¾ç½®session\n  if ( ctx.url === '/set' ) {\n    ctx.session = {\n      user_id: Math.random().toString(36).substr(2),\n      count: 0\n    }\n    ctx.body = ctx.session\n  } else if ( ctx.url === '/' ) {\n\n    // è¯»å–sessionä¿¡æ¯\n    ctx.session.count = ctx.session.count + 1\n    ctx.body = ctx.session\n  } \n  \n})\n\napp.listen(3000)\nconsole.log('[demo] session is starting at port 3000')\n```\n\n## éªŒè¯ç \n\n`npm install --save svg-captcha`\n\n### Usage\n\n``` js\nvar svgCaptcha = require('svg-captcha');\n\nvar captcha = svgCaptcha.create();\nconsole.log(captcha);\n// {data: '<svg.../svg>', text: 'abcd'}\n```\n\nwith express\n\n``` js\nvar svgCaptcha = require('svg-captcha');\n\napp.get('/captcha', function (req, res) {\n\tvar captcha = svgCaptcha.create();\n\treq.session.captcha = captcha.text;\n\t\n\tres.type('svg');\n\tres.status(200).send(captcha.data);\n});\n```\n\nwith koa\n\n``` js\nconst captcha = svgCaptcha.create({\n  size: 6,\n  fontSize: 50,\n  width: 100,\n  height: 40,\n  background: '#cc9966'\n})\n\nctx.session.code = captcha.text\nctx.response.type = 'image/svg+xml'\nctx.body = captcha.data\n```","tags":["koa","nodejs"]},{"title":"è§£å†³å¾®ä¿¡å°ç¨‹åºæ»šåŠ¨ç©¿é€çš„é—®é¢˜","url":"/2019/04/18/æ€»ç»“/è§£å†³å¾®ä¿¡å°ç¨‹åºæ»šåŠ¨ç©¿é€çš„é—®é¢˜/","content":"\n# è§£å†³å¾®ä¿¡å°ç¨‹åºæ»šåŠ¨ç©¿é€çš„é—®é¢˜\n[å‚è€ƒ](https://blog.csdn.net/lamenw/article/details/80621549)\n\n## æ–¹æ¡ˆ\n\n```js\n<view class=\"modal-view\" hidden=\"{{!showModal}}\" bindtap=\"toggleModal\" catchtouchmove=\"ture\">\nÂ  <view class=\"modal\">\nÂ  <view class=\"modal-item\" catchtap=\"makePhoneCall\">{{site.phone}}</view>\nÂ  <view class=\"modal-item\" catchtap=\"toggleModal\">å–æ¶ˆ</view>\nÂ  </view>\n</view>\n```","tags":["å¾®ä¿¡å°ç¨‹åº","æ»šåŠ¨ç©¿é€"]},{"title":"å¾®ä¿¡å°ç¨‹åºå®ç°ä¾§æ»‘åˆ é™¤","url":"/2019/04/09/æ€»ç»“/å¾®ä¿¡å°ç¨‹åºå®ç°ä¾§æ»‘åˆ é™¤/","content":"# å¾®ä¿¡å°ç¨‹åºå®ç°ä¾§æ»‘åˆ é™¤\n\nä¸‰ç§åŠæ³•ï¼š scroll-view, movable-viewé…åˆmovable-area, view\n\n## View\n\nåˆ é™¤ä¸Šä¸€è¡Œåï¼Œä¸‹ä¸€è¡Œçš„åˆ é™¤æŒ‰é’®ä¼šæ˜¾ç¤ºï¼Œè¿™ä¸ªé—®é¢˜åœ¨scroll-viewçš„æ–¹æ³•ä¸­è¿˜æ˜¯å­˜åœ¨\n\nç›®å‰å°±æ˜¯åœ¨ç‚¹å‡»åˆ é™¤çš„æ—¶å€™ï¼ŒæŠŠåˆ é™¤æŒ‰é’®éšè—\n\n``` js\nimport {View,Button} from '@tarojs/components'\nimport { Component } from '../../lib/component'\n\nimport './sliderLeft.scss'\n\nclass SliderLeft extends Component {\n  state = {\n    style: '',\n    delBtnWidth: 100,\n    startX: 0,\n  }\n  \n  touchStart(e) {\n    if(e.touches.length==1){\n      this.setState({\n        //è®¾ç½®è§¦æ‘¸èµ·å§‹ç‚¹æ°´å¹³æ–¹å‘ä½ç½®\n        startX:e.touches[0].clientX\n      });\n    }\n  }\n\n  touchEnd(e) {\n    if(e.changedTouches.length==1){\n      //æ‰‹æŒ‡ç§»åŠ¨ç»“æŸåæ°´å¹³ä½ç½®\n      const endX = e.changedTouches[0].clientX;\n      //è§¦æ‘¸å¼€å§‹ä¸ç»“æŸï¼Œæ‰‹æŒ‡ç§»åŠ¨çš„è·ç¦»\n      const disX = this.state.startX - endX;\n      const delBtnWidth = this.state.delBtnWidth;\n      //å¦‚æœè·ç¦»å°äºåˆ é™¤æŒ‰é’®çš„1/5ï¼Œä¸æ˜¾ç¤ºåˆ é™¤æŒ‰é’®\n      const txtStyle = disX > delBtnWidth/5 ? \"left:-\"+delBtnWidth+\"rpx\":\"left:0rpx\";\n      this.setState({\n        style: txtStyle\n      })\n    }\n  }\n\n  touchMove(e) {\n    if(e.touches.length==1){\n      //æ‰‹æŒ‡ç§»åŠ¨æ—¶æ°´å¹³æ–¹å‘ä½ç½®\n      const moveX = e.touches[0].clientX;\n      //æ‰‹æŒ‡èµ·å§‹ç‚¹ä½ç½®ä¸ç§»åŠ¨æœŸé—´çš„å·®å€¼\n      const disX = this.state.startX - moveX;\n      const delBtnWidth = this.state.delBtnWidth;\n      let txtStyle = \"\";\n      if(disX <= 0){//å¦‚æœç§»åŠ¨è·ç¦»å°äºç­‰äº0ï¼Œæ–‡æœ¬å±‚ä½ç½®ä¸å˜\n        txtStyle = \"left:0rpx\";\n      } else if(disX > 0 ){//ç§»åŠ¨è·ç¦»å¤§äº0ï¼Œæ–‡æœ¬å±‚leftå€¼ç­‰äºæ‰‹æŒ‡ç§»åŠ¨è·ç¦»\n        txtStyle = \"left:-\"+disX+\"rpx\";\n        if(disX>=delBtnWidth){\n          //æ§åˆ¶æ‰‹æŒ‡ç§»åŠ¨è·ç¦»æœ€å¤§å€¼ä¸ºåˆ é™¤æŒ‰é’®çš„å®½åº¦\n          txtStyle = \"left:-\"+delBtnWidth+\"rpx\";\n        }\n      }\n      this.setState({\n        style: txtStyle\n      })\n    }\n  }\n  \n  render () {\n\n    return (\n      <View className='item-scroll' onTouchStart={this.touchStart} onTouchEnd={this.touchEnd} onTouchMove={this.touchMove} style={this.state.style}>\n        <View className='item'>\n          {this.state.checkedItems.includes(item.orderItemId) ? (\n            <View className='check' onClick={this.uncheckItem.bind(this, item.orderItemId, item.quantity)}>\n              <Image src={CheckImage} class='checkImage' mode='scaleToFill'></Image>\n            </View>\n          ) : (\n            <View className='check' onClick={this.checkItem.bind(this, item.orderItemId, item.quantity)}>\n              <View className='check-item'></View>\n            </View>\n          )}\n          <Image src={item.imageUrl} className='item-image' mode='scaleToFill'></Image>\n          <View className='item-intro'>\n            <View className='item-name'>{item.productDesc}</View>\n            <View className='item-price-quantity'>\n              <Text className='item-promotion-price'>ï¿¥{item.itemGrand}</Text>\n              {/* åŠ å‡æŒ‰é’® */}\n              <View className='plus'>\n                <View className={item.quantity > 1 ? 'plus-reduce' : 'plus-reduce-disable'} onClick={this.decreaseItem.bind(this, item.orderItemId, item.quantity)}>-</View>\n                <View className='plus-content'>{item.quantity}</View>\n                <View className='plus-plus' onClick={this.increaseItem.bind(this, item.orderItemId, item.quantity)}>+</View>\n              </View>\n            </View>\n          </View>\n          {/* åˆ é™¤æ•´è¡Œ */}\n          <View className='item-del' onClick={this.clearItem.bind(this, item.orderItemId, item.quantity)}>\n            åˆ é™¤\n          </View>\n        </View>\n      </View>\n    )\n  }\n}\n\nexport default SliderLeft\n```","tags":["å¾®ä¿¡å°ç¨‹åº","ä¾§æ»‘åˆ é™¤"]},{"title":"2019-04-09CSS","url":"/2019/04/09/æ€»ç»“/å•è¡Œå¤šè¡Œæ–‡æœ¬æ˜¾ç¤ºçœç•¥å·/","content":"# CSSå®ç°å•è¡Œã€å¤šè¡Œæ–‡æœ¬æº¢å‡ºæ˜¾ç¤ºçœç•¥å·\n\n[å‚è€ƒ](http://www.daqianduan.com/6179.html)\n\n## å•è¡Œ\nå¦‚æœå®ç°å•è¡Œæ–‡æœ¬çš„æº¢å‡ºæ˜¾ç¤ºçœç•¥å·å¯ä»¥ç”¨text-overflow:ellipsiså±æ€§æ¥ï¼Œå½“ç„¶è¿˜éœ€è¦åŠ å®½åº¦widthå±æ¥å…¼å®¹éƒ¨åˆ†æµè§ˆã€‚\n\nå®ç°æ–¹æ³•ï¼š\n\n``` css\noverflow: hidden;\ntext-overflow:ellipsis;\nwhite-space: nowrap;\n```\n\n## å¤šè¡Œ\n\n``` css\ndisplay: -webkit-box;\n-webkit-box-orient: vertical;\n-webkit-line-clamp: 3;\noverflow: hidden;\n```\n\né€‚ç”¨èŒƒå›´ï¼š\nå› ä½¿ç”¨äº†WebKitçš„CSSæ‰©å±•å±æ€§ï¼Œè¯¥æ–¹æ³•é€‚ç”¨äºWebKitæµè§ˆå™¨åŠç§»åŠ¨ç«¯ï¼›\n\næ³¨ï¼š\n```\n-webkit-line-clamp ç”¨æ¥é™åˆ¶åœ¨ä¸€ä¸ªå—å…ƒç´ æ˜¾ç¤ºçš„æ–‡æœ¬çš„è¡Œæ•°ã€‚ ä¸ºäº†å®ç°è¯¥æ•ˆæœï¼Œå®ƒéœ€è¦ç»„åˆå…¶ä»–çš„WebKitå±æ€§ã€‚å¸¸è§ç»“åˆå±æ€§ï¼š\ndisplay: -webkit-box; å¿…é¡»ç»“åˆçš„å±æ€§ ï¼Œå°†å¯¹è±¡ä½œä¸ºå¼¹æ€§ä¼¸ç¼©ç›’å­æ¨¡å‹æ˜¾ç¤º ã€‚\n-webkit-box-orient å¿…é¡»ç»“åˆçš„å±æ€§ ï¼Œè®¾ç½®æˆ–æ£€ç´¢ä¼¸ç¼©ç›’å¯¹è±¡çš„å­å…ƒç´ çš„æ’åˆ—æ–¹å¼ ã€‚\n```","tags":["CSS"]},{"title":"2019-04-04é¡¹ç›®éƒ¨åˆ†åŠŸèƒ½é€»è¾‘æ¢³ç†","url":"/2019/04/04/æ€»ç»“/2019-04-04é¡¹ç›®éƒ¨åˆ†åŠŸèƒ½é€»è¾‘æ¢³ç†/","content":"# å•†åŸé¡¹ç›®éƒ¨åˆ†é€»è¾‘æ¢³ç†\n\n## ç”¨æˆ·æ³¨å†Œï¼ˆéœ€è¦è·å–åˆ°æ‰‹æœºå·ï¼‰\n\nç”¨æˆ·ç¬¬ä¸€æ¬¡ç™»å½•å¾®ä¿¡å°ç¨‹åºä¼šæœ‰openid\n\nå¯ä»¥é€‰æ‹©å¾®ä¿¡æ³¨å†Œï¼ˆè€ç‰ˆæœ¬çš„å¾®ä¿¡æ³¨å†Œå¯èƒ½ä¼šä¸éœ€è¦æ‰‹æœºå·ï¼‰æˆ–è€…æ‰‹æœºå·æ³¨å†Œ\n\n``` js\n<Button open-type='getPhoneNumber' onGetPhoneNumber={å¤„ç†åç»­æ³¨å†Œæ“ä½œ}></Button>\n```\n\nå¾®ä¿¡æ³¨å†Œåï¼Œå¾—åˆ°unionid\n\n## æ‰‹æœºæ³¨å†Œ\n\n### æ‰‹æœºå·éªŒè¯\n\n``` js\n!/^(((13[0-9]{1})|(14[0-9]{1})|(15[0-9]{1})|(16[0-9]{1})|(17[0-9]{1})|(18[0-9]{1})|(19[0-9]{1}))+\\d{8})$/.test(phoneNumber)\n```\n\n### çŸ­ä¿¡éªŒè¯ç å‘é€å€’è®¡æ—¶\n\n``` js\n// state = { timeCountDown: 60 }\ntimeCountDownFunc () {\n    const countdown = setInterval(() => {\n      this.setState({\n        timeCountDown: --this.state.timeCountDown\n      }, () => {\n        if (this.state.timeCountDown===0) {\n          this.setState({\n            checkCodeClicked: false,\n            timeCountDown: 60\n          })\n          clearInterval(countdown)\n        }\n      })\n    }, 1000)\n  }\n```\n\n### çŸ­ä¿¡éªŒè¯ç éªŒè¯\n\n``` js\n!/^([0-9]{6})$/.test(checkCode)\n```\n\n### åŠŸèƒ½æ£€éªŒ\n\n- åˆ¤æ–­æ‰‹æœºå·æ˜¯å¦æ­£ç¡®\n- åˆ¤æ–­çŸ­ä¿¡éªŒè¯ç æ˜¯å¦æ­£ç¡®\n- åˆ¤æ–­åç«¯è¿”å›çš„é”™è¯¯ä¿¡æ¯\n- æ‰§è¡Œæ‰‹æœºå·æ³¨å†ŒåŠŸèƒ½\n\n## å•†å“åŠ å…¥è´­ç‰©è½¦ã€ç›´æ¥è´­ä¹°\n\n### åŠŸèƒ½æ£€éªŒ\n\n- åˆ¤æ–­å•†å“åº“å­˜\n- åˆ¤æ–­æ˜¯å¦æ˜¯åœ¨å›¢è´­ã€ç§’æ€ç­‰æ—¶é—´å†…\n- åˆ¤æ–­åç«¯è¿”å›çš„é”™è¯¯ä¿¡æ¯\n- æ‰§è¡ŒåŠ å…¥è´­ç‰©è½¦ã€ç«‹å³è´­ä¹°åŠŸèƒ½","tags":["é€»è¾‘"]},{"title":"2019-04-04CSSæ€»ç»“","url":"/2019/04/04/æ€»ç»“/2019-04-04CSSæ€»ç»“/","content":"# CSSæ€»ç»“\n\n[CSSå‚è€ƒæ‰‹å†Œ](http://css.doyoe.com/)\n\n## å±…ä¸­ä¸‰è¿\n\n``` css\ndisplay: flex;\nalign-items: center;\njustify-content: center;\n```\n\n## flex-wrapçš„å¦™ç”¨\n\nå››å®«æ ¼ä»€ä¹ˆçš„\n\n``` css\n  display: flex;\n  flex-wrap: wrap;\n```","tags":["css"]},{"title":"2019-04-04å°ç¨‹åºæ€»ç»“","url":"/2019/04/04/æ€»ç»“/2019-04-04å°ç¨‹åºæ€»ç»“/","content":"# æ€»ç»“å¾®ä¿¡å°ç¨‹åºé¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜\n\n## æ¨¡æ‹Ÿå™¨ä¸­æ—¥æœŸæ­£å¸¸æ˜¾ç¤ºï¼Œiosç³»ç»Ÿä¸Šæ˜¾ç¤ºå‡ºé—®é¢˜(IOSä¸ºNaNçš„é—®é¢˜)\n\n### åŸå› ï¼šiosç³»ç»Ÿå¯¹Date.parse()è§£ææœ‰é™åˆ¶\n\nIOSç³»ç»Ÿä¸æ”¯æŒ2017-01-01æ ¼å¼çš„æ—¶é—´å¯¼è‡´çš„ï¼Œ\n\n``` js\nvar mydata = '2017-01-01 11:00:00';\nconsole.log(\"è¿”å›æ—¶é—´ï¼š\" + mydata);\nvar time = Date.parse(new Date(mydata)) / 1000;\n```\n\nè¿™æ ·çš„ä»£ç å®‰å“æ‰‹æœºå¼€å‘æ‰‹æœºæµ‹è¯•éƒ½æ²¡æœ‰é—®é¢˜ï¼Œå”¯ç‹¬IOSè·å–çš„æ—¥æœŸä¸ºNaN,è‹¥å¹²æ¬¡ç™¾åº¦è°ƒè¯•åå‘ç°ï¼ŒåŸæ¥IOSåªè¯†åˆ«2017/01/01è¿™æ ·çš„æ—¥æœŸæ ¼å¼ï¼Œ\nä¸‹é¢ç”¨æ­£åˆ™æ›¿æ¢2017-01-01æ—¥æœŸæ ¼å¼ä¸º2017/01/01åé—®é¢˜è§£å†³(ä»£ç å¦‚ä¸‹)\n\n``` js\nvar mydata = '2017-01-01 11:00:00'; Â \nmydata=data.replace(/-/g, '/'); Â \nconsole.log(\"è¿”å›æ—¶é—´ï¼š\" + mydata); Â \nvar time = Date.parse(new Date(mydata)) / 1000;\n```\n\n----------------------\n\n``` js\nvar startTime = new Date('2017-12-08 00:00:00');   //iosä¸­starTimeä¸ºNaN\n```\n\nAndroid å’Œ PCç«¯æµè§ˆå™¨éƒ½æ²¡æœ‰é—®é¢˜ï¼ŒIOS æµè§ˆå™¨ä¼šæŠ¥NaNï¼Œè§£å†³æ–¹æ³•å°±æ˜¯ï¼ŒæŠŠä¸­é—´çš„ç©ºæ ¼æ›¿æ¢ä¸ºT\n\n``` js\nstartTime.replace(' ','T');\nvar startTime2 = new Date('2017-12-08T00:00:00');  \n```\n\n## canvasç”Ÿæˆæµ·æŠ¥\n\n``` js\nlet canvasImg = ''\n  await Taro.downloadFile({\n    url: prodimg\n  })\n  .then(res => {\n    canvasImg = res.tempFilePath\n\n  const context = Taro.createCanvasContext(\"imageCanvas\",this.$scope)\n  context.drawImage(canvasImg,57,10,260,260);\n  context.save();\n```\n\n### ioså¿…é¡»æ‰“å¼€è°ƒè¯•æ‰èƒ½å‡ºç°å›¾ç‰‡çš„é—®é¢˜\n\næ·»åŠ å›¾ç‰‡åŸŸååˆ°å°ç¨‹åºçš„downloadFileå®‰å…¨åŸŸåä¸‹\n\n[å‚è€ƒ](https://developers.weixin.qq.com/community/develop/doc/0002c0cddf05c81490a6649cf51c00)\n\n### ä¿å­˜å›¾ç‰‡\n\n``` js\n  saveImage() {\n    const self = this\n    Taro.canvasToTempFilePath({\n      canvasId: 'imageCanvas',\n      fileType: 'jpg',\n      success(res) {\n        Taro.authorize({\n          scope: 'scope.writePhotosAlbum',\n          success() {\n            Taro.saveImageToPhotosAlbum({\n              filePath: res.tempFilePath,\n              success() {\n                Taro.showToast({\n                  title: 'ä¿å­˜æˆåŠŸï¼',\n                  icon: 'none',\n                  mask: true,\n                  complete: Taro.hideLoading()\n                })\n                console.log(\"ä¿å­˜æˆåŠŸï¼\");\n              }\n            })\n          }\n        })\n      }\n    }, this.$scope)\n  }\n```\n\n## ButtonæŒ‰é’®å»é™¤è¾¹æ¡†\n\n```button::after{ border: none; }```","tags":["å¾®ä¿¡å°ç¨‹åº"]}]